---
title: Omnikanali maksete ülevaade
description: Selles teemas antakse ülevaade omnikanali maksetest rakenduses Dynamics 365 Commerce.
author: rubendel
ms.date: 09/17/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: rubendel
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: AX 8.1.3
ms.openlocfilehash: 07d8e740e8f20533272c403446d5e8294c9f37a1
ms.sourcegitcommit: 3cdc42346bb653c13ab33a7142dbb7969f1f6dda
ms.translationtype: HT
ms.contentlocale: et-EE
ms.lasthandoff: 03/31/2021
ms.locfileid: "5791122"
---
# <a name="omni-channel-payments-overview"></a><span data-ttu-id="fb033-103">Omnikanali maksete ülevaade</span><span class="sxs-lookup"><span data-stu-id="fb033-103">Omni-channel payments overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="fb033-104">Selles teemas antakse ülevaade omnikanali maksetest rakenduses Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="fb033-104">This topic provides an overview of omni-channel payments in Dynamics 365 Commerce.</span></span> <span data-ttu-id="fb033-105">See sisaldab põhjalikku loendit toetatud stsenaariumitega, teavet funktsioonide, seadistamise ja tõrkeotsingu kohta ning tavaliste probleemide kirjeldusi.</span><span class="sxs-lookup"><span data-stu-id="fb033-105">It includes a comprehensive list of supported scenarios, information about functionality, setup, and troubleshooting, and descriptions of some typical issues.</span></span>

## <a name="key-terms"></a><span data-ttu-id="fb033-106">Põhimõisted</span><span class="sxs-lookup"><span data-stu-id="fb033-106">Key terms</span></span>

| <span data-ttu-id="fb033-107">Mõiste</span><span class="sxs-lookup"><span data-stu-id="fb033-107">Term</span></span> | <span data-ttu-id="fb033-108">Kirjeldus</span><span class="sxs-lookup"><span data-stu-id="fb033-108">Description</span></span> |
|---|---|
| <span data-ttu-id="fb033-109">Luba</span><span class="sxs-lookup"><span data-stu-id="fb033-109">Token</span></span> | <span data-ttu-id="fb033-110">Andmestring, mille maksetöötleja esitab viitena.</span><span class="sxs-lookup"><span data-stu-id="fb033-110">A string of data that a payment processor provides as a reference.</span></span> <span data-ttu-id="fb033-111">Load võivad tähistada maksekaardi numbreid, makse autoriseerimisi ja eelmise makse jäädvustusi.</span><span class="sxs-lookup"><span data-stu-id="fb033-111">Tokens can represent payment card numbers, payment authorizations, and previous payment captures.</span></span> <span data-ttu-id="fb033-112">Load on olulised, kuna need aitavad hoida tundlikke andmeid süsteemi kassast (POS) eemal.</span><span class="sxs-lookup"><span data-stu-id="fb033-112">Tokens are important because they help keep sensitive data out of the point of sale (POS) system.</span></span> <span data-ttu-id="fb033-113">Neid nimetatakse mõnikord *viideteks*.</span><span class="sxs-lookup"><span data-stu-id="fb033-113">They are sometimes also referred to as *references*.</span></span> |
| <span data-ttu-id="fb033-114">Kaardiluba</span><span class="sxs-lookup"><span data-stu-id="fb033-114">Card token</span></span> | <span data-ttu-id="fb033-115">Luba, mille maksetöötleja esitab kassasüsteemi salvestamiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-115">A token that a payment processor provides for storage in the POS system.</span></span> <span data-ttu-id="fb033-116">Kaardiluba saab kasutada ainult kaupmees, kellele see antakse.</span><span class="sxs-lookup"><span data-stu-id="fb033-116">A card token can be used only by the merchant who receives it.</span></span> <span data-ttu-id="fb033-117">Kaardilubasid nimetatakse mõnikord *kaardiviideteks*.</span><span class="sxs-lookup"><span data-stu-id="fb033-117">Card tokens are sometimes also referred to as *card references*.</span></span> |
| <span data-ttu-id="fb033-118">Autoriseerimise luba</span><span class="sxs-lookup"><span data-stu-id="fb033-118">Authorization (auth) token</span></span> | <span data-ttu-id="fb033-119">Kordumatu ID, mille makseprotsess esitab osana vastusest, mille see saadab kassasüsteemi pärast seda, kui kassasüsteem esitab autoriseerimise taotluse.</span><span class="sxs-lookup"><span data-stu-id="fb033-119">A unique ID that a payment process provides as part of the response that it sends to a POS system after the POS system makes an authorization request.</span></span> <span data-ttu-id="fb033-120">Autoriseerimise luba saab kasutada hiljem, kui töötlejal palutakse teha niisuguseid toiminguid nagu autoriseerimise ennistamine või tühistamine.</span><span class="sxs-lookup"><span data-stu-id="fb033-120">An authorization token can be used later if the processor is called to perform actions such as reversing or voiding the authorization.</span></span> <span data-ttu-id="fb033-121">Kuid kõige sagedamini kasutatakse seda vahendite jäädvustamiseks, kui tellimus täidetakse või kanne lõpule viiakse.</span><span class="sxs-lookup"><span data-stu-id="fb033-121">However, it's most often used to capture funds when an order is fulfilled or a transaction is finalized.</span></span> <span data-ttu-id="fb033-122">Autoriseerimise lubasid nimetatakse mõnikord *autoriseerimise viideteks*.</span><span class="sxs-lookup"><span data-stu-id="fb033-122">Authorization tokens are sometimes also referred to as *authorization references*.</span></span> |
| <span data-ttu-id="fb033-123">Hõivamise luba</span><span class="sxs-lookup"><span data-stu-id="fb033-123">Capture token</span></span> | <span data-ttu-id="fb033-124">Viide, mille maksetöötleja esitab kassasüsteemi, kui makse lõpule viiakse või hõivatakse.</span><span class="sxs-lookup"><span data-stu-id="fb033-124">A reference that a payment processor provides to a POS system when a payment is finalized or captured.</span></span> <span data-ttu-id="fb033-125">Hõivamise luba saab seejärel kasutada maksehõive viitamiseks järgmistes toimingutes, näiteks tagasimakse taotlustes.</span><span class="sxs-lookup"><span data-stu-id="fb033-125">The capture token can then be used to reference the payment capture in subsequent operations, such as refund requests.</span></span> | 
| <span data-ttu-id="fb033-126">Kaarti pole</span><span class="sxs-lookup"><span data-stu-id="fb033-126">Card not present</span></span> | <span data-ttu-id="fb033-127">Tingimus, mis viitab maksekannetele, kus füüsilist kaarti pole.</span><span class="sxs-lookup"><span data-stu-id="fb033-127">A term that refers to payment transactions where a physical card isn't presented.</span></span> <span data-ttu-id="fb033-128">Näiteks võivad need kanded esineda e-kaubanduse või kõnekeskuse stsenaariumides.</span><span class="sxs-lookup"><span data-stu-id="fb033-128">For example, these transactions can occur in e-commerce or call center scenarios.</span></span> <span data-ttu-id="fb033-129">Nende kannete jaoks sisestatakse maksega seotud teave käsitsi e-kaubanduse veebisaidil, kõnekeskuse voos või kassa- või makseterminalis.</span><span class="sxs-lookup"><span data-stu-id="fb033-129">For these transactions, the payment-related information is manually entered on an e-commerce website, in a call center flow, or on the POS or payment terminal.</span></span> |
| <span data-ttu-id="fb033-130">Kaart on olemas</span><span class="sxs-lookup"><span data-stu-id="fb033-130">Card present</span></span> | <span data-ttu-id="fb033-131">Tingimus, mis viitab maksekannetele, kus füüsiline kaart on olemas ja seda kasutatakse makseterminalis, mis on ühendatud Microsoft Dynamics 365 kassasüsteemiga.</span><span class="sxs-lookup"><span data-stu-id="fb033-131">A term that refers to payment transactions where a physical card is presented and used on a payment terminal that is connected to the Microsoft Dynamics 365 POS system.</span></span> |

## <a name="overview"></a><span data-ttu-id="fb033-132">Ülevaade</span><span class="sxs-lookup"><span data-stu-id="fb033-132">Overview</span></span>

<span data-ttu-id="fb033-133">Üldiselt kirjeldab tingimus *omnikanali maksed* võimet luua tellimus ühes kanalis ja täita see teises kanalis.</span><span class="sxs-lookup"><span data-stu-id="fb033-133">In general, the term *omni-channel payments* describes the ability to create an order in one channel and fulfill it in another channel.</span></span> <span data-ttu-id="fb033-134">Omnikanali makse toe põhiomadus on säilitada makse üksikasju koos ülejäänud makse üksikasjadega ja seejärel kasutada neid makse üksikasju, kui tellimus teises kanalis tagasi kutsutakse või seda seal töödeldakse.</span><span class="sxs-lookup"><span data-stu-id="fb033-134">The key to omni-channel payment support is preserving payment details together with the rest of the order details, and then using those payment details when the order is recalled or processed in another channel.</span></span> <span data-ttu-id="fb033-135">Klassikaline näide on veebist tellimise ja kauplusest kättesaamise stsenaarium.</span><span class="sxs-lookup"><span data-stu-id="fb033-135">A classic example is the "Buy online, pick up in store" scenario.</span></span> <span data-ttu-id="fb033-136">Selles stsenaariumis lisatakse makse üksikasjad, kui tellimus veebis luuakse.</span><span class="sxs-lookup"><span data-stu-id="fb033-136">In this scenario, the payment details are added when the order is created online.</span></span> <span data-ttu-id="fb033-137">Seejärel kutsutakse need tagasi kassasse, et kliendi maksekaardilt kättesaamisel tasu võtta.</span><span class="sxs-lookup"><span data-stu-id="fb033-137">They are then recalled at the POS to charge the customer's payment card at the time of pickup.</span></span> 

<span data-ttu-id="fb033-138">Kõiki selles teemas kirjeldatud stsenaariume saab juurutada, kasutades Commerce’is olevat standardset maksete tarkvaraarenduse komplekti (SDK).</span><span class="sxs-lookup"><span data-stu-id="fb033-138">All the scenarios that are described in this topic can be implemented by using the standard Payments software development kit (SDK) that is provided with Commerce.</span></span> <span data-ttu-id="fb033-139">[Dynamics 365 maksekonnektor Adyeni jaoks](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) annab valmis juurutuse iga siin kirjeldatud stsenaariumi kohta.</span><span class="sxs-lookup"><span data-stu-id="fb033-139">The [Dynamics 365 Payment Connector for Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) provides an out-of-box implementation of every scenario that is described here.</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="fb033-140">Eeltingimused</span><span class="sxs-lookup"><span data-stu-id="fb033-140">Prerequisites</span></span>

<span data-ttu-id="fb033-141">Iga stsenaariumi jaoks, mida selles teemas kirjeldatakse, on vaja maksekonnektorit, mis toetab omnikanali makseid.</span><span class="sxs-lookup"><span data-stu-id="fb033-141">Every scenario that is described in this topic requires a payment connector that supports omni-channel payments.</span></span> <span data-ttu-id="fb033-142">Valmis Adyeni konnektorit saab samuti kasutada, kuna see toetab stsenaariume, mis on tehtud saadavaks maksete SDK kaudu.</span><span class="sxs-lookup"><span data-stu-id="fb033-142">The out-of-box Adyen connector can also be used, because it supports the scenarios that are made available through the Payments SDK.</span></span> <span data-ttu-id="fb033-143">Lisateavet maksekonnektorite juurutamise ja Retaili SDK kohta üldiselt vaadake teemast [Avaleht Retail IT-professionaalidele ja arendajatele](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span><span class="sxs-lookup"><span data-stu-id="fb033-143">For more information about how to implement payment connectors, and about the Retail SDK in general, visit the [Retail for IT pros and developers home page](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span></span>

#### <a name="supported-versions"></a><span data-ttu-id="fb033-144">Toetatud versioonid</span><span class="sxs-lookup"><span data-stu-id="fb033-144">Supported versions</span></span>

<span data-ttu-id="fb033-145">Selles teemas kirjeldatud omnikanali maksevõimalused väljastati osana rakenduse Microsoft Dynamics 365 for Retail versioonist 8.1.3.</span><span class="sxs-lookup"><span data-stu-id="fb033-145">The omni-channel payment capabilities that are described in this topic were released as part of Microsoft Dynamics 365 for Retail version 8.1.3.</span></span> 

#### <a name="card-present-and-card-not-present-connectors"></a><span data-ttu-id="fb033-146">Konnektorid Kaart on olemas ja Kaarti pole</span><span class="sxs-lookup"><span data-stu-id="fb033-146">"Card present" and "card not present" connectors</span></span>

<span data-ttu-id="fb033-147">Maksete SDK tugineb kahel rakenduse programmeerimisliidese (API) komplektil maksete jaoks.</span><span class="sxs-lookup"><span data-stu-id="fb033-147">The Payments SDK relies on two sets of application programming interfaces (APIs) for payments.</span></span> <span data-ttu-id="fb033-148">Esimene API-de komplekt kannab nime **iPaymentProcessor**.</span><span class="sxs-lookup"><span data-stu-id="fb033-148">The first set of APIs is named **iPaymentProcessor**.</span></span> <span data-ttu-id="fb033-149">Seda kasutatakse maksekonnektorite Kaarti pole juurutamiseks, mida saab kasutada kõikides kõnekeskustes ja rakenduse Microsoft Dynamics e-kaubanduse platvormiga.</span><span class="sxs-lookup"><span data-stu-id="fb033-149">It's used to implement "card not present" payment connectors that can be used in call centers and with the Microsoft Dynamics e-Commerce platform.</span></span> <span data-ttu-id="fb033-150">Lisateavet liidese **iPaymentProcessor** kohta vaadake tehnilisest ülevaatest [Maksekonnektori ja -seadme juurutamine](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) maksete kohta.</span><span class="sxs-lookup"><span data-stu-id="fb033-150">For more information about the **iPaymentProcessor** interface, see the [Implement a payment connector and a payment device](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) white paper, which covers payments.</span></span> 

<span data-ttu-id="fb033-151">Teine API-de komplekt kannab nime **iNamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="fb033-151">The second set of APIs is named **iNamedRequestHandler**.</span></span> <span data-ttu-id="fb033-152">See toetab makse integratsioonide Kaart on olemas juurutamist, mis kasutavad makseterminali.</span><span class="sxs-lookup"><span data-stu-id="fb033-152">It supports the implementation of "card present" payment integrations that use a payment terminal.</span></span> <span data-ttu-id="fb033-153">Lisateavet liidese **iNamedRequestHandler** kohta vaadake teemast [Makse integreerimise loomine makseterminali jaoks](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span><span class="sxs-lookup"><span data-stu-id="fb033-153">For more information about the **iNamedRequestHandler** interface, see [Create a payment integration for a payment terminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span></span> 

### <a name="setup-and-configuration"></a><span data-ttu-id="fb033-154">Seadistamine ja konfigureerimine</span><span class="sxs-lookup"><span data-stu-id="fb033-154">Setup and configuration</span></span>

<span data-ttu-id="fb033-155">Vajalikud on järgmised komponendid ja seadistustoimingud.</span><span class="sxs-lookup"><span data-stu-id="fb033-155">The following components and setup steps are required:</span></span>

- <span data-ttu-id="fb033-156">**eCommerce’i integratsioon:** stsenaariumide toetamiseks, kus tellimus pärineb veebipoe fassaadist, on vajalik integratsioon Commerce’iga.</span><span class="sxs-lookup"><span data-stu-id="fb033-156">**eCommerce integration:** An integration with Commerce is required to support scenarios where an order originates in an online storefront.</span></span> <span data-ttu-id="fb033-157">Lisateavet Retaili e-kaubanduse SDK kohta vaadake teemast [E-kaubanduse platvormi tarkavaraarenduse komplekt (SDK)](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span><span class="sxs-lookup"><span data-stu-id="fb033-157">For more information about the Retail e-Commerce SDK, see [e-Commerce platform software development kit (SDK)](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span></span> <span data-ttu-id="fb033-158">Demokeskkonnas toetab viite fassaad omnikanali makse stsenaariume.</span><span class="sxs-lookup"><span data-stu-id="fb033-158">In a demo environment, the reference storefront supports omni-channel payment scenarios.</span></span> 
- <span data-ttu-id="fb033-159">**Veebimaksete konfiguratsioon:** veebikanali seadistus peab hõlmama maksekonnektorit, mis on uuendatud toetama omnikanali makseid.</span><span class="sxs-lookup"><span data-stu-id="fb033-159">**Online payments configuration:** The setup of the online channel must include a payment connector that has been updated to support omni-channel payments.</span></span> <span data-ttu-id="fb033-160">Võib ka kasutada valmis maksekonnektorit.</span><span class="sxs-lookup"><span data-stu-id="fb033-160">Alternatively, the out-of-box payment connector can be used.</span></span> <span data-ttu-id="fb033-161">Lisateavet Adyeni maksekonnektori konfigureerimise kohta veebipoodide jaoks vaadake teemast [Adyeni maksekonnektor](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span><span class="sxs-lookup"><span data-stu-id="fb033-161">For information about how to configure the Adyen payment connector for online stores, see [Adyen payment connector](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span></span> <span data-ttu-id="fb033-162">Peale selles kirjeldatud e-kaubanduse seadistustoimingute peab parameeter **Luba makseteabe salvestamine e-kaubanduses** olema Adyeni konnektori sätetes olema seatud väärtusele **Tõene**.</span><span class="sxs-lookup"><span data-stu-id="fb033-162">In addition to the eCommerce setup steps that are described in that topic, the **Allow saving payment information in e-commerce** parameter must be set to **True** in the settings for the Adyen connector.</span></span> 
- <span data-ttu-id="fb033-163">**Omnikanali maksete konfiguratsioon:** tehke kontoris valikud **Jaemüük ja kaubandus \> Peakontori seadistamine \> Parameetrid \> Commerce’i ühiskasutuses parameetrid**.</span><span class="sxs-lookup"><span data-stu-id="fb033-163">**Omni-channel payments configuration:** In the back office, go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span> <span data-ttu-id="fb033-164">Seejärel seadistage vahekaardil **Omnikanali maksed** suvand **Kasuta omnikanali makseid** valikule **Jah**.</span><span class="sxs-lookup"><span data-stu-id="fb033-164">Then, on the **Omni-channel payments** tab, set the **Use omni-channel payments** option to **Yes**.</span></span> <span data-ttu-id="fb033-165">Commerce'i versioonis 10.0.12 ja hilisemates on see säte tööruumis **Funktsioonihaldus**.</span><span class="sxs-lookup"><span data-stu-id="fb033-165">In Commerce versions 10.0.12 and later, this setting is in the **Feature Management** workspace.</span></span> <span data-ttu-id="fb033-166">Valige funktsioon **Omnikanali maksed** ja klõpsake **Luba kohe**.</span><span class="sxs-lookup"><span data-stu-id="fb033-166">Select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="fb033-167">**Makseteenused:** kõnekeskus kasutab vaikimisi maksekonnektorit lehel **Makseteenused** maksete töötlemiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-167">**Payment services:** The call center uses the default payment connector on the **Payment services** page to process payments.</span></span> <span data-ttu-id="fb033-168">Niisuguste stsenaariumide nagu Kõnekeskusesse tellimine ja kättesaamine kauplusest toetamiseks peab see vaikimisi maksekonnektor olema Adyeni maksekonnektor või maksekonnektor, mis vastab omnikanali maksete juurutamise nõuetele.</span><span class="sxs-lookup"><span data-stu-id="fb033-168">To support scenarios such as "Buy in call center, pick up in store," this default payment connector must be the Adyen payment connector or a payment connector that meets the implementation requirements for omni-channel payments.</span></span>
- <span data-ttu-id="fb033-169">**EFT-teenus:** maksed läbi makseterminali tuleb seadistada riistvaraprofiili kiirkaardil **EFT-teenus**.</span><span class="sxs-lookup"><span data-stu-id="fb033-169">**EFT service:** Payments through a payment terminal must be set up on the **EFT service** FastTab of the hardware profile.</span></span> <span data-ttu-id="fb033-170">Adyeni konnektor toetab omnikanali maksete stsenaariume valmis kujul.</span><span class="sxs-lookup"><span data-stu-id="fb033-170">The Adyen connector supports omni-channel payments scenarios out of the box.</span></span> <span data-ttu-id="fb033-171">Kasutada saab ka muid maksekonnektoreid, mis toetavad liidest **iNamedRequestHandler**, kui need toetavad omnikanali makseid.</span><span class="sxs-lookup"><span data-stu-id="fb033-171">Other payment connectors that support the **iNamedRequestHandler** interface can also be used if they support omni-channel payments.</span></span>
- <span data-ttu-id="fb033-172">**Maksekonnektori saadavus:** kui tellimus tagasi kutsutakse, sisaldavad tellimusega koos tagasi kutsutud makse maksevahendi read maksekonnektori nime, mida kasutati selle tellimusega seotud autoriseerimiste loomiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-172">**Payment connector availability:** When an order is recalled, the payment tender lines that are recalled together with the order include the name of the payment connector that was used to create the authorizations that are associated with that order.</span></span> <span data-ttu-id="fb033-173">Kui tellimus täidetakse, üritab maksete SDK kasutada sama konnektorit, mida kasutati algse autoriseerimise loomiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-173">When the order is fulfilled, the Payments SDK tries to use the same connector that was used to create the original authorization.</span></span> <span data-ttu-id="fb033-174">Seetõttu peab hõivamiseks olema saadaval maksekonnektor, millel on samad kaupmehe atribuudid.</span><span class="sxs-lookup"><span data-stu-id="fb033-174">Therefore, a payment connector that has the same merchant properties must be available for capture.</span></span> 
- <span data-ttu-id="fb033-175">**Kaarditüübid:** selleks et omnikanali stsenaariumid õigesti toimiks, peab igal kanalil olema sama seadistus maksevahendite tüüpide jaoks, mida saab omnikanali jaoks kasutada.</span><span class="sxs-lookup"><span data-stu-id="fb033-175">**Card types:** For omni-channel scenarios to work properly, each channel must have the same setup for tender types that can be used for omni-channel.</span></span> <span data-ttu-id="fb033-176">See seadistus hõlmab maksemeetodi ID-sid ja kaarditüübi ID-sid.</span><span class="sxs-lookup"><span data-stu-id="fb033-176">This setup includes payment method IDs and card type IDs.</span></span> <span data-ttu-id="fb033-177">Näiteks kui maksevahendi tüübi **Kaardid** ID on veebipoe seadistuses **2**, peab sellel olema sama ID kaupluse seadistuses.</span><span class="sxs-lookup"><span data-stu-id="fb033-177">For example, if the **Cards** tender type has an ID of **2** in the online store setup, it should have the same ID in the retail store setup.</span></span> <span data-ttu-id="fb033-178">Sama nõue kehtib kaarditüübi ID-dele.</span><span class="sxs-lookup"><span data-stu-id="fb033-178">The same requirement applies to card type IDs.</span></span> <span data-ttu-id="fb033-179">Kui kaardi number **12** seadistatakse veebipoes väärtusele **VISA**, tuleb sama ID seadistada kauplusele.</span><span class="sxs-lookup"><span data-stu-id="fb033-179">If card number **12** is set to **VISA** in the online store, the same ID should be set up for the retail store.</span></span> 
- <span data-ttu-id="fb033-180">Retail Modern POS Windowsile või Androidile koos integreeritud riistvarajaamaga või</span><span class="sxs-lookup"><span data-stu-id="fb033-180">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="fb033-181">Modern POS iOS-ile või Cloud POS-ile koos ühendatud jagatud riistvarajaamaga.</span><span class="sxs-lookup"><span data-stu-id="fb033-181">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

### <a name="basic-principle-supporting-omni-channel-payments"></a><span data-ttu-id="fb033-182">Omnikanali maksete toetamise üldpõhimõtted</span><span class="sxs-lookup"><span data-stu-id="fb033-182">Basic principle supporting omni-channel payments</span></span>

<span data-ttu-id="fb033-183">Maksekonnektorid ja makseprotsessid kasutavad lubasid ehk viiteid kaardimaksetega seotud interaktsioonidele viitamiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-183">Payment connectors and payment processors use tokens, or references, to reference interactions that are related to card payments.</span></span> <span data-ttu-id="fb033-184">Näiteks kui vajalik on makse autoriseerimine, esitatakse sellele autoriseerimisele viide.</span><span class="sxs-lookup"><span data-stu-id="fb033-184">For example, when a payment authorization is requested, a reference to that authorization is provided.</span></span> <span data-ttu-id="fb033-185">Seetõttu saab autoriseerimist hiljem viidata, kui maksevahendid täitmise ajal hõivatakse.</span><span class="sxs-lookup"><span data-stu-id="fb033-185">Therefore, the authorization can be referenced later, when funds are captured at the time of fulfillment.</span></span> <span data-ttu-id="fb033-186">See autoriseerimine on unikaalne kaupmehele, maksekonnektorile ja töötlejale.</span><span class="sxs-lookup"><span data-stu-id="fb033-186">This authorization is unique to the merchant, payment connector, and processor.</span></span> 

<span data-ttu-id="fb033-187">Kui veebis loodud tellimusele minnakse kauplusesse järele, tuleb selle tellimuse samad makse üksikasjad tagasi kutsuda ja neid kasutada.</span><span class="sxs-lookup"><span data-stu-id="fb033-187">If an order that was created online is being picked up in the store, the same payment details for that order must be recalled and used.</span></span> <span data-ttu-id="fb033-188">Kui algsed üksikasjad esitatakse osana nõudest hõivata makse algse autoriseerimise suhtes, suudab maksetöötleja taotlusega tegeleda ja makse hõivata.</span><span class="sxs-lookup"><span data-stu-id="fb033-188">When the original details are provided as part of the request to capture a payment against the original authorization, the payment processor will be able to handle the request and capture the payment.</span></span> 

<span data-ttu-id="fb033-189">Veebitellimuse õigesti viitamiseks peab saadaval olema ka maksekonnektor Kaarti pole, mis toetab sama töötlejat.</span><span class="sxs-lookup"><span data-stu-id="fb033-189">To correctly reference the online order, a "card not present" payment connector that supports the same processor must also be available.</span></span> <span data-ttu-id="fb033-190">Nii saab kassasüsteemil olla üks töötleja olemasoleva kaardiga maksete jaoks, aga sellel võib olla ka juurdepääs teistele maksekonnektoritele, nii et see saab täita tellimusi, mis luuakse muudes kanalites, kasutades teistsugust maksetöötlejat.</span><span class="sxs-lookup"><span data-stu-id="fb033-190">In this way, the POS system can have one processor for "card present" payments, but it can also have access to other payment connectors so that it can fulfill orders that are created in other channels by using different payment processors.</span></span> 

## <a name="supported-scenarios"></a><span data-ttu-id="fb033-191">Toetatud stsenaariumid</span><span class="sxs-lookup"><span data-stu-id="fb033-191">Supported scenarios</span></span>

<span data-ttu-id="fb033-192">Toetatakse järgmisi omnikanali makse stsenaariume.</span><span class="sxs-lookup"><span data-stu-id="fb033-192">The following omni-channel payment scenarios are supported:</span></span>

- <span data-ttu-id="fb033-193">Ostmine veebist, kättesaamine kauplusest</span><span class="sxs-lookup"><span data-stu-id="fb033-193">Buy online, pick up in store</span></span>
- <span data-ttu-id="fb033-194">Ostmine kõnekeskusest, kättesaamine kauplusest</span><span class="sxs-lookup"><span data-stu-id="fb033-194">Buy in call center, pick up in store</span></span>
- <span data-ttu-id="fb033-195">Ostmine kauplusest A, kättesaamine kauplusest B</span><span class="sxs-lookup"><span data-stu-id="fb033-195">Buy in store A, pick up in store B</span></span>
- <span data-ttu-id="fb033-196">Ostmine kauplusest A, tarnimine kliendile</span><span class="sxs-lookup"><span data-stu-id="fb033-196">Buy in store A, ship to customer</span></span>

    > [!NOTE]
    > <span data-ttu-id="fb033-197">Kõnekeskuses tehtud maksed, mis on vastendatud maksefunktsiooniga „Tavaline”, peavad olema märgitud kui **Ettemaks** = **Jah**, et kassas tellimuse tühistamisel kajastataks neid maksmisele kuuluvas summas.</span><span class="sxs-lookup"><span data-stu-id="fb033-197">Payments made in the call center that map to the "Normal" payment function must be marked as **Prepay** = **Yes** to be reflected in the amount due when recalling the order in the POS.</span></span> <span data-ttu-id="fb033-198">Ettemaksuta makseid, mille tüüp on „Tavaline”, ei tunta ära, kui tellimus kassas tühistatakse.</span><span class="sxs-lookup"><span data-stu-id="fb033-198">Non-prepay payments of type "Normal" are not recognized when the order is recalled in POS.</span></span> 

<span data-ttu-id="fb033-199">Toetatakse ka nende stsenaariumide variatsioone.</span><span class="sxs-lookup"><span data-stu-id="fb033-199">Variations of these scenarios are also supported.</span></span> <span data-ttu-id="fb033-200">Näiteks veebitellimus võib sisaldada nii ridu, mis tarnitakse kliendile, kui ka ridu, mis saadakse kätte kauplusest.</span><span class="sxs-lookup"><span data-stu-id="fb033-200">For example, an online order might include both lines that will be shipped to the customer and lines that will be picked up in a store.</span></span> <span data-ttu-id="fb033-201">Tellimuse täitmise suvandeid toetatakse omnikanali maksete kaudu.</span><span class="sxs-lookup"><span data-stu-id="fb033-201">All order fulfillment options are supported via omni-channel payments.</span></span> 

<span data-ttu-id="fb033-202">Järgmistes jaotises kirjeldatakse iga stsenaariumi toiminguid ja näidatakse, kuidas käivitada stsenaariumit demoandmeid kasutades.</span><span class="sxs-lookup"><span data-stu-id="fb033-202">The following sections describe the steps for each scenario and show how to run the scenario by using demo data.</span></span> 

### <a name="buy-online-pick-up-in-store"></a><span data-ttu-id="fb033-203">Ostmine veebist, kättesaamine kauplusest</span><span class="sxs-lookup"><span data-stu-id="fb033-203">Buy online, pick up in store</span></span>

<span data-ttu-id="fb033-204">Enne alustamist veenduge, et järgmised tingimused oleks täidetud.</span><span class="sxs-lookup"><span data-stu-id="fb033-204">Before you start, make sure that the following prerequisites are in place:</span></span>

- <span data-ttu-id="fb033-205">Olemas on viite fassaad, kus on konfigureeritud Adyeni konnektor.</span><span class="sxs-lookup"><span data-stu-id="fb033-205">You have a reference storefront where the Adyen connector is configured.</span></span>
- <span data-ttu-id="fb033-206">Suvand **Omnikanali maksed** lehel **Commerce’i ühiskasutuses parameetrid** on seatud väärtusele **Tõene**.</span><span class="sxs-lookup"><span data-stu-id="fb033-206">The **Omni-channel payments** option on the **Commerce shared parameters** page is set to **True**.</span></span> <span data-ttu-id="fb033-207">Hilisemates versioonides teisaldatakse see säte tööruumi **Funktsioonihaldus**, kus saate valida funktsiooni **Omnikanali maksed** ja klõpsata **Luba kohe**.</span><span class="sxs-lookup"><span data-stu-id="fb033-207">In later versions this settng is moved to the **Feature Management** workspace where you can select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="fb033-208">Adyeni maksekonnektor on konfigureeritud Houstoni kassaregistrile.</span><span class="sxs-lookup"><span data-stu-id="fb033-208">The Adyen payment connector is configured for the Houston POS register.</span></span>
- <span data-ttu-id="fb033-209">Retail Modern POS Windowsile või Androidile koos integreeritud riistvarajaamaga või</span><span class="sxs-lookup"><span data-stu-id="fb033-209">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="fb033-210">Modern POS iOS-ile või Cloud POS-ile koos ühendatud jagatud riistvarajaamaga.</span><span class="sxs-lookup"><span data-stu-id="fb033-210">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

<span data-ttu-id="fb033-211">Stsenaariumi käivitamiseks järgige neid toiminguid.</span><span class="sxs-lookup"><span data-stu-id="fb033-211">Follow these steps to run the scenario.</span></span>

1. <span data-ttu-id="fb033-212">Looge viite fassaadis kaupluses järeletulemisega tellimus.</span><span class="sxs-lookup"><span data-stu-id="fb033-212">In the reference storefront, create an order for in-store pickup.</span></span> <span data-ttu-id="fb033-213">Valige kindlasti kauplus **Houston**.</span><span class="sxs-lookup"><span data-stu-id="fb033-213">Be sure to select the **Houston** store.</span></span> 
2. <span data-ttu-id="fb033-214">Läbige väljaregistreerimise toimingud ja makske, kasutades krediitkaardi kontrollnumbrit.</span><span class="sxs-lookup"><span data-stu-id="fb033-214">Go through the checkout steps, and pay by using a test credit card number.</span></span> <span data-ttu-id="fb033-215">Krediitkaardi kontrollnumbreid saate otsida lehelt [Adyeni kaardi kontrollnumbri leht](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span><span class="sxs-lookup"><span data-stu-id="fb033-215">You can find test credit card numbers on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span></span>
3. <span data-ttu-id="fb033-216">Kasutage Cammerce’is pakett-tööd **Tellimuste sünkroonimine** ja jaotusgraafikut **P-001**, et luua tellimused kontoris.</span><span class="sxs-lookup"><span data-stu-id="fb033-216">In Commerce, use the **Synchronize orders** batch job and the **P-001** distribution schedule to create the orders in the back office.</span></span>
4. <span data-ttu-id="fb033-217">Valige kassas tervituslehel toiming **Kättesaadavad tellimused**, et näha poes kättesaadavaid tellimusi.</span><span class="sxs-lookup"><span data-stu-id="fb033-217">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
5. <span data-ttu-id="fb033-218">Valige viite fassaadis loodud tellimusest üks või mitu rida ja valige suvand **Kättesaamine**.</span><span class="sxs-lookup"><span data-stu-id="fb033-218">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="fb033-219">Tellimus võetakse kontorist.</span><span class="sxs-lookup"><span data-stu-id="fb033-219">The order is retrieved from the back office.</span></span> 

6. <span data-ttu-id="fb033-220">Kui tellimuse rea üksikasjad võetakse kontorist ja tuvastatakse kaardimakse, mida saab kasutada omnikanali jaoks, teavitatakse teid, et saadaval on maksemeetod.</span><span class="sxs-lookup"><span data-stu-id="fb033-220">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
7. <span data-ttu-id="fb033-221">Valige suvand **Saadaoleva makseviisi kasutamine**, et kanne lõpetada, kasutades viite fassaadi sisestatud kaardi üksikasju.</span><span class="sxs-lookup"><span data-stu-id="fb033-221">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="fb033-222">Tellimuse read laaditakse kande lehele ja deebetsaldo on 0 (null).</span><span class="sxs-lookup"><span data-stu-id="fb033-222">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span> 

8. <span data-ttu-id="fb033-223">Valige vahekaart **Maksed**, et näha võrgutellimusest võetud maksevahendi rida.</span><span class="sxs-lookup"><span data-stu-id="fb033-223">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
9. <span data-ttu-id="fb033-224">Valige maksemeetod kande lõpetamiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-224">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-call-center-pick-up-in-store"></a><span data-ttu-id="fb033-225">Ostmine kõnekeskusest, kättesaamine kauplusest</span><span class="sxs-lookup"><span data-stu-id="fb033-225">Buy in call center, pick up in store</span></span>

1. <span data-ttu-id="fb033-226">Sisestage Commerce’is lehel **Klienditeenindus** otsinguribale tekst **Karen Berg** ja seejärel valige suvand **Otsi**.</span><span class="sxs-lookup"><span data-stu-id="fb033-226">In Commerce, on the **Customer service** page, enter **Karen Berg** in the search bar, and then select **Search**.</span></span> 
3. <span data-ttu-id="fb033-227">Valige otsingutulemustest **Karen Berg**.</span><span class="sxs-lookup"><span data-stu-id="fb033-227">Select **Karen Berg** in the search results.</span></span>
4. <span data-ttu-id="fb033-228">Kui Karen on laaditud lehele **Klienditeenindus**, valige suvand **Uued müügitellimused**.</span><span class="sxs-lookup"><span data-stu-id="fb033-228">After Karen is loaded onto the **Customer service** page, select **New sales order**.</span></span>
5. <span data-ttu-id="fb033-229">Valige uue müügitellimuse lehel **Päis**, et vaadata tellimuse päist.</span><span class="sxs-lookup"><span data-stu-id="fb033-229">On the new sales order page, select **Header** to view the order header.</span></span> 
6. <span data-ttu-id="fb033-230">Lehel **Tellimuse päis** määrake sait valikule **Keskne** ja ladu valikule **Houston**.</span><span class="sxs-lookup"><span data-stu-id="fb033-230">On the **Order header** page, set the site to **Central** and the warehouse to **Houston**.</span></span>
7. <span data-ttu-id="fb033-231">Vahekaardil **Tarne** määrake väli **Tarneviis** kliendi kättesaamise korral valikule **60**.</span><span class="sxs-lookup"><span data-stu-id="fb033-231">On the **Deliver** tab, set the **Mode of delivery** field to **60** for customer pickup.</span></span>
8. <span data-ttu-id="fb033-232">Valige **Read** ja seejärel lisage tellimusele üks või mitu rida.</span><span class="sxs-lookup"><span data-stu-id="fb033-232">Select **Lines**, and then add one or more lines to the order.</span></span> 
9. <span data-ttu-id="fb033-233">Valige käsk **Lõpeta**, et sisestada tellimus lõpetamise voogu.</span><span class="sxs-lookup"><span data-stu-id="fb033-233">Select **Complete** to enter the order completion flow.</span></span>
10. <span data-ttu-id="fb033-234">Kerige alla maksete jaotisesse, valige käsk **Lisa** ja seejärel valige rida, kus maksemeetodi tüüp on seatud valikule **Kaardid**.</span><span class="sxs-lookup"><span data-stu-id="fb033-234">Scroll down to the payments section, select **Add**, and then select a line where the payment method type is set to **Cards**.</span></span> 
11. <span data-ttu-id="fb033-235">Valige plussmärk (**+**) kaardimakse lisamiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-235">Select the plus sign (**+**) to add a card payment.</span></span> 
12. <span data-ttu-id="fb033-236">Sisestage krediitkaardi kontrollnumbri üksikasjad, mille leidsite lehelt [Adyeni kaardi kontrollnumbrite leht](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), ja valige **OK**.</span><span class="sxs-lookup"><span data-stu-id="fb033-236">Enter the details for a test credit card number that you found on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), and then select **OK**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="fb033-237">Kui sisestatud kaardinumbri kaardi tootemark erineb tootemargist, mis valiti makse käivitamisel, läheb makse siiski läbi.</span><span class="sxs-lookup"><span data-stu-id="fb033-237">If the card brand for the card number that you entered differs from the brand that was selected when the payment was initiated, the payment will still go through.</span></span> <span data-ttu-id="fb033-238">Kuid see sisestatakse kontodele, mis on vastendatud kaardi tootemargiga, mille valisite sammus 10.</span><span class="sxs-lookup"><span data-stu-id="fb033-238">However, it will be posted to the accounts that are mapped to the card brand that you selected in step 10.</span></span>

12. <span data-ttu-id="fb033-239">Valige uuesti **OK** dialoogiboksi **Tellimuse lõpetamise maksed** sulgemiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-239">Select **OK** again to close the **Order completion payments** dialog box.</span></span>
13. <span data-ttu-id="fb033-240">Lehel **Müügitellimuse kokkuvõte** valige suvand **Esita**.</span><span class="sxs-lookup"><span data-stu-id="fb033-240">On the **Sales order summary** page, select **Submit**.</span></span>
14. <span data-ttu-id="fb033-241">Valige kassas tervituslehel toiming **Kättesaadavad tellimused**, et näha poes kättesaadavaid tellimusi.</span><span class="sxs-lookup"><span data-stu-id="fb033-241">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="fb033-242">Valige viite fassaadis loodud tellimusest üks või mitu rida ja valige suvand **Kättesaamine**.</span><span class="sxs-lookup"><span data-stu-id="fb033-242">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="fb033-243">Tellimus võetakse kontorist.</span><span class="sxs-lookup"><span data-stu-id="fb033-243">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="fb033-244">Kui tellimuse rea üksikasjad võetakse kontorist ja tuvastatakse kaardimakse, mida saab kasutada omnikanali jaoks, teavitatakse teid, et saadaval on maksemeetod.</span><span class="sxs-lookup"><span data-stu-id="fb033-244">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="fb033-245">Valige suvand **Saadaoleva makseviisi kasutamine**, et kanne lõpetada, kasutades viite fassaadi sisestatud kaardi üksikasju.</span><span class="sxs-lookup"><span data-stu-id="fb033-245">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="fb033-246">Tellimuse read laaditakse kande lehele ja deebetsaldo on 0 (null).</span><span class="sxs-lookup"><span data-stu-id="fb033-246">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="fb033-247">Valige vahekaart **Maksed**, et näha võrgutellimusest võetud maksevahendi rida.</span><span class="sxs-lookup"><span data-stu-id="fb033-247">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="fb033-248">Valige maksemeetod kande lõpetamiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-248">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-pick-up-in-store-b"></a><span data-ttu-id="fb033-249">Ostmine kauplusest A, kättesaamine kauplusest B</span><span class="sxs-lookup"><span data-stu-id="fb033-249">Buy in store A, pick up in store B</span></span>

1. <span data-ttu-id="fb033-250">Käivitage kassa Houstoni kaupluse jaoks.</span><span class="sxs-lookup"><span data-stu-id="fb033-250">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="fb033-251">Lisage lehel **Kanne** Karen Berg kandele, kasutades numbriklahvistikku numbri **2001** sisestamiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-251">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="fb033-252">Lisage kandele üks või mitu rida.</span><span class="sxs-lookup"><span data-stu-id="fb033-252">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="fb033-253">Valige **Tellimused** tellimuse suvandite nägemiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-253">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="fb033-254">Valige suvand **Võta kõik peale** ja seejärel valige suvand **Klienditellimus**, kui palutakse.</span><span class="sxs-lookup"><span data-stu-id="fb033-254">Select **Pick up all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="fb033-255">Sisestage otsinguribale **Seattle** ja seejärel valige kättesaamise kaupluseks **Seattle**.</span><span class="sxs-lookup"><span data-stu-id="fb033-255">In the search bar, enter **Seattle**, and then select the **Seattle** store for pickup.</span></span> 
7. <span data-ttu-id="fb033-256">Valige **OK** praeguse kuupäeva määramiseks kättesaamise kuupäevaks.</span><span class="sxs-lookup"><span data-stu-id="fb033-256">Select **OK** to accept the current date as the date of pickup.</span></span>
9. <span data-ttu-id="fb033-257">Makse alustamiseks valige suvand **Tasumine kaardiga**.</span><span class="sxs-lookup"><span data-stu-id="fb033-257">Select **Pay card** to initiate the payment.</span></span>
10. <span data-ttu-id="fb033-258">Määrake kaardimakse maksevahendiks deposiidiks olevale summale.</span><span class="sxs-lookup"><span data-stu-id="fb033-258">Tender the card payment for the amount that is due for the deposit.</span></span> 
11. <span data-ttu-id="fb033-259">Lõpetage deposiidi makse makseterminalis.</span><span class="sxs-lookup"><span data-stu-id="fb033-259">Complete the deposit payment on the payment terminal.</span></span> 
12. <span data-ttu-id="fb033-260">Kui deposiit on makstud, valige suvand kasutada sama kaarti täitmiseks ja oodake, kuni tellimus lõpetatakse.</span><span class="sxs-lookup"><span data-stu-id="fb033-260">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span> 
13. <span data-ttu-id="fb033-261">Käivitage kassa Seattle’i kaupluse jaoks.</span><span class="sxs-lookup"><span data-stu-id="fb033-261">Start the POS for the Seattle store.</span></span>
14. <span data-ttu-id="fb033-262">Valige kassas tervituslehel toiming **Kättesaadavad tellimused**, et näha poes kättesaadavaid tellimusi.</span><span class="sxs-lookup"><span data-stu-id="fb033-262">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="fb033-263">Valige viite fassaadis loodud tellimusest üks või mitu rida ja valige suvand **Kättesaamine**.</span><span class="sxs-lookup"><span data-stu-id="fb033-263">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="fb033-264">Tellimus võetakse kontorist.</span><span class="sxs-lookup"><span data-stu-id="fb033-264">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="fb033-265">Kui tellimuse rea üksikasjad võetakse kontorist ja tuvastatakse kaardimakse, mida saab kasutada omnikanali jaoks, teavitatakse teid, et saadaval on maksemeetod.</span><span class="sxs-lookup"><span data-stu-id="fb033-265">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="fb033-266">Valige suvand **Saadaoleva makseviisi kasutamine**, et kanne lõpetada, kasutades viite fassaadi sisestatud kaardi üksikasju.</span><span class="sxs-lookup"><span data-stu-id="fb033-266">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="fb033-267">Tellimuse read laaditakse kande lehele ja deebetsaldo on 0 (null).</span><span class="sxs-lookup"><span data-stu-id="fb033-267">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="fb033-268">Valige vahekaart **Maksed**, et näha võrgutellimusest võetud maksevahendi rida.</span><span class="sxs-lookup"><span data-stu-id="fb033-268">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="fb033-269">Valige maksemeetod kande lõpetamiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-269">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-ship-to-customer"></a><span data-ttu-id="fb033-270">Ostmine kauplusest A, tarnimine kliendile</span><span class="sxs-lookup"><span data-stu-id="fb033-270">Buy in store A, ship to customer</span></span>

1. <span data-ttu-id="fb033-271">Käivitage kassa Houstoni kaupluse jaoks.</span><span class="sxs-lookup"><span data-stu-id="fb033-271">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="fb033-272">Lisage lehel **Kanne** Karen Berg kandele, kasutades numbriklahvistikku numbri **2001** sisestamiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-272">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="fb033-273">Lisage kandele üks või mitu rida.</span><span class="sxs-lookup"><span data-stu-id="fb033-273">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="fb033-274">Valige **Tellimused** tellimuse suvandite nägemiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-274">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="fb033-275">Valige suvand **Läheta kõik** ja seejärel valige suvand **Klienditellimus**, kui seda palutakse.</span><span class="sxs-lookup"><span data-stu-id="fb033-275">Select **Ship all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="fb033-276">Valige lähetamismeetodi lehel **Standardne üleöö** ja seejärel valige **OK**, et kinnitada tänane kuupäev lähetuskuupäevana.</span><span class="sxs-lookup"><span data-stu-id="fb033-276">In the shipping method page, select **Standard overnight**, and then select **OK** to accept today's date as the shipping date.</span></span> 
7. <span data-ttu-id="fb033-277">Valige **OK** praeguse kuupäeva määramiseks kättesaamise kuupäevaks.</span><span class="sxs-lookup"><span data-stu-id="fb033-277">Select **OK** to accept the current date as the date of pickup.</span></span>
8. <span data-ttu-id="fb033-278">Makse alustamiseks valige suvand **Tasumine kaardiga**.</span><span class="sxs-lookup"><span data-stu-id="fb033-278">Select **Pay card** to initiate the payment.</span></span>
9. <span data-ttu-id="fb033-279">Määrake kaardimakse maksevahendiks deposiidiks olevale summale.</span><span class="sxs-lookup"><span data-stu-id="fb033-279">Tender the card payment for the amount that is due for the deposit.</span></span> 
10. <span data-ttu-id="fb033-280">Lõpetage deposiidi makse makseterminalis.</span><span class="sxs-lookup"><span data-stu-id="fb033-280">Complete the deposit payment on the payment terminal.</span></span> 
11. <span data-ttu-id="fb033-281">Kui deposiit on makstud, valige suvand kasutada sama kaarti täitmiseks ja oodake, kuni tellimus lõpetatakse.</span><span class="sxs-lookup"><span data-stu-id="fb033-281">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span>

<span data-ttu-id="fb033-282">Kui tellimus on kontoris komplekteeritud, pakitud ja selle kohta on arve koostatud, kasutatakse kassas olevaid makse üksikasju maksevahendite hõivamiseks kliendile tarnitavate kaupade jaoks.</span><span class="sxs-lookup"><span data-stu-id="fb033-282">When the order is picked, packed, and invoiced in the back office, the payment details that are provided at the POS will be used to capture the funds for the goods that are being shipped to the customer.</span></span> 

## <a name="scenario-details"></a><span data-ttu-id="fb033-283">Stsenaariumi üksikasjad</span><span class="sxs-lookup"><span data-stu-id="fb033-283">Scenario details</span></span>

<span data-ttu-id="fb033-284">Peale kirjeldatud põhistsenaariumide on maksete SDK-s tehtud mitu täiustust omnikanali maksete toetamiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-284">In addition to the basic scenarios that were just described, several enhancements have been made to the Payments SDK to support omni-channel payments.</span></span> 

### <a name="pos"></a><span data-ttu-id="fb033-285">Müügikoht</span><span class="sxs-lookup"><span data-stu-id="fb033-285">POS</span></span>

#### <a name="single-swipedip-for-customer-orders"></a><span data-ttu-id="fb033-286">Üks kaarditõmme/kaardisisestus klienditellimustele</span><span class="sxs-lookup"><span data-stu-id="fb033-286">Single swipe/dip for customer orders</span></span>

<span data-ttu-id="fb033-287">Enne omnikanali maksete funktsiooni juurutamist, loodi deposiite sisaldavad klienditellimused kassas ja kliendid pidid kaarti tõmbama (või sisestama) kaks korda: üks kord deposiidi maksmiseks ja üks kord kaardi loa loomiseks järgmiste tellimuste täitmiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-287">Before the omni-channel payments feature was implemented, when customer orders that included deposits were created at the POS, customers were required to swipe (or dip) their card two times: one time to pay the deposit and one time to tokenize the card for subsequent order fulfillment.</span></span> <span data-ttu-id="fb033-288">Kui omnikanali loa loomise funktsioon on sisse lülitatud, peavad kliendid kaarti tõmbama ainult ühe korra nii deposiidi maksmiseks kui ka summa autoriseerimiseks, mis tuleb tasuda hiljem täidetavate tellimuste eest.</span><span class="sxs-lookup"><span data-stu-id="fb033-288">When the omni-channel tokenization feature is turned on, customers must swipe their card only one time to both pay the deposit and authorize the amount that is due for goods that will be fulfilled later.</span></span> <span data-ttu-id="fb033-289">Täitmise ajal hõivatakse autoriseeritud maksevahendid.</span><span class="sxs-lookup"><span data-stu-id="fb033-289">At the time of fulfillment, the authorized funds are captured.</span></span> <span data-ttu-id="fb033-290">Enne omnikanali loa lubamise funktsiooni juurutamist loodi järgmise tellimuse täitmiseks korduv kaardiluba.</span><span class="sxs-lookup"><span data-stu-id="fb033-290">Before the omni-channel tokenization feature was implemented, only a recurring card token was created for subsequent order fulfillment.</span></span> <span data-ttu-id="fb033-291">Seetõttu ei autoriseeritud ootelolevate täitmiste maksevahendeid ja kuna neid maksevahendeid ei hoitud selle konkreetse ostu jaoks, oli vähem tõenäoline, et neid saab hiljem hõivata.</span><span class="sxs-lookup"><span data-stu-id="fb033-291">Therefore, the funds for the pending fulfillment weren't authorized, and because those funds weren't being held for that specific purchase, it was less likely that they could be captured later.</span></span>

> [!NOTE]
> <span data-ttu-id="fb033-292">Ühekordset kaarditõmmet ei toeta Retaili versioon 8.1.3.</span><span class="sxs-lookup"><span data-stu-id="fb033-292">Single swipe isn't supported in Retail version 8.1.3.</span></span> <span data-ttu-id="fb033-293">Klienditellimused versioonis 8.1.3 kasutavad sama voogu, mida kasutati enne omnikanali loa lubamise funktsiooni juurutamist.</span><span class="sxs-lookup"><span data-stu-id="fb033-293">Customer orders in version 8.1.3 use the same flow that was used before the omni-channel tokenization feature was implemented.</span></span> 

### <a name="cards-that-cant-issue-recurring-card-tokens"></a><span data-ttu-id="fb033-294">Kaardid, mis ei anna välja korduvaid kaardilubasid</span><span class="sxs-lookup"><span data-stu-id="fb033-294">Cards that can't issue recurring card tokens</span></span>

<span data-ttu-id="fb033-295">Mõnda kaarti ei saa kasutada omnikanali maksete jaoks, kuna need ei toeta korduvate kaardilubade väljaandmist.</span><span class="sxs-lookup"><span data-stu-id="fb033-295">Some cards can't be used for omni-channel payments, because they don't support issuing recurring card tokens.</span></span> <span data-ttu-id="fb033-296">Kui kassas luuakse tellimus ja deposiidi eest makstakse kaardiga, mis ei toeta korduvaid kaardilubasid, kasutatakse eelmist kaardi loa loomise voogu.</span><span class="sxs-lookup"><span data-stu-id="fb033-296">When an order is created at the POS, if the deposit is paid by using a card that doesn't support recurring card tokens, the previous card tokenization flow is used.</span></span> <span data-ttu-id="fb033-297">Seetõttu peab klient, kes soovib teha makse, mida kasutatakse järgmise tellimuse täitmiseks, esitama teise kaardi.</span><span class="sxs-lookup"><span data-stu-id="fb033-297">Therefore, a customer who wants to provide a payment that will be used for subsequent order fulfillment must present a second card.</span></span> <span data-ttu-id="fb033-298">Kui teine kaart ei toeta korduvaid kaardilubasid, lükatakse loa loomise toiming tagasi ja kassapidajal palutakse öelda kliendile, et kasutada tuleb teist kaarti.</span><span class="sxs-lookup"><span data-stu-id="fb033-298">If the second card doesn't support recurring card tokens, the tokenization action will be declined, and the cashier will be prompted to ask the customer to provide a different card.</span></span> 

### <a name="using-a-different-card"></a><span data-ttu-id="fb033-299">Teise kaardi kasutamine</span><span class="sxs-lookup"><span data-stu-id="fb033-299">Using a different card</span></span>

<span data-ttu-id="fb033-300">Kauplusesse tellimuse järele tulev klient saab kasutada teist kaarti.</span><span class="sxs-lookup"><span data-stu-id="fb033-300">A customer who comes to the store for order pickup has the option to use a different card.</span></span> <span data-ttu-id="fb033-301">Kui kassapidaja saab tellimuse kättesaamisel viiba **Saadaoleva makseviisi kasutamine**, saab ta kliendilt küsida, kas ta soovib kasutada sama kaarti.</span><span class="sxs-lookup"><span data-stu-id="fb033-301">When the cashier receives the **Use available payment method** prompt at the time of order pickup, he or she can ask whether the customer wants to use the same card.</span></span> <span data-ttu-id="fb033-302">Kui klient on tellimuse loomiseks kasutatud kaardi ära kaotanud ja soovib maksta tellimuse eest teise kaardiga, saab kassapidaja valida suvandi **Kasutage muud makseviisi**.</span><span class="sxs-lookup"><span data-stu-id="fb033-302">If the customer has lost the card that was used to create the order and wants to pay for the order by using a different card, the cashier can select **Use a different payment method**.</span></span> <span data-ttu-id="fb033-303">Kui klient tuleb hiljem tagasi järele sama tellimuse teistele kaupadele ja algne kaardi autoriseerimine kehtib endiselt, võib kassapidaja uuesti küsida, kas klient soovib kasutada seda kaarti.</span><span class="sxs-lookup"><span data-stu-id="fb033-303">If the customer comes back later to pick up more items for the same order, if the original card authorization is still valid, the cashier can again ask whether the customer wants to use that card.</span></span>

### <a name="invalid-authorizations"></a><span data-ttu-id="fb033-304">Kehtetud autoriseerimised</span><span class="sxs-lookup"><span data-stu-id="fb033-304">Invalid authorizations</span></span>

<span data-ttu-id="fb033-305">Kui tellimuse loomiseks kasutatud kaart ei ole enam kehtiv ja kättesaamiseks valitakse tooted, siis makse hõivamise taotlus nurjub.</span><span class="sxs-lookup"><span data-stu-id="fb033-305">If the card that was used to create an order is no longer valid, when products are selected for pickup, the payment capture request will fail.</span></span> <span data-ttu-id="fb033-306">Kassa maksekonnektor üritab seejärel luua uue autoriseerimise ja hõivamise samu kaardi üksikasju kasutades.</span><span class="sxs-lookup"><span data-stu-id="fb033-306">The POS payment connector will then try to create a new authorization and capture by using the same card details.</span></span> <span data-ttu-id="fb033-307">Kui uus autoriseerimine või hõivamine nurjub, teavitatakse kassapidajat, et makset ei saanud töödelda.</span><span class="sxs-lookup"><span data-stu-id="fb033-307">If the new authorization or capture fails, the cashier will be informed that the payment could not be processed.</span></span> <span data-ttu-id="fb033-308">Kassapidaja peab siis saama kliendilt uue makse.</span><span class="sxs-lookup"><span data-stu-id="fb033-308">The cashier must then get a new payment from the customer.</span></span> 

### <a name="multiple-available-payments"></a><span data-ttu-id="fb033-309">Mitu saadaolevat makset</span><span class="sxs-lookup"><span data-stu-id="fb033-309">Multiple available payments</span></span>

<span data-ttu-id="fb033-310">Kui järele minnakse tellimusele, millel on mitu maksevahendid ja mitu rida, esitatakse kassapidajale kõigepealt viip **Saadaoleva makseviisi kasutamine**.</span><span class="sxs-lookup"><span data-stu-id="fb033-310">When an order that has multiple tenders and multiple lines is picked up, the cashier first receives the **Use available payment method** prompt.</span></span> <span data-ttu-id="fb033-311">Kui kaarte on mitu ja kassapidaja valib suvandi **Saadaoleva makseviisi kasutamine**, hõivatakse saadaoleva kaardi read, kuni saldo vastab parasjagu kättesaadavatele kaupadele.</span><span class="sxs-lookup"><span data-stu-id="fb033-311">If there are multiple cards, when the cashier selects **Use available payment method**, existing card tender lines will be captured until the balance is met for the goods that are currently being picked up.</span></span> <span data-ttu-id="fb033-312">Kassapidajal puudub võimalus valida kaart, mida kasutada kättesaadavate kaupade eest maksmiseks.</span><span class="sxs-lookup"><span data-stu-id="fb033-312">The cashier won't have the option to select the card that should be used for the goods that are being picked up.</span></span> 

## <a name="related-topics"></a><span data-ttu-id="fb033-313">Seotud dokumendid</span><span class="sxs-lookup"><span data-stu-id="fb033-313">Related topics</span></span>

- [<span data-ttu-id="fb033-314">Maksete KKK</span><span class="sxs-lookup"><span data-stu-id="fb033-314">Payments FAQ</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/payments-retail)
- [<span data-ttu-id="fb033-315">Dynamics 365 maksekonnektor Adyeni jaoks</span><span class="sxs-lookup"><span data-stu-id="fb033-315">Dynamics 365 Payment Connector for Adyen</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3)
- [<span data-ttu-id="fb033-316">BOPIS-e konfigureerimine Dynamics 365 Commerce'i hindamiskeskkonnas</span><span class="sxs-lookup"><span data-stu-id="fb033-316">Configure BOPIS in a Dynamics 365 Commerce evaluation environment</span></span>](https://docs.microsoft.com/dynamics365/commerce/cpe-bopis)



[!INCLUDE[footer-include](../includes/footer-banner.md)]