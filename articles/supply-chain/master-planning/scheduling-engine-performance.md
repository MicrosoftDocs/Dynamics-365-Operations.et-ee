---
title: Ajastamismootori jõudluse parandamine
description: Selles teemas antakse teavet ajastamismootori ja selle jõudluse parandamise kohta.
author: ChristianRytt
manager: tfehr
ms.date: 09/03/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.custom: 19311
ms.assetid: 5ffb1486-2e08-4cdc-bd34-b47ae795ef0f
ms.search.region: Global
ms.search.industry: ''
ms.author: roxanad
ms.search.validFrom: 2020-09-03
ms.dyn365.ops.version: ''
ms.openlocfilehash: 18a9b7ed4cd26a806002fb1b4684de1e84f39889
ms.sourcegitcommit: c55fecae96b4bb27bc313ba10a97eddb9c91350a
ms.translationtype: HT
ms.contentlocale: et-EE
ms.lasthandoff: 10/12/2020
ms.locfileid: "3989267"
---
# <a name="improve-scheduling-engine-performance"></a><span data-ttu-id="3ed62-103">Ajastamismootori jõudluse parandamine</span><span class="sxs-lookup"><span data-stu-id="3ed62-103">Improve scheduling engine performance</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="3ed62-104">Ressursside ajastamise mootorit kasutatakse plaanitud ja väljastatud tootmistellimuste protsesside ajastamiseks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-104">The resource scheduling engine is used when scheduling routes for planned and released production orders.</span></span> <span data-ttu-id="3ed62-105">Mootor anti algselt välja koos rakendusega Dynamics AX 2012 ja seda on pärast väljastamist mitu korda täiustatud.</span><span class="sxs-lookup"><span data-stu-id="3ed62-105">The engine was originally released as part of Dynamics AX 2012 and has gone through several improvements since its release.</span></span>

<span data-ttu-id="3ed62-106">[Tööde ajastamise probleem](https://en.wikipedia.org/wiki/Job_shop_scheduling) on äärmiselt keerukas kombinatoorikaprobleem, mille puhul kasvab lahendamisaeg muutujate arvu suurenedes eksponentsiaalselt.</span><span class="sxs-lookup"><span data-stu-id="3ed62-106">The [job shop scheduling problem](https://en.wikipedia.org/wiki/Job_shop_scheduling) is an extremely complex combinatorial problem where solution time grows exponentially with the number of decision variables.</span></span> <span data-ttu-id="3ed62-107">Sageli seavad kliendid tootmisprotsessid ja seotud andmed üles viisil, mis põhjustab ajastamisprobleemi, mida ei saa mõistliku aja jooksul lahendada isegi kõige moodsam riistvara.</span><span class="sxs-lookup"><span data-stu-id="3ed62-107">Oftentimes, customers set up production routes and related data in a way that results in a scheduling problem that can't be solved in reasonable time even on the most modern hardware.</span></span> <span data-ttu-id="3ed62-108">See teema aitab teil mõista ajastamismootorit ja seda, kuidas konkreetne seadistus võib jõudlust mõjutada.</span><span class="sxs-lookup"><span data-stu-id="3ed62-108">This topic will help you understand the scheduling engine and how a specific setup can have influence on the performance.</span></span>

<span data-ttu-id="3ed62-109">Ajastamise jõudluse parandamise puhul soovitatakse üldiselt vähendada mootori lahendatava probleemi keerukust.</span><span class="sxs-lookup"><span data-stu-id="3ed62-109">When it comes to improving the performance of the scheduling, general guidelines recommend reducing the complexity of the problem the engine needs to solve.</span></span> <span data-ttu-id="3ed62-110">Jõudlust võivad mõjutada muu hulgas peamiselt järgmised tegurid.</span><span class="sxs-lookup"><span data-stu-id="3ed62-110">Some of the main factors that can affect performance include:</span></span>

- <span data-ttu-id="3ed62-111">Paljude toimingutega protsessid</span><span class="sxs-lookup"><span data-stu-id="3ed62-111">Routes with many operations</span></span>
- <span data-ttu-id="3ed62-112">Paralleelsete toimingutega protsessid</span><span class="sxs-lookup"><span data-stu-id="3ed62-112">Routes with parallel operations</span></span>
- <span data-ttu-id="3ed62-113">Toimingud, millel on rohkem kui üks ressurss</span><span class="sxs-lookup"><span data-stu-id="3ed62-113">Operations with quantity of resources higher than one</span></span>
- <span data-ttu-id="3ed62-114">Paljude rakendatavate ressurssidega toimingud</span><span class="sxs-lookup"><span data-stu-id="3ed62-114">Operations with many applicable resources</span></span>
- <span data-ttu-id="3ed62-115">Püsiseoste kasutamine</span><span class="sxs-lookup"><span data-stu-id="3ed62-115">Use of hard links</span></span>
- <span data-ttu-id="3ed62-116">Piiratud võimsuse kasutamine</span><span class="sxs-lookup"><span data-stu-id="3ed62-116">Use of finite capacity</span></span>
- <span data-ttu-id="3ed62-117">Kasutatavate kalendrite arv</span><span class="sxs-lookup"><span data-stu-id="3ed62-117">The number of different calendars used</span></span>
- <span data-ttu-id="3ed62-118">Tööajavahemike arv ühe kalendripäeva kohta</span><span class="sxs-lookup"><span data-stu-id="3ed62-118">The number of working time slots per day in the calendar</span></span>
- <span data-ttu-id="3ed62-119">Protsessi kogukestus</span><span class="sxs-lookup"><span data-stu-id="3ed62-119">Total duration of the route</span></span>
- <span data-ttu-id="3ed62-120">Mitme ajastamismootori käitamine paralleelselt</span><span class="sxs-lookup"><span data-stu-id="3ed62-120">Running multiple scheduling engines in parallel</span></span>

## <a name="overview-of-basic-scheduling-flow"></a><span data-ttu-id="3ed62-121">Põhilise ajastamisvoo ülevaade</span><span class="sxs-lookup"><span data-stu-id="3ed62-121">Overview of basic scheduling flow</span></span>

<span data-ttu-id="3ed62-122">Et mõista, kuidas konkreetne seadistus võib jõudlust mõjutada, on oluline mõista seda, kuidas protsess toimib nii mootori sees kui ka keeles X++ kirjutatud koodis, mis seda ümbritseb.</span><span class="sxs-lookup"><span data-stu-id="3ed62-122">To understand how a given setup can affect performance, it is important to understand something about how the process flows, both inside the engine and in the X++ code that surrounds it.</span></span>

<span data-ttu-id="3ed62-123">Tellimuse ajastamise põhiprotsess koosneb kolmest põhietapist.</span><span class="sxs-lookup"><span data-stu-id="3ed62-123">The basic process of scheduling an order consists of three main steps:</span></span>

- <span data-ttu-id="3ed62-124">**Andmete laadimine** – siin teisendatakse keeles X++ olevad andmemudelid tööde ja piirangute vormis mootori sisemiseks andmemudeliks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-124">**Loading data** – Here, the X++ data models are transformed into the engine's internal data model in the form of jobs and constraints.</span></span>
- <span data-ttu-id="3ed62-125">**Ajastamine** – see on ajastamise peamine allikas, mis töötleb konkreetset mudelit ja piiranguid, ning loob tulemuse.</span><span class="sxs-lookup"><span data-stu-id="3ed62-125">**Scheduling** – This is the main source for scheduling that processes the given model and constraints, and generates a result.</span></span> <span data-ttu-id="3ed62-126">Selle protsessi käigus pärib mootor X++ koodist vajaduse järgi tööajateavet ja olemasolevaid võimsuse reserveeringuid.</span><span class="sxs-lookup"><span data-stu-id="3ed62-126">During this process, the engine will request working time information and existing capacity reservations from X++ as needed.</span></span>
- <span data-ttu-id="3ed62-127">**Andmete salvestamine** – keeles X++ kirjutatud kood töötleb mootori tulemust, mis on töö võimsuse reserveeringute ajavahemike vormis, et salvestada võimuse reserveeringud ning värskendada tööde/toimingu/järjekorra algus- ja lõppaegasid.</span><span class="sxs-lookup"><span data-stu-id="3ed62-127">**Save data** – The engine result in the form of job capacity reservation slots is processed by X++ code to save capacity reservations and update the start and end times of the jobs/operation/order.</span></span>

## <a name="load-data-into-the-engine"></a><span data-ttu-id="3ed62-128">Andmete laadimine mootorisse</span><span class="sxs-lookup"><span data-stu-id="3ed62-128">Load data into the engine</span></span>

<span data-ttu-id="3ed62-129">Ajastamismootoril on abstraktsem andmemudel kui rakenduse Supply Chain Management andmebaasil, kuna see loodi üldise mootorina, mis suudab töötada eri andmeallikatega.</span><span class="sxs-lookup"><span data-stu-id="3ed62-129">The scheduling engine has a more abstract data model than the Supply Chain Management database because it has been built as a generic engine that can handle different sources of data.</span></span> <span data-ttu-id="3ed62-130">Protsessi, teiseste toimingute ja käitusaja mõisted tuleb „tõlkida” üldiseks töö- ja piirangumudeliks, mida mootor kasutab.</span><span class="sxs-lookup"><span data-stu-id="3ed62-130">The concepts of route, secondary operations, and run time need to be "translated" into the generic job and constraint model that the engine exposes.</span></span> <span data-ttu-id="3ed62-131">Mudeli ehitamise loogika hõlmab üsna palju äriloogikat ja see erineb sõltuvalt lähteandmetest.</span><span class="sxs-lookup"><span data-stu-id="3ed62-131">The logic for building the model has a significant amount of business logic to it and is different depending on the source data.</span></span> <span data-ttu-id="3ed62-132">Vastutav X++ klass on `WrkCtrScheduler` ning sellel on tuletatud klassid plaanitud tootmistellimuste, väljastatud tootmistellimuste ja projektiprognooside jaoks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-132">The responsible X++ class is `WrkCtrScheduler` and it has derived classes for planned production orders, released production orders, and project forecasts.</span></span>

<span data-ttu-id="3ed62-133">Näitena kaaluge järgmises tabelis ja pildil toodud protsessi, mis näib olevat üsna lihtne.</span><span class="sxs-lookup"><span data-stu-id="3ed62-133">As an example, consider a route shown in the following table and image, which seems relatively simple.</span></span>

| <span data-ttu-id="3ed62-134">Toim.</span><span class="sxs-lookup"><span data-stu-id="3ed62-134">Oper.</span></span> <span data-ttu-id="3ed62-135">nr</span><span class="sxs-lookup"><span data-stu-id="3ed62-135">No.</span></span> | <span data-ttu-id="3ed62-136">Prioriteet</span><span class="sxs-lookup"><span data-stu-id="3ed62-136">Priority</span></span> | <span data-ttu-id="3ed62-137">Seadistusaeg</span><span class="sxs-lookup"><span data-stu-id="3ed62-137">Setup time</span></span> | <span data-ttu-id="3ed62-138">Käitusaeg</span><span class="sxs-lookup"><span data-stu-id="3ed62-138">Run time</span></span> | <span data-ttu-id="3ed62-139">Ooteaeg pärast</span><span class="sxs-lookup"><span data-stu-id="3ed62-139">Queue time after</span></span> | <span data-ttu-id="3ed62-140">Ressursside kogus</span><span class="sxs-lookup"><span data-stu-id="3ed62-140">Quantity of resources</span></span> | <span data-ttu-id="3ed62-141">Järgmine</span><span class="sxs-lookup"><span data-stu-id="3ed62-141">Next</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="3ed62-142">10</span><span class="sxs-lookup"><span data-stu-id="3ed62-142">10</span></span> | <span data-ttu-id="3ed62-143">Esmane</span><span class="sxs-lookup"><span data-stu-id="3ed62-143">Primary</span></span> | <span data-ttu-id="3ed62-144">1.00</span><span class="sxs-lookup"><span data-stu-id="3ed62-144">1.00</span></span> | <span data-ttu-id="3ed62-145">2.00</span><span class="sxs-lookup"><span data-stu-id="3ed62-145">2.00</span></span> | | <span data-ttu-id="3ed62-146">1</span><span class="sxs-lookup"><span data-stu-id="3ed62-146">1</span></span> | <span data-ttu-id="3ed62-147">20</span><span class="sxs-lookup"><span data-stu-id="3ed62-147">20</span></span> |
| <span data-ttu-id="3ed62-148">10</span><span class="sxs-lookup"><span data-stu-id="3ed62-148">10</span></span> | <span data-ttu-id="3ed62-149">Teisene&nbsp;1</span><span class="sxs-lookup"><span data-stu-id="3ed62-149">Secondary&nbsp;1</span></span> | | | | <span data-ttu-id="3ed62-150">1</span><span class="sxs-lookup"><span data-stu-id="3ed62-150">1</span></span> | <span data-ttu-id="3ed62-151">20</span><span class="sxs-lookup"><span data-stu-id="3ed62-151">20</span></span> |
| <span data-ttu-id="3ed62-152">20</span><span class="sxs-lookup"><span data-stu-id="3ed62-152">20</span></span> | <span data-ttu-id="3ed62-153">Esmane</span><span class="sxs-lookup"><span data-stu-id="3ed62-153">Primary</span></span> | | <span data-ttu-id="3ed62-154">3.00</span><span class="sxs-lookup"><span data-stu-id="3ed62-154">3.00</span></span> | <span data-ttu-id="3ed62-155">1.00</span><span class="sxs-lookup"><span data-stu-id="3ed62-155">1.00</span></span> | <span data-ttu-id="3ed62-156">3</span><span class="sxs-lookup"><span data-stu-id="3ed62-156">3</span></span> | <span data-ttu-id="3ed62-157">0</span><span class="sxs-lookup"><span data-stu-id="3ed62-157">0</span></span> |

<span data-ttu-id="3ed62-158">![Protsessidiagrammi näidis](media/scheduling-engine-route.png "Protsessidiagrammi näidis")</span><span class="sxs-lookup"><span data-stu-id="3ed62-158">![Example rout diagram](media/scheduling-engine-route.png "Example rout diagram")</span></span>

<span data-ttu-id="3ed62-159">Kui see saadetakse mootorisse, jagatakse see kaheksaks tööks, nagu on näidatud järgmisel illustratsioonil (klõpsake pildile, et seda suuremana näha).</span><span class="sxs-lookup"><span data-stu-id="3ed62-159">When sending this to the engine, it is split out into eight jobs, as shown in the following illustration (select the image to enlarge it).</span></span>

<span data-ttu-id="3ed62-160">[![Ajastamismootori tööd](media/scheduling-engine-jobs.png "Ajastamismootori tööd")](media/scheduling-engine-jobs-large.png)</span><span class="sxs-lookup"><span data-stu-id="3ed62-160">[![Scheduling engine jobs](media/scheduling-engine-jobs.png "Scheduling engine jobs")](media/scheduling-engine-jobs-large.png)</span></span>

<span data-ttu-id="3ed62-161">Standardne seos nende kahe töö vahel on `FinishStart`, mis tähendab, et ühe töö lõppaeg peab olema enne teise töö algusaega.</span><span class="sxs-lookup"><span data-stu-id="3ed62-161">The standard link between two jobs is `FinishStart`, meaning that the end time of one job must be before the start time of another job.</span></span> <span data-ttu-id="3ed62-162">Kuna seadistuse peab tegema sama ressurss, mis hiljem protsessis osaleb, on nende vahel `OnSameResource`'i piirangud.</span><span class="sxs-lookup"><span data-stu-id="3ed62-162">Because the setup must be performed by the same resource that will later do the process, there are `OnSameResource` constraints between them.</span></span> <span data-ttu-id="3ed62-163">Number 10 esmase ja teisese toimingu tööde vahel on seosed `StartStart` ning `FinishFinish`, mis tähendab, et tööd peavad algama ja lõppema samal ajal, ning `NotOnSameResource`'i piirangud, mis takistavad sama ressursi kasutamist esmases ja teises toimingus.</span><span class="sxs-lookup"><span data-stu-id="3ed62-163">Between the jobs for primary and secondary operation for 10, there are `StartStart` and `FinishFinish` links, which means that the jobs must both start and end at the same time, and there are `NotOnSameResource` constraints, which will prevent the same resource for primary and secondary.</span></span>

<span data-ttu-id="3ed62-164">Toimingu 20 puhul, kus ressursside kogus on 3, on protsessi töö jaotatud kolmeks eri tööks, mis kõik peavad juhtuma täpselt samal ajal.</span><span class="sxs-lookup"><span data-stu-id="3ed62-164">For operation 20, where the quantity of resources has been set to 3, the process job has been split into three distinct jobs where all the jobs must run at the exact same time.</span></span>
<span data-ttu-id="3ed62-165">Selle jaoks on seadistatud protsessirühm, mis takistab võimsuse reserveerimist pärastiste ooteaegade jaoks, mistõttu on pärastises ooteajas ainult üks töö.</span><span class="sxs-lookup"><span data-stu-id="3ed62-165">In this case, the route group has been set up to not reserve capacity for queue after times, which is why there is only a single job for the queue after.</span></span>

<span data-ttu-id="3ed62-166">Ajastamismootor mõistab ainult tööde mõistet ning sellel pole toimingutest aimugi.</span><span class="sxs-lookup"><span data-stu-id="3ed62-166">The scheduling engine only understands the concepts of jobs and has no notion of operations.</span></span> <span data-ttu-id="3ed62-167">See tähendab, et toimingute ajastamisel jaotatakse toimingud samuti töödeks, kuigi neid ei hoita andmebaasis.</span><span class="sxs-lookup"><span data-stu-id="3ed62-167">This means that when doing operation scheduling, the operations are also split into jobs, although these will not be persisted in the database.</span></span>

<span data-ttu-id="3ed62-168">Iga töö jaoks määratleme ka töö võimsuse nõude (vajalike sekundite arv).</span><span class="sxs-lookup"><span data-stu-id="3ed62-168">For each job, we will also define what the job capacity requirement is (the number of seconds required).</span></span> <span data-ttu-id="3ed62-169">Sõltuvalt sellest, kuidas ressursinõuded on määratletud, võime iga töö jaoks saata ka kõigi võimalike rakendatavate ressursside loendi, mida töö võib kasutada, ning teabe selle kohta, milline on selle konkreetse ressursi võimsuse nõue.</span><span class="sxs-lookup"><span data-stu-id="3ed62-169">Depending on how the resource requirements have been defined, we may also, for each job, send a list of all the potential applicable resources that the job could run on and what the capacity requirement is for that specific resource.</span></span> <span data-ttu-id="3ed62-170">Kuigi rakendatavate ressursside loend saadetakse mudeli ehitamisel, peab mootor ikkagi kindlaks tegema, et ressursi määramine kehtib tegelikult kogu töö jooksul.</span><span class="sxs-lookup"><span data-stu-id="3ed62-170">Even though the list of applicable resources is sent when building the model, the engine will still need to ensure that the resource assignment is actually valid for the entire job duration.</span></span>

## <a name="scheduling-engine-internals"></a><span data-ttu-id="3ed62-171">Ajastamismootori sisemised andmed</span><span class="sxs-lookup"><span data-stu-id="3ed62-171">Scheduling engine internals</span></span>

### <a name="scheduling-engine-interface"></a><span data-ttu-id="3ed62-172">Ajastamismootori liides</span><span class="sxs-lookup"><span data-stu-id="3ed62-172">Scheduling engine interface</span></span>

<span data-ttu-id="3ed62-173">Et saada aimu, kuidas mootor sisemiselt töötab, on kõige parem vaadata funktsioone, mida see väliselt kasutab.</span><span class="sxs-lookup"><span data-stu-id="3ed62-173">To get an idea of how the engine works internally, it is best to look at the functionality it exposes externally.</span></span> <span data-ttu-id="3ed62-174">Keeles X++ on peamine liides `WrkCtrSchedulerEngineInterface`.</span><span class="sxs-lookup"><span data-stu-id="3ed62-174">In X++, the main interface is `WrkCtrSchedulerEngineInterface`.</span></span> <span data-ttu-id="3ed62-175">Sellel on järgmistes alajaotistes kirjeldatud meetodid.</span><span class="sxs-lookup"><span data-stu-id="3ed62-175">It has the methods described in the following subsections.</span></span>

#### <a name="general-engine"></a><span data-ttu-id="3ed62-176">Üldine mootor</span><span class="sxs-lookup"><span data-stu-id="3ed62-176">General engine</span></span>

| <span data-ttu-id="3ed62-177">**Meetod**</span><span class="sxs-lookup"><span data-stu-id="3ed62-177">**Method**</span></span> | <span data-ttu-id="3ed62-178">**Eesmärk**</span><span class="sxs-lookup"><span data-stu-id="3ed62-178">**Purpose**</span></span> |
| --- | --- |
| `run` | <span data-ttu-id="3ed62-179">Ajastab kõik laaditud tööd ja tagastab tõrkekoodi.</span><span class="sxs-lookup"><span data-stu-id="3ed62-179">Schedules all loaded jobs and returns the error code.</span></span> |
| `getJobSchedulingSequenceResult` | <span data-ttu-id="3ed62-180">Saab ajastamistulemuse ja esimese tõrketöö kindla töö poolt tuvastatud järjestuse jaoks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-180">Gets the scheduling result and the first error job for the sequence identified by a specific job.</span></span> |
| `validateJobCapacityReservations` | <span data-ttu-id="3ed62-181">Kontrollib kõigi mootori salvestatud tööde võimsuse reserveeringud.</span><span class="sxs-lookup"><span data-stu-id="3ed62-181">Validates the capacity reservations for all the jobs stored by the engine.</span></span> |
| `setReservationsTimeStamp` | <span data-ttu-id="3ed62-182">Saadab mootorisse ajatempli, mis hõlmab kõigi mootori vahemälus olevate ajastatud tööde uusi võimsuse reserveeringuid.</span><span class="sxs-lookup"><span data-stu-id="3ed62-182">Sends a timestamp to the engine set on all new capacity reservations for the scheduled jobs in the cache of the engine.</span></span> |
| `addPropertyToGroupAggregation` | <span data-ttu-id="3ed62-183">Lisab atribuudieesliite atribuutide kogumile, mida kasutatakse võimsuse koondamisel.</span><span class="sxs-lookup"><span data-stu-id="3ed62-183">Adds a property prefix to the set of properties used when capacity is aggregated.</span></span> |
| `addResource` | <span data-ttu-id="3ed62-184">Lisab ressursi ajastamismootori ressursivarusse.</span><span class="sxs-lookup"><span data-stu-id="3ed62-184">Adds a resource to the scheduling engine resource pool.</span></span> |
| `addResourceGroup` | <span data-ttu-id="3ed62-185">Lisab ressursirüma ajastamismootori ressursirühmavarusse.</span><span class="sxs-lookup"><span data-stu-id="3ed62-185">Adds a resource group to the scheduling engine resource group pool.</span></span> |
| `addResourceGroupMembership` | <span data-ttu-id="3ed62-186">Lisab ressursi ressursirühma liikmena.</span><span class="sxs-lookup"><span data-stu-id="3ed62-186">Adds a resource as a member to a resource group.</span></span> |
| `addOptimizationGoal` | <span data-ttu-id="3ed62-187">Lisab asjastamise optimeerimise eesmärgi (kestus või prioriteet).</span><span class="sxs-lookup"><span data-stu-id="3ed62-187">Adds a scheduling optimization goal (duration or priority).</span></span> |

#### <a name="individual-jobs"></a><span data-ttu-id="3ed62-188">Üksikud tööd</span><span class="sxs-lookup"><span data-stu-id="3ed62-188">Individual jobs</span></span>

| <span data-ttu-id="3ed62-189">**Meetod**</span><span class="sxs-lookup"><span data-stu-id="3ed62-189">**Method**</span></span> | <span data-ttu-id="3ed62-190">**Eesmärk**</span><span class="sxs-lookup"><span data-stu-id="3ed62-190">**Purpose**</span></span> |
| --- | --- |
| `addJobInfo` | <span data-ttu-id="3ed62-191">Lisab tööteabe kirje, mis teavitab mootorit tööst, mis tuleb ajastada.</span><span class="sxs-lookup"><span data-stu-id="3ed62-191">Adds a job information record that informs the engine about a job that should be scheduled.</span></span> |
| `addConstraintJobEndsAt` | <span data-ttu-id="3ed62-192">Lisab piirangu, et töö peab lõppema määratud kuupäeval ja kellaajal.</span><span class="sxs-lookup"><span data-stu-id="3ed62-192">Adds a constraint that a job should end at a specified date and time.</span></span> |
| `addConstraintJobStartsAt` | <span data-ttu-id="3ed62-193">Lisab piirangu, et töö peab algama määratud kuupäeval ja kellaajal.</span><span class="sxs-lookup"><span data-stu-id="3ed62-193">Adds a constraint that a job should start at a specified date and time.</span></span> |
| `addConstraintMaxJobDays` | <span data-ttu-id="3ed62-194">Määratleb piirangu, et töö võib toimuda määratud maksimaalse päevade arvu jooksul.</span><span class="sxs-lookup"><span data-stu-id="3ed62-194">Defines the constraint that a job can span over a specified maximal number of days.</span></span> |
| `addConstraintResourceRequirement` | <span data-ttu-id="3ed62-195">Lisab piirangu, et töö peab olema ajastatud kindla ressursi alusel.</span><span class="sxs-lookup"><span data-stu-id="3ed62-195">Adds the constraint that the job must be scheduled on a specific resource.</span></span> |
| `addJobBindPriority` | <span data-ttu-id="3ed62-196">Lisab (tööde, piirangutasemete) paarile töö sidumisprioriteedi.</span><span class="sxs-lookup"><span data-stu-id="3ed62-196">Adds a job bind priority for a (job, constraint level) pair.</span></span> <span data-ttu-id="3ed62-197">Suurem prioriteediväärtus tähendab, et töö muutujad piiritletakse varem.</span><span class="sxs-lookup"><span data-stu-id="3ed62-197">A higher priority value means the job variables will be bound earlier.</span></span> <span data-ttu-id="3ed62-198">Töö töödeldakse enne töid, millel on samas järjestuses madalam prioriteediväärtus.</span><span class="sxs-lookup"><span data-stu-id="3ed62-198">The job will be processed before jobs with lower priority value in the same sequence.</span></span> |
| `addJobCapacity` | <span data-ttu-id="3ed62-199">Lisab täiskoormuse teabe tööle (nt nõutav töö käitusaeg) sõltumata sellest, millist ressurssi töö kasutab.</span><span class="sxs-lookup"><span data-stu-id="3ed62-199">Adds capacity load information for a job (like the required job runtime) independent on which resource the job runs on.</span></span> |
| `addJobResourceCapacity` | <span data-ttu-id="3ed62-200">Lisab ressursi ressursikogumile, mida saab kasutada töö tegemiseks, ning täpsustab, kui suur on vajalik võimsus selle ressursi kasutamisel.</span><span class="sxs-lookup"><span data-stu-id="3ed62-200">Adds a resource to the set of resources that may be used to perform a job, and states the capacity required when running on that resource.</span></span> |
| `addJobGoal` | <span data-ttu-id="3ed62-201">Lisab tööeesmärgi teabe kindlale piirangutasemele (varaseim lõppaeg või hiliseim algusaeg).</span><span class="sxs-lookup"><span data-stu-id="3ed62-201">Adds job goal information for a specific constraint level (earliest end time or latest start time).</span></span> |
| `addJobResourcePriority` | <span data-ttu-id="3ed62-202">Lisab prioriteedi, mida kasutada siis, kui töö on ressursi jaoks ajastatud.</span><span class="sxs-lookup"><span data-stu-id="3ed62-202">Adds the priority to use when a job is scheduled on a resource.</span></span> |
| `addJobResourceRuntime` | <span data-ttu-id="3ed62-203">Määrab tööaja, mis sõltub ressursist, mille jaoks töö ajastatakse.</span><span class="sxs-lookup"><span data-stu-id="3ed62-203">Specifies a job time that is dependent of the resource the job will be scheduled on.</span></span> |
| `addJobRuntime` | <span data-ttu-id="3ed62-204">Määrab tööaja, mis ei sõltu ressursist, mille jaoks töö ajastatakse.</span><span class="sxs-lookup"><span data-stu-id="3ed62-204">Specifies a job time that is independent of the resource on which the job will be scheduled.</span></span> |
| `scheduleJobOnResourceGroup` | <span data-ttu-id="3ed62-205">Märgib töö ressursirühma tasemel ajastamiseks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-205">Marks a job for scheduling on the resource group level.</span></span> |
| `setJobResourcePreemptionAllowed` | <span data-ttu-id="3ed62-206">Määrab, kas eelnev eraldamine on ressursi töö jaoks lubatud (kas mootoril on lubatud ajastada tööd mittekülgnevates võimsusvahemikes).</span><span class="sxs-lookup"><span data-stu-id="3ed62-206">Sets whether preemption is allowed for a job on a resource (if engine is allowed to schedule the job in noncontiguous capacity slots).</span></span> |
| `setRequiredNumberOfResources` | <span data-ttu-id="3ed62-207">Määrab töö ajastamiseks vajalike ressursside arvu (ainult toimingute planeerimiseks).</span><span class="sxs-lookup"><span data-stu-id="3ed62-207">Sets the number of resources required to schedule a job (only for operations scheduling).</span></span> |

#### <a name="constraints-between-jobs"></a><span data-ttu-id="3ed62-208">Töödevahelised piirangud</span><span class="sxs-lookup"><span data-stu-id="3ed62-208">Constraints between jobs</span></span>

| <span data-ttu-id="3ed62-209">**Meetod**</span><span class="sxs-lookup"><span data-stu-id="3ed62-209">**Method**</span></span> | <span data-ttu-id="3ed62-210">**Eesmärk**</span><span class="sxs-lookup"><span data-stu-id="3ed62-210">**Purpose**</span></span> |
| --- | --- |
| `addJobLink` | <span data-ttu-id="3ed62-211">Lisab kahe töö vahele seose (nt algus\>lõpp).</span><span class="sxs-lookup"><span data-stu-id="3ed62-211">Adds a link (such as finish\>start) between two jobs.</span></span> |
| `addConstraintEndsDelayed` | <span data-ttu-id="3ed62-212">Määratleb piirangu, et töö ei saa lõppeda enne teise töö lõppemist, millele on liidetud viivitusaeg.</span><span class="sxs-lookup"><span data-stu-id="3ed62-212">Defines the constraint that a job cannot end before another jobs end plus some delay time.</span></span> |
| `addConstraintJobListWorkingTimeIntersect` | <span data-ttu-id="3ed62-213">Lisab piirangu, et tööde jaoks reserveeritud võimsusvahemikud peavad olema tööaegadel, mis kattuvad tööde kasutatud mõlema ressursi puhul.</span><span class="sxs-lookup"><span data-stu-id="3ed62-213">Adds a constraint that the capacity slots reserved for the jobs must be on the intersecting working times for the two resources used by the jobs.</span></span> |
| `addConstraintJobOverlap` | <span data-ttu-id="3ed62-214">Lisab piirangu, mis määratleb, kuidas töid järjestatakse, kui kindlat kaubakogust saab liigutada kahe ressursi vahel ajal, mil esimese ressursi töötlemine pole veel lõppenud, nii et teise ressursi töötlemine saaks alata.</span><span class="sxs-lookup"><span data-stu-id="3ed62-214">Add a constraint that defines how jobs are sequenced when a given quantity of an item can be moved between two resources while the first resource is still not finished processing, so that the second resource can start processing.</span></span> |
| `addConstraintNotOnSameResource` | <span data-ttu-id="3ed62-215">Lisab piirangu, et kaht tööd ei tohiks sama ressursi jaoks ajastada.</span><span class="sxs-lookup"><span data-stu-id="3ed62-215">Adds a constraint that two jobs should not be scheduled on the same resource.</span></span> |
| `addConstraintOnSameResource` | <span data-ttu-id="3ed62-216">Lisab piirangu, et kaks tööd peavad kasutama sama ressurssi.</span><span class="sxs-lookup"><span data-stu-id="3ed62-216">Adds a constraint that two jobs must be using the same resource.</span></span> |
| `addJobSameReservations` | <span data-ttu-id="3ed62-217">Lisab piirangu, et tööl peab olema lõpuks võimsuse reserveeringud esmase tööga samade ajavahemike jaoks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-217">Adds a constraint that a job must end up having capacity reservations for the same time slots as the primary job.</span></span> |
| `setPrimaryParallelJob` | <span data-ttu-id="3ed62-218">Lisab teabe selle kohta, milline töö on paralleelsete tööde kogumis peamine töö.</span><span class="sxs-lookup"><span data-stu-id="3ed62-218">Adds information about what job is the primary job in a set of parallel jobs.</span></span> |

### <a name="solver"></a><span data-ttu-id="3ed62-219">Lahendaja</span><span class="sxs-lookup"><span data-stu-id="3ed62-219">Solver</span></span>

<span data-ttu-id="3ed62-220">Mootor ise on põhimõtteliselt spetsialiseerunud piirangulahendaja, millele on lisatud kohandatud heuristikad.</span><span class="sxs-lookup"><span data-stu-id="3ed62-220">The engine itself is essentially a specialized constraint solver with custom heuristics added.</span></span> <span data-ttu-id="3ed62-221">Lahendaja põhineb kahel peamisel elemendil: muutujad ja piirangud.</span><span class="sxs-lookup"><span data-stu-id="3ed62-221">The solver is based on two main elements: variables and constraints.</span></span>

#### <a name="variable"></a><span data-ttu-id="3ed62-222">Muutuja</span><span class="sxs-lookup"><span data-stu-id="3ed62-222">Variable</span></span>

<span data-ttu-id="3ed62-223">Muutuja tähistab võimalikke väärtusi.</span><span class="sxs-lookup"><span data-stu-id="3ed62-223">A variable represents a domain of possible values.</span></span> <span data-ttu-id="3ed62-224">Ajastamismootoril on kaht tüüpi muutujaid.</span><span class="sxs-lookup"><span data-stu-id="3ed62-224">Scheduling engine has two types of variables:</span></span>

- <span data-ttu-id="3ed62-225">**Muutuja DateTime** – sisaldab kõiki kuupäevasid ja kellaaegasid ning vahemikku saab piirata, liigutades muutuja alumist ja ülemist piiri üksteisele lähemale.</span><span class="sxs-lookup"><span data-stu-id="3ed62-225">**DateTime variable** - Has a domain of all dates and times, and the domain can be restricted by moving the lower and upper bound for the time of the variable closer to each other.</span></span>
- <span data-ttu-id="3ed62-226">**Ressursi muutuja** – sisaldab rakendatavaid ressursse ning vahemikku saab piirata ressursside eemaldamise kaudu loendist.</span><span class="sxs-lookup"><span data-stu-id="3ed62-226">**Resource variable** - Has a domain of applicable resources, and the domain can be restricted by eliminating resources from the list.</span></span>

#### <a name="constraint"></a><span data-ttu-id="3ed62-227">Piirang</span><span class="sxs-lookup"><span data-stu-id="3ed62-227">Constraint</span></span>

<span data-ttu-id="3ed62-228">Piirang mõjutab muutujaid, piirates nende vahemikke, kuid see sõltub ka muutujatest, mistõttu aktiveeritakse see muutujate muutumise korral.</span><span class="sxs-lookup"><span data-stu-id="3ed62-228">A constraint acts on variables by restricting their domains, but it also depends on variables so it gets activated when variables change.</span></span> <span data-ttu-id="3ed62-229">„Piirangu edasikandmise” protsess toimib nii, et piirang täidab oma põhifunktsiooni ja annab sellest põhiloogikale teada, kui kõik õnnestus.</span><span class="sxs-lookup"><span data-stu-id="3ed62-229">The process of "constraint propagation" is when a constraint performs its main function and reports back to the main logic if successful.</span></span>

<span data-ttu-id="3ed62-230">Muutuja loetakse piiritletuks, kui seda ei saa enam rohkem piirata, mis tähendab muutuja DateTime puhul, et ülemine ja alumine piir on samad, ning ressursi muutuja puhul, et sellel on ainult üks rakendatav ressurss.</span><span class="sxs-lookup"><span data-stu-id="3ed62-230">A variable is considered bound when it can't be restricted further, which for DateTime variable means that upper and lower bound is the same, and for the Resource variable that it has only a single applicable resource.</span></span> <span data-ttu-id="3ed62-231">Kui kõik muutujad on piiritletud, leitakse lahendus.</span><span class="sxs-lookup"><span data-stu-id="3ed62-231">When all variables are bound, a solution is found.</span></span>

### <a name="constraint-levels"></a><span data-ttu-id="3ed62-232">Piirangutasemed</span><span class="sxs-lookup"><span data-stu-id="3ed62-232">Constraint levels</span></span>

<span data-ttu-id="3ed62-233">Kui ajastamine viiakse läbi materjalivajaduse planeerimise (MRP) katvuse faasi osana, ajastatakse tellimused vajaduse kuupäevast tagasiulatuvalt.</span><span class="sxs-lookup"><span data-stu-id="3ed62-233">When scheduling is executed as part of the material requirements planning (MRP) coverage phase, the orders will be scheduled backward from requirement date.</span></span> <span data-ttu-id="3ed62-234">Kuid kui sellise graafiku leidmine, mis algab täna või hiljem ja lõpeb enne vajaduse kuupäeva, on võimatu, muutub ajastamise suund tänasest edasiulatuvaks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-234">However, if it is not possible to find a schedule that starts today or later and ends before the requirement date, then the scheduling direction will change to forward from today.</span></span>

<span data-ttu-id="3ed62-235">Seda põhilist ärireeglit käsitletakse tasemete piirangute organiseerimise kaudu.</span><span class="sxs-lookup"><span data-stu-id="3ed62-235">This main business rule is handled by organizing the constraints in levels.</span></span> <span data-ttu-id="3ed62-236">Kui kõrgeimal tasemel olevate piirangute kasutamisel lahendust ei leita, siis hüljatakse kõik need piirangud ja proovitakse madalamat taset.</span><span class="sxs-lookup"><span data-stu-id="3ed62-236">If no solution is found when using the constraints on the highest level, then the constraints on that level are all dropped, and the lower level is tried.</span></span> <span data-ttu-id="3ed62-237">Praktikas tähendab see seda, et tagasiulatuva ajastamise korral sisaldab mudel taset 1, mille tööeesmärkidel on hilisem algusaeg, arvestades maksimaalse lõpuaja piirangut (vajaduse kuupäev), ja taset 0, mille tööeesmärkidel on varaseim lõppaeg, arvestades minimaalse algusaja piirangut ehk tänast päeva.</span><span class="sxs-lookup"><span data-stu-id="3ed62-237">In praxis, this means that for backward scheduling the model will contain a level 1 with job goals of latest start time given a maximum end time constraint (the requirement date), and a level 0 with job goals of earliest end time and given a minimum start time constraint of today.</span></span>

### <a name="algorithm"></a><span data-ttu-id="3ed62-238">Algoritm</span><span class="sxs-lookup"><span data-stu-id="3ed62-238">Algorithm</span></span>

<span data-ttu-id="3ed62-239">Mootori algoritmi põhietapid on järgmised.</span><span class="sxs-lookup"><span data-stu-id="3ed62-239">The main steps of the engine algorithm are:</span></span>

1. <span data-ttu-id="3ed62-240">Leia järjestused (tööahelad), mida saab eraldi lahendada.</span><span class="sxs-lookup"><span data-stu-id="3ed62-240">Find sequences (job chains) which can be solved separately.</span></span>
1. <span data-ttu-id="3ed62-241">Ürita leida kõrgeima piirangutasemega järjestuse jaoks algne lahendus.</span><span class="sxs-lookup"><span data-stu-id="3ed62-241">Try to find an initial solution for the sequence for the highest constraint level.</span></span>
    1. <span data-ttu-id="3ed62-242">Sordi järjestused olevad tööd tööeesmärkide ja prioriteetide alusel, et teha kindlaks algustöö.</span><span class="sxs-lookup"><span data-stu-id="3ed62-242">Sort the jobs in the sequence based on job goal and priorities, such that a start job can be found.</span></span>
    1. <span data-ttu-id="3ed62-243">Käi tööd järgmises järjestuses läbi.</span><span class="sxs-lookup"><span data-stu-id="3ed62-243">Loop the jobs in the following sequence:</span></span>
        1. <span data-ttu-id="3ed62-244">Leia kõik piirangud, mis tuleb edasi kanda, ja käivita edasikandmine.</span><span class="sxs-lookup"><span data-stu-id="3ed62-244">Find all constraints that need to be propagated and run propagation.</span></span>
        1. <span data-ttu-id="3ed62-245">Kui kõik töö muutujad on piiritletud, on leitud selle töö lahendus.</span><span class="sxs-lookup"><span data-stu-id="3ed62-245">If all variables for the job have been bound, then a solution for that job has been found.</span></span>
        1. <span data-ttu-id="3ed62-246">Kui mõnda muutujat ei olnud võimalik piiranguid rikkumata piiritleda, siis tühista muutuja piiritlus, proovi muud saadavalolevat väärtust (ressursi muutuja puhul) ja käivita piirangute edasikandmine uuesti.</span><span class="sxs-lookup"><span data-stu-id="3ed62-246">If one of the variables could not be bound without violating the constraints, then roll back the variable binding, try a different value in the domain (for resource variable), and rerun the constraint propagation.</span></span>
1. <span data-ttu-id="3ed62-247">Kui lahendust ei leitud, eemaldatakse kõik praeguse piirangutaseme piirangud, langetatakse piirangutaset (kui leidub madalamaid tasemeid) ja lahendust üritatakse otsida uute piirangute alusel.</span><span class="sxs-lookup"><span data-stu-id="3ed62-247">If no solution was found, then all constraints on the current constraint level is removed, the constraint level lowered (if any lower levels are available) and solution search retried with the new set of constraint.</span></span>
1. <span data-ttu-id="3ed62-248">Kui leiti teostatav lahendus, alustatakse optimeerimisfaasi, mis püüab leida parema lahenduse, kuni jõutakse optimeerimise ajalõpuni või kõik ressursikombinatsioonid on läbi proovitud.</span><span class="sxs-lookup"><span data-stu-id="3ed62-248">If a feasible solution was found, then the optimization phase is started, which will try to find a better solution until the optimization timeout is reached or all resource combinations have been exhausted.</span></span>

<span data-ttu-id="3ed62-249">Piirangulahendaja ei tea ajastamisalgoritmi üksikasju.</span><span class="sxs-lookup"><span data-stu-id="3ed62-249">The constraint solver is not aware of the specifics of the scheduling algorithm.</span></span> <span data-ttu-id="3ed62-250">„Ime” sünnib mitmesuguste piirangute määratlemisel ja sobitamisel.</span><span class="sxs-lookup"><span data-stu-id="3ed62-250">It is in the definition and combination of the various constraints that the "magic" happens.</span></span>

### <a name="determining-working-times"></a><span data-ttu-id="3ed62-251">Tööaegade kindlaks määramine</span><span class="sxs-lookup"><span data-stu-id="3ed62-251">Determining working times</span></span>

<span data-ttu-id="3ed62-252">Suur osa mootori (sisemistest) piirangutest kontrollib ressursi tööaega ja võimsust.</span><span class="sxs-lookup"><span data-stu-id="3ed62-252">A large part of the (internal) constraints in the engine controls the working time and capacity of a resource.</span></span> <span data-ttu-id="3ed62-253">Sisuliselt on ülesandeks läbida ressursi tööajavahemikud kindlast kohast alates kindlas suunas ja leida piisavalt pikk intervall, millesse mahub töö vajalik võimsus (aeg).</span><span class="sxs-lookup"><span data-stu-id="3ed62-253">Essentially, the task is to traverse the working time slots for a resource from a given point in a given direction, and find a long enough interval in which the jobs required capacity (time) can fit.</span></span>

<span data-ttu-id="3ed62-254">Selleks peab mootor teadma ressursi tööaegu.</span><span class="sxs-lookup"><span data-stu-id="3ed62-254">To do this, the engine needs to know the working times of a resource.</span></span> <span data-ttu-id="3ed62-255">Vastupidiselt põhiandmemudelile laaditakse tööaegu *laisalt*, mis tähendab, et need laaditakse mootorisse vajaduse järgi.</span><span class="sxs-lookup"><span data-stu-id="3ed62-255">Opposite to the main model data, the working times are *lazy loaded*, meaning that they are loaded into the engine as needed.</span></span> <span data-ttu-id="3ed62-256">Selle meetodi põhjus on see, et sageli hõlmavad rakenduse Supply Chain Management tööajad kalendris väga pikka perioodi ja tavaliselt leidub palju kalendreid, nii et eellaadida tuleks väga palju andmeid.</span><span class="sxs-lookup"><span data-stu-id="3ed62-256">The reason for this approach is that there are often working times in Supply Chain Management for a calendar for a very long period and typically many calendars exist so the data would be quite large to pre-load.</span></span>

<span data-ttu-id="3ed62-257">Kalendriteavet pärib mootor osadena, tuginedes X++ klassi meetodile `WrkCtrSchedulingInteropDataProvider.getWorkingTimes`.</span><span class="sxs-lookup"><span data-stu-id="3ed62-257">Calendar information is requested by the engine in chunks, by invoking the X++ class method `WrkCtrSchedulingInteropDataProvider.getWorkingTimes`.</span></span> <span data-ttu-id="3ed62-258">Päring hõlmab kindlat kalendri ID-d kindlas ajavahemikus.</span><span class="sxs-lookup"><span data-stu-id="3ed62-258">The request is for a specific calendar ID in a specific time interval.</span></span> <span data-ttu-id="3ed62-259">Sõltuvalt rakenduse Supply Chain Management serveri vahemälu olekust võidakse selliste päringute puhul teha mitu andmebaasikutset, mis võtab kaua aega (võrreldes puhta arvutusajaga).</span><span class="sxs-lookup"><span data-stu-id="3ed62-259">Depending on the state of the server cache in Supply Chain Management, each of these requests could end up in several database calls, which takes a long time (relative to the pure computational time).</span></span> <span data-ttu-id="3ed62-260">Kui kalender sisaldab väga keerulisi tööaja definitsioone, millel on päeva jooksul palju tööajaintervalle, pikendab see laadimise aega.</span><span class="sxs-lookup"><span data-stu-id="3ed62-260">Also, if the calendar contains very elaborate working time definitions with many working time intervals per day, this adds to the time the loading takes.</span></span>

<span data-ttu-id="3ed62-261">Kui tööaja andmed laaditakse ajastamismootorisse, säilitatakse see kindla kalendri sisemises vahemälus, mis tähendab, et kui sama kalendrit kasutavad teised tööd või ressursid, saab järgmised otsingud teha kiiresti mälust.</span><span class="sxs-lookup"><span data-stu-id="3ed62-261">When the working time data is loaded in the scheduling engine, this is retained in its internal cache for the specific calendar, meaning that if any other jobs or resources are using the same calendar then the next lookups can be performed quickly from memory.</span></span> <span data-ttu-id="3ed62-262">Kehva jõudluse üks põhilisi põhjuseid on see, kui iga ressursi jaoks kasutatakse eraldi kalendri ID-d, sest sellisel juhul tuleb iga kalendri puhul andmeid uuesti pärida, kuigi kalendrite sisu võib olla sama.</span><span class="sxs-lookup"><span data-stu-id="3ed62-262">One common cause of bad performance is if a separate calendar ID is used for each resource, because data will then need to be requested for each calendar, even though the content of the calendars might be the same.</span></span>

### <a name="finite-capacity"></a><span data-ttu-id="3ed62-263">Piiratud võimsus</span><span class="sxs-lookup"><span data-stu-id="3ed62-263">Finite capacity</span></span>

<span data-ttu-id="3ed62-264">Kui kasutate piiratud võimsust, jaotatakse ja vähendatakse kalendri tööajavahemikud olemasolevate võimsuse reserveeringute põhjal.</span><span class="sxs-lookup"><span data-stu-id="3ed62-264">When using finite capacity, the working time slots from the calendar are split and reduced based on the existing capacity reservations.</span></span> <span data-ttu-id="3ed62-265">Need reserveeringud tuuakse samuti klassi `WrkCtrSchedulingInteropDataProvider` kaudu, nagu kalendrite puhul, kuid selle asemel kasutatakse meetodit `getCapacityReservations`.</span><span class="sxs-lookup"><span data-stu-id="3ed62-265">These reservations are also fetched through the same `WrkCtrSchedulingInteropDataProvider` class as the calendars, but instead use the method `getCapacityReservations`.</span></span> <span data-ttu-id="3ed62-266">Koondplaneerimise ajal ajastamisel arvestatakse konkreetse koondplaani reserveeringuid ning kui see on lehel **Koondplaneerimise parameetrid** lubatud, kaasatakse ka kinnitatud tootmistellimuste reserveeringud.</span><span class="sxs-lookup"><span data-stu-id="3ed62-266">When scheduling during master planning, the reservations for the specific master plan are considered and if enabled on the **Master planning parameters** page, the reservations from firmed production orders are also included.</span></span> <span data-ttu-id="3ed62-267">Samuti on tootmistellimuse ajastamisel võimalik kaasata olemasolevate plaanitud tellimuste reserveeringuid, kuigi see ei ole nii levinud kui teine valik.</span><span class="sxs-lookup"><span data-stu-id="3ed62-267">Similarly, when scheduling a production order, it is also an option to include reservations from existing planned orders, although this is not as common as the other way around.</span></span>

<span data-ttu-id="3ed62-268">Piiratud võimsuse kasutamine pikendab ajastamist mitme põhjuse tõttu..</span><span class="sxs-lookup"><span data-stu-id="3ed62-268">Using finite capacity will cause scheduling to take longer due to several reasons:</span></span>

- <span data-ttu-id="3ed62-269">Võimsusteabe toomine andmebaasist on aeglane toiming ja võimsusteabe serveripoolne vahemälu ei ole tavaliselt nii hea kui tööaegade puhul, kuna neid ei jagata ressursside vahel, nagu tavaliselt kalendreid jagatakse.</span><span class="sxs-lookup"><span data-stu-id="3ed62-269">Fetching the capacity information from database is a slow operation and the server-side caching of capacity information is typically not as good as for working times because they are not shared among resources like calendars typically are.</span></span>
- <span data-ttu-id="3ed62-270">Läbitavate tööajavahemike arv suureneb jaotamise tõttu ning pikema perioodi vahemikke tuleb tavaliselt uurida enne lahenduse leidmist.</span><span class="sxs-lookup"><span data-stu-id="3ed62-270">The number of working time slots to traverse increases due to the splits, and slots for a longer time period must typically be investigated before a solution can be found.</span></span>
- <span data-ttu-id="3ed62-271">Pärast ajastamise lõpetamist tuleb kontrollida vastuolulisi reserveeringuid (üksikasjad leiate jaotisest „Ajastamismootorite käitamine paralleelselt”).</span><span class="sxs-lookup"><span data-stu-id="3ed62-271">After the scheduling is complete, a check for conflicting reservations must be performed (see the "Running scheduling engines in parallel" section for details).</span></span>

### <a name="examining-the-resource-combinations"></a><span data-ttu-id="3ed62-272">Ressursikombinatsioonide uurimine</span><span class="sxs-lookup"><span data-stu-id="3ed62-272">Examining the resource combinations</span></span>

<span data-ttu-id="3ed62-273">Kui tööde järjestus sisaldab ainult standardseid `FinishStart` seoseid, mis tähendab, et need moodustavad lihtsa ahela, millel ei ole ühtegi haru, siis on optimaalset tulemust (ühe tellimuse põhjal, mitte kõikide) võimalik saavutada, kui leida esimesele tööle parim lahendus ja seejärel liikuda edasi, et leida parim lahendus järgmisele tööle.</span><span class="sxs-lookup"><span data-stu-id="3ed62-273">If the job sequence only contains the standard `FinishStart` links, meaning it forms a simple chain without any branches, an optimal result (seen from the single order, not across orders) can be achieved by finding the best solution for the first job and then moving on to find the best solution for the next job.</span></span> <span data-ttu-id="3ed62-274">Töö parim lahendus tähendab ressursi leidmist, mis võimaldab töö algus- ja lõppkuupäeva saada tööeesmärgile võimalikult lähedale (etteulatuva ajastamise korral tähendab see, et töö lõppkuupäev on võimalikult varajane), arvestades siiski piiranguid.</span><span class="sxs-lookup"><span data-stu-id="3ed62-274">The best solution for a job means finding the resource that can get the from and to date of the job closest to the job goal (in forward scheduling this means getting the end date of the job as early as possible) while still respecting the constraints.</span></span>

<span data-ttu-id="3ed62-275">Paralleelsete tööde korral võib lahenduse leidmine hõlmata ressursside eri kombinatsioonide uurimist.</span><span class="sxs-lookup"><span data-stu-id="3ed62-275">When there are parallel jobs, finding a solution may involve examining different combinations of resources.</span></span> <span data-ttu-id="3ed62-276">Võimalike ressursikombinatsioonide arv sõltub ühendatud paralleelsete tööde puhul rakenduvate ressursside arvust.</span><span class="sxs-lookup"><span data-stu-id="3ed62-276">The number of possible resource combinations is the product of the number of applicable resources for the connected parallel jobs.</span></span> <span data-ttu-id="3ed62-277">Võib võtta päris kaua aega, enne kui loogika taipab, et probleemile ei ole lahendust, mis mahutaks paralleelsed tööd enne tänast kuupäeva (eriti töötlemise ajastamisel vajaduse kuupäevast tagasiulatuvalt), kuna see peab kontrollima kõiki kombinatsioone, kuna võib leiduda mõni tõhusam ressurss või teine, tulemuseni viiv kalender.</span><span class="sxs-lookup"><span data-stu-id="3ed62-277">Especially when scheduling an order backwards from a requirement date, it can take quite a while for the logic to realize that there is no solution to the problem that will make the parallel jobs fit before today's date, as it will need to check all the combinations because there could be some resources that had a higher efficiency or a different calendar that might give a result.</span></span> <span data-ttu-id="3ed62-278">See tähendab, et kui ajalõpupiiri pole määratud, käitatakse seda pikka aega, enne kui suund edasiulatuvaks muudetakse.</span><span class="sxs-lookup"><span data-stu-id="3ed62-278">This means that if no timeout limit has been set it will run for a long time before changing the direction to forward.</span></span>

<span data-ttu-id="3ed62-279">See kombinatoorne loogika tähendab ka, et rakenduvate ressursside lisamine võib muuta mootori aeglasemaks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-279">This combinatorial logic also means that adding more applicable resources may make the engine run slower.</span></span> <span data-ttu-id="3ed62-280">Kui paralleelsete toimingute ja piiramatu võimsusega ajastamise korral tekivad jõudlusprobleemid, saab seda osaliselt parandada, lastes protsessikujundajal vastu võtta otsus, millist ressurssi tuleks kasutada, ja seejärel määrata ressurss otse toimingule (kuna enamikul juhtudel valib mootor alati sama ressursi, nii et lõpptulemus on sama).</span><span class="sxs-lookup"><span data-stu-id="3ed62-280">If performance problems occur when having parallel operations and scheduling with infinite capacity, it can partly be fixed by having the route designer take a decision on which resource should be used and then assign the resource directly on the operation (because the engine in most cases will always end up picking the same resource, so the end result will be the same).</span></span>

### <a name="hard-links"></a><span data-ttu-id="3ed62-281">Püsiseosed</span><span class="sxs-lookup"><span data-stu-id="3ed62-281">Hard links</span></span>

<span data-ttu-id="3ed62-282">Seosetüübi seadistamine kahe töö vahel püsivaks tagab, et ühe töö lõpu ja järgmise alguse vahel ei ole ajalist lünka.</span><span class="sxs-lookup"><span data-stu-id="3ed62-282">Setting the link type between two jobs to hard, ensures that there is no time gap between the finish of one job and the start of the next one.</span></span> <span data-ttu-id="3ed62-283">See võib olla väga kasulik sellistel juhtudel, kui metalli kuumutatakse ühes töös ja töödeldakse seejärel järgmises töös, mille korral ei tohiks metall vahepeal maha jahtuda.</span><span class="sxs-lookup"><span data-stu-id="3ed62-283">This can be very useful in scenarios like when metal is heated in one job and then processed in the next job, where it is not desirable to have the metal cool down in between.</span></span>

<span data-ttu-id="3ed62-284">Kui protsess moodustab standardsete paindlike seoste ja edasiulatuva ajastamise korral lihtsa ahela ilma harudeta, saab tulemuse saavutada siis, kui leida lahendus esimese töö jaoks, mis vastab omaenda piirangutele, ja seejärel liikuda mööda ahelat, kandes eelmise töö lõppaega edasi järgmisesse töösse.</span><span class="sxs-lookup"><span data-stu-id="3ed62-284">With standard soft links and forward scheduling, if the route forms a simple chain without any branches, a result can be achieved by finding a solution for the first job that satisfies its own constraints and then moving on through the chain propagating the end time from the previous job to the next job.</span></span> <span data-ttu-id="3ed62-285">Kui praegune töö ei leia ühtegi võimsust, viiakse selle algusaeg edasi, mis ei mõjuta eelmisi töid, mistõttu võivad tööde vahele tekkida lüngad.</span><span class="sxs-lookup"><span data-stu-id="3ed62-285">If the current job can't find any capacity, the start time for it will be moved out further, without any consequence for the previous jobs potentially creating gaps between the jobs.</span></span> <span data-ttu-id="3ed62-286">Kuid püsiseoste korral (eriti piiratud võimsuse puhul) juhtub samas olukorras see, et kui ahelas hiljem käitatava töö jaoks ei leita võimsust, „lohistatakse” kõik eelmised ajastatud tööd ükshaaval sellega kaasa ja seetõttu ajastatakse mitu korda ümber.</span><span class="sxs-lookup"><span data-stu-id="3ed62-286">However with hard links (especially in connection with finite capacity) for the same scenario, the fact that one job later in the chain cannot find capacity, will mean that all previous scheduled jobs will have to be "dragged" along one by one and thereby rescheduled a number of times.</span></span> <span data-ttu-id="3ed62-287">Püsiseosed võivad põhjustada ahelreaktsiooni, kus tööd mõjutavad üksteist ning enne tulemuse stabiliseerumist teostatavaks graafikuks tuleb itereerida mitu korda (eriti olukordades, kus mitmel ressursil on suur koormus).</span><span class="sxs-lookup"><span data-stu-id="3ed62-287">Especially in scenarios with high load for multiple resources, the hard links can cause a chain reaction where the jobs will affect each other and a number of iterations will have to be performed before the result stabilizes into a feasible schedule.</span></span>

## <a name="running-scheduling-engines-in-parallel"></a><span data-ttu-id="3ed62-288">Ajastamismootorite käitamine paralleelselt</span><span class="sxs-lookup"><span data-stu-id="3ed62-288">Running scheduling engines in parallel</span></span>

<span data-ttu-id="3ed62-289">Ajastamise korral koondplaneerimise osana, mille puhul kasutatakse abilisi, võivad kõik koondplaneerimise abilõimed samuti tootmistellimuse ajastamise ülesandeid endale võtta.</span><span class="sxs-lookup"><span data-stu-id="3ed62-289">When performing scheduling as part of a master planning run where helpers are used, each of the master planning helper threads can also pick up production order scheduling tasks.</span></span> <span data-ttu-id="3ed62-290">See tähendab, et samal ajal saab käitada mitut ajastamismootorit.</span><span class="sxs-lookup"><span data-stu-id="3ed62-290">This means that multiple scheduling engines can be running at the same time.</span></span> <span data-ttu-id="3ed62-291">Kuigi lõimtöötlusel on üldiselt suur jõudluseelis, on sel ajastamise puhul ka mõni funktsionaalne probleem.</span><span class="sxs-lookup"><span data-stu-id="3ed62-291">While multithreading in general is a highly significant performance benefit, there are also some functional downsides when it comes to scheduling.</span></span>

<span data-ttu-id="3ed62-292">MRP-s ajastatakse kõik kindla koosluse (BOM) taseme tootmistellimused vajaduse kuupäeva järgi, mis tähendab, et varasema vajaduse kuupäevaga tellimused tuleb ajastada esimesena ja seega on neil kõige suurem võimalus kasutada saadaolevaid ressursse.</span><span class="sxs-lookup"><span data-stu-id="3ed62-292">In MRP, all production orders for a given bill of materials (BOM) level are scheduled in requirement date sequence, meaning that those orders with the earliest requirement date should be scheduled first and thereby have the highest chance of getting the available resource capacity.</span></span> <span data-ttu-id="3ed62-293">Kuid olukorras, kus ajastamata tellimuste loendist teevad valikuid mitu mootorit, pole järjestus enam tagatud, kuna üks võib lõppeda kiiremini kui teine.</span><span class="sxs-lookup"><span data-stu-id="3ed62-293">However, with multiple engines picking from the list of unscheduled orders the sequence is no longer ensured, as one might complete faster than the other.</span></span>

<span data-ttu-id="3ed62-294">Kui ajastamine toimub piiratud võimsusega ja mitu mootorieksemplari üritavad ajastada tellimusi, mis kasutavad potentsiaalselt samu ressursse samas ajavahemikus, võib tekkida võidujooksu olukord.</span><span class="sxs-lookup"><span data-stu-id="3ed62-294">Also, when scheduling using finite capacity and when multiple engine instances are trying to schedule orders that are potentially using the same resources at the same time interval, a race condition can occur.</span></span> <span data-ttu-id="3ed62-295">Võidujooksu tingimuste arv salvestatakse koondplaneerimise ajaloo lehe väljale **Ajastamiskonfliktid**.</span><span class="sxs-lookup"><span data-stu-id="3ed62-295">The number of such race conditions is recorded in the **Scheduling conflicts** field on the master plans history page.</span></span> <span data-ttu-id="3ed62-296">Konflikti lahendamise loogika on järgmine.</span><span class="sxs-lookup"><span data-stu-id="3ed62-296">The conflict resolution logic is as follows:</span></span>

- <span data-ttu-id="3ed62-297">Ajasta tellimus (lukuvaba) ja hangi võimsuse reserveeringud.</span><span class="sxs-lookup"><span data-stu-id="3ed62-297">Schedule an order (lock-free) and get capacity reservations.</span></span>
- <span data-ttu-id="3ed62-298">Võta lukk.</span><span class="sxs-lookup"><span data-stu-id="3ed62-298">Take the lock.</span></span>
- <span data-ttu-id="3ed62-299">Kontrolli, kas ajavahemikus ajastatud ressursside jaoks on olemas uuemad võimsuse reserveeringud.</span><span class="sxs-lookup"><span data-stu-id="3ed62-299">Check if newer capacity reservations exist for the scheduled resources in the timespan.</span></span>
  - <span data-ttu-id="3ed62-300">Kui ei, kirjutage võimsus üles ja vabasta lukk.</span><span class="sxs-lookup"><span data-stu-id="3ed62-300">If no, write the capacity and release the lock.</span></span>
  - <span data-ttu-id="3ed62-301">Kui jah, vabasta lukk ja ajasta tellimus uuesti algusest peale.</span><span class="sxs-lookup"><span data-stu-id="3ed62-301">If yes, release the lock and reschedule the order from the beginning.</span></span>

<span data-ttu-id="3ed62-302">Nii et mitme mootorieksemplariga ajastamise korral ei ole tulemus täielikult deterministlik, kuna see sõltub iga lõime täpsest ajastusest.</span><span class="sxs-lookup"><span data-stu-id="3ed62-302">So, when scheduling with multiple engine instances, the result is not fully deterministic because it will depend on the exact timing of each of the threads.</span></span>

## <a name="operation-scheduling-performance"></a><span data-ttu-id="3ed62-303">Toimingute ajastamise jõudlus</span><span class="sxs-lookup"><span data-stu-id="3ed62-303">Operation scheduling performance</span></span>

<span data-ttu-id="3ed62-304">Kuigi toimingute ajastamist tuntakse ka kui üldise võimsuse plaanimisena, võib mootori vaatenurgast olla raskem probleemi lahendada, kui kasutatakse piiratud võimsust, kuna teostatavuse määramiseks on vaja rohkem andmeid.</span><span class="sxs-lookup"><span data-stu-id="3ed62-304">Even though operation scheduling is also known as rough-cut capacity planning, seen from an engine standpoint, it can be a harder problem to solve if finite capacity is used, as more data is needed to determine feasibility.</span></span>

<span data-ttu-id="3ed62-305">Ressursirühma võimsus sõltub sellest, millised ressursid on ressursirühma liikmed ja mitu neid on.</span><span class="sxs-lookup"><span data-stu-id="3ed62-305">The capacity of a resource group depends on which and how many resources are members of the resource group.</span></span> <span data-ttu-id="3ed62-306">Ressursirühmal pole endal üldse võimsust – alles siis, kui rühmal on ressurssidest liikmeid, on sellel võimsus.</span><span class="sxs-lookup"><span data-stu-id="3ed62-306">A resource group in itself does not have any capacity&mdash;only when resources are a member of the group will it have capacity.</span></span> <span data-ttu-id="3ed62-307">Kuna ressursirühma liikmed võivad aja jooksul varieeruda, tuleb võimsust hinnata iga päeva kohta.</span><span class="sxs-lookup"><span data-stu-id="3ed62-307">Because the resource group membership can vary over time, capacity must be evaluated per day.</span></span>

<span data-ttu-id="3ed62-308">Toimingute planeerimisel kasutatakse ressursirühma kalendrit iga toimingu algus- ja lõppaja määramiseks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-308">In operations scheduling, the resource group's calendar is used to determine the start and end times for each operation.</span></span> <span data-ttu-id="3ed62-309">See tähendab, et ressursirühma kalender seab piirangu, kui palju aega saab ühes ressursirühmas ühes päevas ühe toimingu jaoks eraldada.</span><span class="sxs-lookup"><span data-stu-id="3ed62-309">This means that the resource group's calendar places a limit on how much time can be operations scheduled for one operation on one day in one resource group.</span></span> <span data-ttu-id="3ed62-310">Vastandina kindlate ressursside kalendrile eiratakse ressursirühma puhul kalendri tõhususandmeid, kuna need näitavad ainult avamisaegu ja mitte tegelikku võimsust.</span><span class="sxs-lookup"><span data-stu-id="3ed62-310">Opposite the calendar for the specific resources, the efficiency data of the calendar is ignored for the resource group as it simply denotes opening hours and not actual capacity.</span></span>

<span data-ttu-id="3ed62-311">Näiteks kui ühel kindlal kuupäeval on ressursirühma tööaeg alates 8.00 kuni 16.00, ei saa üks toiming ressursirühma koormata rohkem kui 8 tunniks, hoolimata sellest, kui suur võimsus ressursirühmal sellel päeval on.</span><span class="sxs-lookup"><span data-stu-id="3ed62-311">For example, if the working time for a resource group on one specific date is from 8:00 to 16:00, one operation can't put more load on the resource group than what can be fit into 8 hours, no matter how much capacity that the resource group has available in total on that day.</span></span> <span data-ttu-id="3ed62-312">Saadaolev võimsus võib siiski koormust veelgi piirata.</span><span class="sxs-lookup"><span data-stu-id="3ed62-312">The available capacity can however limit the load further.</span></span>

<span data-ttu-id="3ed62-313">Kui kindlal päeval arvutatakse ressursirühma saadaolevat võimsust, võetakse arvesse sellel päeval ressursirühmas olevate ressursside tööde ajastamise koormust.</span><span class="sxs-lookup"><span data-stu-id="3ed62-313">The load from job scheduling on all the resources included in the resource group on a given day is considered when the available capacity for the resource group on the same day is calculated.</span></span> <span data-ttu-id="3ed62-314">Iga kuupäeva puhul on arvutus järgmine.</span><span class="sxs-lookup"><span data-stu-id="3ed62-314">For each date, the calculation is:</span></span>

> <span data-ttu-id="3ed62-315">Saadaolev ressursirühma võimsus =</span><span class="sxs-lookup"><span data-stu-id="3ed62-315">Available resource group capacity =</span></span>  
> <span data-ttu-id="3ed62-316">(rühma ressursside võimsus oma kalendri põhjal) –</span><span class="sxs-lookup"><span data-stu-id="3ed62-316">(capacity for resources in the group based on their calendar) -</span></span>  
> <span data-ttu-id="3ed62-317">(rühma ressurssidele rakenduv tööde ajastamise koormus) –</span><span class="sxs-lookup"><span data-stu-id="3ed62-317">(job scheduled load on the resources in the group) -</span></span>  
> <span data-ttu-id="3ed62-318">(rühma ressurssidele rakenduv toimingute ajastamise koormus) –</span><span class="sxs-lookup"><span data-stu-id="3ed62-318">(operations scheduled load on the resources in the group) -</span></span>  
> <span data-ttu-id="3ed62-319">(ressursirühmale rakenduv toimingute ajastamise koormus)</span><span class="sxs-lookup"><span data-stu-id="3ed62-319">(operations scheduled load on the resource group)</span></span>

<span data-ttu-id="3ed62-320">Protsessitoimingu vahekaardil **Ressursinõuded** saab määratleda ressursinõuded kindla ressursi valimiseks (sel juhul ajastatakse toiming selle ressursi abil) või ressursirühma, ressursi tüübi, ühe või mitme võimekuse, oskuse, kursuse või sertifikaadi jaoks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-320">On the **Resource requirements** tab on the route operation, the resource requirements can be specified using either a specific resource (in which case the operation will be scheduled using that resource), for a resource group, for a resource type, or for one or more capabilities, skill, course, or certificate.</span></span> <span data-ttu-id="3ed62-321">Kuigi kõikide suvandite kasutamine muudab protsessi kujundamise paindlikuks, raskendab see ka mootori jaoks ajastamist, kuna võimsus peab olema arvestatud „atribuudi” kohta (abstraktne nimi, mida kasutatakse mootoris võimekuste, oskuste jne puhul).</span><span class="sxs-lookup"><span data-stu-id="3ed62-321">While using all of these options gives a great flexibility on the route design, it also complicates the scheduling for the engine as the capacity must be accounted for per "property" (the abstract name used in the engine for capability, skills, and so on).</span></span>

<span data-ttu-id="3ed62-322">Ressursirühma võimekuse võimsus on kõnealuse võimekusega ressursirühma kõikide ressursside võimsuse summa.</span><span class="sxs-lookup"><span data-stu-id="3ed62-322">The resource group's capacity for a capability is the sum of the capacity for all resources in the resource group that has the capability in question.</span></span> <span data-ttu-id="3ed62-323">Kui rühmas oleval ressursil on võimekus, siis arvestatakse seda sõltumata sellest, mis tasemel võimekus on vajalik.</span><span class="sxs-lookup"><span data-stu-id="3ed62-323">If a resource in the group has a capability, it will be considered no matter what level of the capacity is required.</span></span>

<span data-ttu-id="3ed62-324">Toimingute ajastamisel vähendatakse ressursirühma kindla võimekuse saadaolevat võimsust, kui see on koormatud toiminguga, mis vajab kõnealust võimekust.</span><span class="sxs-lookup"><span data-stu-id="3ed62-324">In operations scheduling, the available capacity for a certain capability for a resource group will be reduced when it is loaded with an operation that requires the capability in question.</span></span> <span data-ttu-id="3ed62-325">Kui toiminguks on vaja rohkem kui üht võimekust, vähendatakse võimsust kõigi nõutavate võimekuste puhul.</span><span class="sxs-lookup"><span data-stu-id="3ed62-325">If the operation requires more than one capability, the capacity will be reduced for all required capabilities.</span></span>

<span data-ttu-id="3ed62-326">Iga kuupäeva puhul on nõutav arvutus järgmine.</span><span class="sxs-lookup"><span data-stu-id="3ed62-326">For each date, the required calculation is:</span></span>

> <span data-ttu-id="3ed62-327">Võimekuse saadaolev võimsus =</span><span class="sxs-lookup"><span data-stu-id="3ed62-327">The available capacity for a capability =</span></span>  
> <span data-ttu-id="3ed62-328">(võimekuse võimsus) –</span><span class="sxs-lookup"><span data-stu-id="3ed62-328">(the capacity for the capability) -</span></span>  
> <span data-ttu-id="3ed62-329">(ressursirühmas sisalduvatele, kindla võimekusega ressurssidele rakenduv tööde ajastamise koormus) –</span><span class="sxs-lookup"><span data-stu-id="3ed62-329">(job scheduled load on the resources with the specific capability, included in the resource group) -</span></span>  
> <span data-ttu-id="3ed62-330">(ressursirühmas sisalduvatele, kindla võimekusega ressurssidele rakenduv toimingute ajastamise koormus) –</span><span class="sxs-lookup"><span data-stu-id="3ed62-330">(operations scheduled load on the resources with the specific capability, included in the resource group) -</span></span>  
> <span data-ttu-id="3ed62-331">(kindlat võimekust vajavale ressursirühmale rakenduv toimingute ajastamise koormus)</span><span class="sxs-lookup"><span data-stu-id="3ed62-331">(operations scheduled load on the resource group itself that require the specific capability)</span></span>

<span data-ttu-id="3ed62-332">See tähendab, et kui kindlale ressursile rakendub koormus, arvestatakse koormust ressursirühma saadaoleva võimsuse arvutamisel võimekuse järgi, sest kindla ressursi koormus vähendab selle panust ressursirühma võimekuse võimsusesse isegi siis, kui kindla ressursi koormus on selle võimekuse jaoks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-332">This means that if there is load on a specific resource, the load is considered in the calculation of the resource group's available capacity per capability, because the load on a specific resource reduces its contribution to the resource group's capacity for a capability no matter if the load on the specific resource is for that specific capability.</span></span> <span data-ttu-id="3ed62-333">Kui koormus rakendub ressursirühma tasemel, arvestatakse seda ressursirühma saadaoleva võimsuse arvutamisel võimekuse järgi ainult siis, kui koormus on pärit toimingust, mis vajab kindlat võimekust.</span><span class="sxs-lookup"><span data-stu-id="3ed62-333">If there is load on the resource group level, it is considered in the calculation of the resource group's available capacity per capability only if the load is from an operation that requires the specific capability.</span></span>

<span data-ttu-id="3ed62-334">Ülaltoodud loogika on keeruline, kuna see on sama iga „atribuudi” tüübi puhul, nii et kasutades piiratud võimsusega toimingute ajastamist, tuleb laadida palju andmeid.</span><span class="sxs-lookup"><span data-stu-id="3ed62-334">The above logic is complicatd, as this is the same for each type of "property" so using operations scheduling with finite capacity requires a significant amount of data to be loaded.</span></span>

## <a name="viewing-scheduling-engine-input-and-output"></a><span data-ttu-id="3ed62-335">Ajastamismootori sisendi ja väljundi kuvamine</span><span class="sxs-lookup"><span data-stu-id="3ed62-335">Viewing scheduling engine input and output</span></span>

<span data-ttu-id="3ed62-336">Ajastamisprotsessi sisendi ja väljundi täpsete üksikasjade hankimiseks lubage logimine, avades **Organisatsiooni haldus \> Seadistus \> Ajastamine \> Ajastamise jälgimise kokpit**.</span><span class="sxs-lookup"><span data-stu-id="3ed62-336">To get specific details of the input and output of the scheduling process,  enable logging by going to **Organization administration \> Setup \> Scheduling \> Scheduling tracing cockpit**.</span></span>

<span data-ttu-id="3ed62-337">Sellel lehel valige toimingupaanilt esiteks suvand **Luba logimine**.</span><span class="sxs-lookup"><span data-stu-id="3ed62-337">On this page, first select **Enable logging** on the Action Pane.</span></span> <span data-ttu-id="3ed62-338">Seejärel käivitage tootmistellimuse ajastamine.</span><span class="sxs-lookup"><span data-stu-id="3ed62-338">Then run the scheduling for the production order.</span></span> <span data-ttu-id="3ed62-339">Kui see on lõppenud, naaske lehele **Ajastamise jälgimise kokpit** ja valige toimingupaanilt **Keela logimine**.</span><span class="sxs-lookup"><span data-stu-id="3ed62-339">When complete, return to the **Scheduling tracing cockpit** page and select **Disable logging** on the Action Pane.</span></span> <span data-ttu-id="3ed62-340">Värskendage lehte ning ruudustikus kuvatakse uus rida.</span><span class="sxs-lookup"><span data-stu-id="3ed62-340">Refresh the page and a new line will appear in the grid.</span></span> <span data-ttu-id="3ed62-341">Valige uus rida ja seejärel tegumipaanilt **Laadi alla**.</span><span class="sxs-lookup"><span data-stu-id="3ed62-341">Select the new line and select **Download** on the Action Pane.</span></span> <span data-ttu-id="3ed62-342">See annab teile tihendatud .zip-kausta, mis sisaldab järgmisi faile.</span><span class="sxs-lookup"><span data-stu-id="3ed62-342">This will give you a .zip compressed folder containing the following files:</span></span>

- <span data-ttu-id="3ed62-343">**Log.txt** – see on logifail, mis kirjeldab etappe, mida mootor läbib.</span><span class="sxs-lookup"><span data-stu-id="3ed62-343">**Log.txt** - This is the log file that describes the steps that the engine goes through.</span></span> <span data-ttu-id="3ed62-344">See on väga keerukas ja võib olla veidi üle mõistuse käiv, kuid kui seda kasutatakse jõudlusprobleemide lahendamise eesmärgil protsessiseadistusega mängimise osana, tuleb esimesena leida üles erinevus esimese ja viimase rea aja vahel, sest see annab teile täpse ajastaja kulutatud aja.</span><span class="sxs-lookup"><span data-stu-id="3ed62-344">It is very elaborate and can be a bit overwhelming, but when used as part of experimenting with the route setup to resolve performance problems the first thing to look for is the difference in time between the first and the last line, as this will give you the exact time the scheduler has spent.</span></span>
- <span data-ttu-id="3ed62-345">**XmlModel.xml** – see sisaldab mudelit, mis on loodud keeles X++ ja mida mootor töötades kasutab.</span><span class="sxs-lookup"><span data-stu-id="3ed62-345">**XmlModel.xml** - This contains the model that is built in X++ and that the engine operates on.</span></span> <span data-ttu-id="3ed62-346">Failis kasutatud suvand `JobId` vastab suvandile `RecId`, mis asub allikatabelis, mis sisaldab töid (`ReqRouteJob` või `ProdRouteJob`).</span><span class="sxs-lookup"><span data-stu-id="3ed62-346">The `JobId` used in the file correlates to the `RecId` from the source table containing the jobs (`ReqRouteJob` or `ProdRouteJob`).</span></span> <span data-ttu-id="3ed62-347">Tüüpiline asi, millele selles failis tähelepanu pöörata, on see, et suvandite `ConstraintJobStartsAt` ja `ConstraintJobEndsAt` kuupäevad oleksid ootuspärased, et atribuut `JobGoal` oleks õigesti seadistatud ja et töökohad oleks üksteisega seotud `JobLink` piirangute kaudu.</span><span class="sxs-lookup"><span data-stu-id="3ed62-347">The typical thing to look for in this file is that the dates given in `ConstraintJobStartsAt` and `ConstraintJobEndsAt` are as expected, that the `JobGoal` property is set correctly, and that the jobs are related to each other through the `JobLink` constraints.</span></span>
- <span data-ttu-id="3ed62-348">**XmlSlots.xml** – see sisaldab kõiki tööaegu ja võimsuse reserveeringuid, mida mootor on pärinud.</span><span class="sxs-lookup"><span data-stu-id="3ed62-348">**XmlSlots.xml** - This contains all the working times and capacity reservations that the engine has requested.</span></span> <span data-ttu-id="3ed62-349">Kalendri tööaegu ja reserveeringuid pärib mootor ainult ajaperioodide jaoks, millesse see üritab töid (ja lisapuhvrit) paigutada, nii et kui fail sisaldab aegu, mis on kauges tulevikus, võib see tähendada, et seadistus on probleemne.</span><span class="sxs-lookup"><span data-stu-id="3ed62-349">The calendar working times and reservations will only be requested by the engine for the time periods where it tries to place the jobs (and an extra buffer), so if the file contains times very far in the future, it might be an indication of a problem with the setup.</span></span> <span data-ttu-id="3ed62-350">Sõlmedes `ResourceProperty` kuvatakse iga ressursi puhul millise ressursirühma ja võimekustega on see millisel perioodil seotud.</span><span class="sxs-lookup"><span data-stu-id="3ed62-350">The `ResourceProperty` nodes will show for each resource which resource group and capabilities it is associated with for which periods.</span></span>
- <span data-ttu-id="3ed62-351">**Result.xml** – see sisaldab ajastamise käitamise tulemust.</span><span class="sxs-lookup"><span data-stu-id="3ed62-351">**Result.xml** - This contains the result of the scheduling run.</span></span>

<span data-ttu-id="3ed62-352">Pidage meeles, et jälgimise funktsioon võib jõudlust oluliselt vähendada, nii et kasutage seda ainult konkreetsete tellimuste ajastamise uurimiseks kontrollitud viisil.</span><span class="sxs-lookup"><span data-stu-id="3ed62-352">Note that the tracing functionality can add significant performance overhead, so only use it for investigating scheduling of specific orders in a controlled manner.</span></span> <span data-ttu-id="3ed62-353">Kui see on koondplaneerimise käitamise ajal sisse lülitatud, jõuab see kiiresti oma suuruse piirini ja peatub.</span><span class="sxs-lookup"><span data-stu-id="3ed62-353">If it is turned on during a master planning run it will quickly reach its size limit and stop.</span></span>

## <a name="troubleshooting-performance"></a><span data-ttu-id="3ed62-354">Tõrkeotsingu jõudlus</span><span class="sxs-lookup"><span data-stu-id="3ed62-354">Troubleshooting performance</span></span>

<span data-ttu-id="3ed62-355">Nagu eelmiste jaotiste põhjal võib aru saada, võib ajastamismootori seadistamisel ja kasutamisel tekkida vigasid, mis võivad viia jõudlusprobleemideni.</span><span class="sxs-lookup"><span data-stu-id="3ed62-355">As can be understood from all of the previous sections, there are some pitfalls when it comes to the setup and usage of the scheduling engine, which can lead to performance problems.</span></span> <span data-ttu-id="3ed62-356">Selliste probleemide tõrkeotsinguks saab kasutada järgmist kontroll-loendit.</span><span class="sxs-lookup"><span data-stu-id="3ed62-356">The following check list can be used for troubleshooting such issues.</span></span> <span data-ttu-id="3ed62-357">Oluline on kontrollida kõiki punkte, kuna kõige sagedamini põhjustab probleeme mitme teguri kombinatsioon.</span><span class="sxs-lookup"><span data-stu-id="3ed62-357">It is important to look at all the points as it is most often a combination of multiple factors that leads to problems.</span></span>

### <a name="performing-scheduling-as-part-of-mrp-when-it-is-not-needed"></a><span data-ttu-id="3ed62-358">Ajastamine MRP osana, kui seda ei ole vaja</span><span class="sxs-lookup"><span data-stu-id="3ed62-358">Performing scheduling as part of MRP when it is not needed</span></span>

<span data-ttu-id="3ed62-359">Kuigi protsesse kasutatakse tootmise juhtimise eesmärkidel, näiteks kuluarvutuse ja aruandluse jaoks, ei pruugi nende arvesse võtmine MRP ajal olla vajalik.</span><span class="sxs-lookup"><span data-stu-id="3ed62-359">Even though routes are used for the production control purposes such as costing and reporting, it might not be necessary to consider them during MRP.</span></span> <span data-ttu-id="3ed62-360">Mõnel juhul on planeerimiseks piisav, kui kaubale on määratud standardne tootmise täitmisaeg.</span><span class="sxs-lookup"><span data-stu-id="3ed62-360">In some cases, having a standard production lead time specified for the item will be sufficient for planning.</span></span> <span data-ttu-id="3ed62-361">Protsessi ajastamise väljalülitamiseks seadke võimsuse ajapiir nulliks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-361">To turn off route scheduling, set the capacity time fence to zero.</span></span> <span data-ttu-id="3ed62-362">Kui ajastamine peaks toimuma, tuleb võimsuse ajapiir määrata hoolikalt, kuna võib juhtuda, et protsesse ei pea arvesse võtma terve MRP katvuse ajapiiri jooksul.</span><span class="sxs-lookup"><span data-stu-id="3ed62-362">If scheduling should be done, then the capacity time fence must be carefully set because it might not be necessary to consider routes for the full extent of the MRP's coverage time fence.</span></span>

<span data-ttu-id="3ed62-363">Pidage meeles, et kui tellimust MRP ajal ei ajastada, tuleb see ajastada siis, kui plaanitud tellimus kinnitatakse.</span><span class="sxs-lookup"><span data-stu-id="3ed62-363">Note that if the order is not scheduled during MRP, then it will instead need to be scheduled when the planned order is firmed.</span></span> <span data-ttu-id="3ed62-364">See tähendab, et kinnitamise protsess võtab kauem aega, nii et sõltuvalt sellest, kui paljusid soovitatud plaanitud tellimusi kinnitatakse, võib kinnitamine MRP ajal saadud parema jõudluse nullistada.</span><span class="sxs-lookup"><span data-stu-id="3ed62-364">This means that the firming process will take longer, so depending on how many of the suggested planned orders get firmed the performance gain during MRP might be lost at firming.</span></span>

### <a name="route-with-unnecessary-operations"></a><span data-ttu-id="3ed62-365">Tarbetute toimingutega protsess</span><span class="sxs-lookup"><span data-stu-id="3ed62-365">Route with unnecessary operations</span></span>

<span data-ttu-id="3ed62-366">Protsessi kujundamisel võib tekkida kiusatus jäljendada pärismaailma täpselt koos iga sammuga, mis tootmises läbitakse.</span><span class="sxs-lookup"><span data-stu-id="3ed62-366">When designing the route, it is tempting to try to model the real world exactly with all the steps the production goes through.</span></span> <span data-ttu-id="3ed62-367">Kuigi see võib mõnel juhul kasulik olla, ei ole see jõudlust arvestades hea, sest mootori kasutatav mudel kasvab (nii tööde kui ka piirangute osas) ning tööde ja võimsuse reserveeringute sisestamiseks ja värskendamiseks käitatakse rohkem SQL-lauseid.</span><span class="sxs-lookup"><span data-stu-id="3ed62-367">While this can be useful in some cases, it is not good for the performance as the model the engine needs to work on gets larger (both in terms of jobs and constraints) and more SQL statements will be executed for insertion and update of the jobs and capacity reservations.</span></span> <span data-ttu-id="3ed62-368">Samuti tuleb lõpuks tööde edenemise kohta aru anda, mida saab lahendada automaatse sisestamise kaudu.</span><span class="sxs-lookup"><span data-stu-id="3ed62-368">Also, there is the downstream effect of having to eventually report progress on the jobs, which can be mitigated with automatic postings.</span></span> <span data-ttu-id="3ed62-369">Kui andmeid ei kasutata millekski, tekitab see tarbetut koormust.</span><span class="sxs-lookup"><span data-stu-id="3ed62-369">If the data is not used for anything, it creates unnecessary load.</span></span>

<span data-ttu-id="3ed62-370">Soovitame luua ainult toiminguid, mis on rangelt vajalikud ajastamiseks (mis on tavaliselt kitsaskohtadena toimivad ressursid) ja/või kuluarvutuse eesmärgil.</span><span class="sxs-lookup"><span data-stu-id="3ed62-370">We recommend that you only create operations that are strictly needed for scheduling (which will typically be the bottleneck resources) and/or costing purposes.</span></span> <span data-ttu-id="3ed62-371">Teise võimalusena peaksite liitma mitu väiksemat eraldiseisvat toimingut üheks suuremaks toiminguks, mis tähistab protsessi suuremat osa.</span><span class="sxs-lookup"><span data-stu-id="3ed62-371">Alternatively you should group many smaller distinct operations into one larger operation that represents a greater part of the process.</span></span>

### <a name="many-applicable-resources-for-an-operation"></a><span data-ttu-id="3ed62-372">Toimingu paljud rakendatavad ressursid</span><span class="sxs-lookup"><span data-stu-id="3ed62-372">Many applicable resources for an operation</span></span>

<span data-ttu-id="3ed62-373">Toimingu puhul rakendatavate ressursside arv määratletakse toimingu seoses määratud ressursinõuete alusel.</span><span class="sxs-lookup"><span data-stu-id="3ed62-373">The number of applicable resources for an operation is determined by the resource requirements set on the operation relation.</span></span> <span data-ttu-id="3ed62-374">Nõue võib hõlmata kindlat (üksikut) ressursi või põhineda ressursi ressursirühma kuulumisel või võimekusel.</span><span class="sxs-lookup"><span data-stu-id="3ed62-374">The requirement can either be for a specific (individual) resource or it can be based on the resource's membership of a resource group or capability.</span></span>

<span data-ttu-id="3ed62-375">Kui ajastamise puhul ei kasutata piiratud võimsust ja kõikidel rakendatavatel ressurssidel on sama kalender ning tõhusus, valib ajastamismootor toimingu jaoks alati sama ressursi, kuid ainult pärast kõigi rakendatavate ressursside proovimist, et kontrollida, kas on olemas mõni, mis on parem kui teised.</span><span class="sxs-lookup"><span data-stu-id="3ed62-375">If scheduling is not done using finite capacity and all the applicable resources have the same calendar and efficiency, then the scheduling engine will always end up picking the same resource for an operation, but only after trying all the applicable resources to check if there is one that is "better" than the others.</span></span> <span data-ttu-id="3ed62-376">Sellisel juhul saab ajastamise koormat oluliselt vähendada, määrates protsessi kujundamise ajal toimingule alati kindla ressursi.</span><span class="sxs-lookup"><span data-stu-id="3ed62-376">In this case, the load of the scheduling can be greatly reduced simply by always assigning a specific resource to the operation at the route design time.</span></span>

### <a name="route-with-parallel-operations"></a><span data-ttu-id="3ed62-377">Paralleelsete toimingutega protsess</span><span class="sxs-lookup"><span data-stu-id="3ed62-377">Route with parallel operations</span></span>

<span data-ttu-id="3ed62-378">Kuigi paralleelsed toimingud (esmane/teisene) moodustavad võimsa tööriista selliste olukordade jäljendamiseks, kui kindlat ülesannet peavad täitma nii masin kui ka operaator, tekitab see samuti palju jõudlusprobleeme.</span><span class="sxs-lookup"><span data-stu-id="3ed62-378">While parallel operations (primary/secondary) are a powerful tool to model scenarios like when a machine and an operator are both needed to perform a specific task, it is also the source of many performance issues.</span></span> <span data-ttu-id="3ed62-379">Kui konkreetse üksiku ressursi nõue on määratud nii esmasele kui ka teisesele toimingule, ei ole see tavaliselt probleem.</span><span class="sxs-lookup"><span data-stu-id="3ed62-379">If a requirement for a specific individual resource is assigned to both the primary and secondary operation, it is typically not a problem.</span></span> <span data-ttu-id="3ed62-380">Kuid kui iga toimingu jaoks on olemas mitu võimalikku ressurssi, tõstab see ajastamise arvutamiskeerukust oluliselt.</span><span class="sxs-lookup"><span data-stu-id="3ed62-380">But if there are many possible resources for each of the operations, then it adds significant computational complexity to the scheduling.</span></span>

<span data-ttu-id="3ed62-381">Paralleelsete toimingute kasutamise alternatiiv on kas jäljendada paare „virtuaalsete” ressurssidena (mis siis esindavad meeskonda, mis on toimingus alati koos) või lihtsalt jätta üks toiming jäljendamata, kui see ei kujuta endast kitsaskohta.</span><span class="sxs-lookup"><span data-stu-id="3ed62-381">An alternative to using parallel operations is either to model the pairs as "virtual" resources (which will then represent the team that always goes together for the operation) or to simply not model one of the operations if it doesn't represent a bottleneck.</span></span>

### <a name="route-with-quantity-of-resources-higher-than-1"></a><span data-ttu-id="3ed62-382">Protsess, millel on ressursse rohkem kui üks</span><span class="sxs-lookup"><span data-stu-id="3ed62-382">Route with quantity of resources higher than 1</span></span>

<span data-ttu-id="3ed62-383">Kui toimingu jaoks vajalike ressursside kogus seatakse suuremaks kui üks, siis selle tulemuseks on sama, mis esmaste/teiseste toimingute kasutamine, sest mootorile saadetakse mitu paralleelset tööd.</span><span class="sxs-lookup"><span data-stu-id="3ed62-383">If setting the quantity of resources needed for an operation higher than one, then it results effectively the same as using primary/secondary operations because multiple parallel jobs are sent to the engine.</span></span> <span data-ttu-id="3ed62-384">Kuid sel juhul ei ole võimalik määrata kindlaid ressursse, sest rohkem kui üht ressurssi nõudva koguse puhul peab toimingu jaoks olema rakendatav rohkem kui üks ressurss.</span><span class="sxs-lookup"><span data-stu-id="3ed62-384">However, for this case there is not an option of using specific resource assignments, because a quantity higher than one requires that more than one resource is applicable for the operation.</span></span>

### <a name="excessive-use-of-finite-capacity"></a><span data-ttu-id="3ed62-385">Piiratud võimsuse liigne kasutamine</span><span class="sxs-lookup"><span data-stu-id="3ed62-385">Excessive use of finite capacity</span></span>

<span data-ttu-id="3ed62-386">Piiratud võimsuse kasutamise puhul peab mootor laadima võimsusteavet andmebaasist ja selle arvutusaeg võib pikeneda, kuna lahenduse leidmine on raskem, eriti keskkondades, kus ressursid on reserveeritud lähedal nende maksimaalse võimsuse piirile.</span><span class="sxs-lookup"><span data-stu-id="3ed62-386">Use of finite capacity requires the engine to load the capacity information from a database and can have a computational overhead because it will be harder to find a solution especially in environments where the resources are booked close to their maximum capacity.</span></span> <span data-ttu-id="3ed62-387">Seetõttu on oluline hoolikalt hinnata, kas ressurss peab tõesti piiratud võimsust kasutama või saab neid ülereserveerida.</span><span class="sxs-lookup"><span data-stu-id="3ed62-387">As a result, it is important to carefully evaluate if a resource really needs to use finite capacity or they can be overbooked.</span></span> <span data-ttu-id="3ed62-388">Kuna piiratud võimsusega ressursside puhul võib olla oluline see, milliseid ei tohiks kindlasti ülereserveerida, soovitame kasutada ressursis kitsaskohtade valikut koos plaani eraldi väärtusega suvandis „Võimsuse ajapiir kitsaskohana toimivate ressursside puhul”.</span><span class="sxs-lookup"><span data-stu-id="3ed62-388">Because there might be a difference among finite capacity resources in how important they are not to overbook, we recommend using the bottleneck option on a resource in combination with a separate value on the plan in "Capacity time fence for bottleneck resources".</span></span> <span data-ttu-id="3ed62-389">Kitsaskohtade kontseptsiooni abil on võimalik lubada üldise piiratud võimsuse ajapiiri vähendamine.</span><span class="sxs-lookup"><span data-stu-id="3ed62-389">Using the bottleneck concept can enable that the general finite capacity time fence can be lowered.</span></span>

### <a name="setting-hard-links"></a><span data-ttu-id="3ed62-390">Püsiseoste seadistamine</span><span class="sxs-lookup"><span data-stu-id="3ed62-390">Setting hard links</span></span>

<span data-ttu-id="3ed62-391">Protsessi standardne seosetüüp on *paindlik*, mis tähendab, et ühe toimingu lõpetamise ja teise alustamise vahele võib jääda vahe.</span><span class="sxs-lookup"><span data-stu-id="3ed62-391">The standard link type of the route is *soft*, which means that a time gap is allowed between the finishing time of one operation and the start of the next.</span></span> <span data-ttu-id="3ed62-392">Selle lubamise korral võib kahjuks juhtuda nii, et kui ühe toimingu jaoks ei ole materjale või võimsust väga pikka aega saadaval, võib tootmine olla üsna kaua jõudeolekus, mis tähendab poolelioleva töö võimalikku suurenemist.</span><span class="sxs-lookup"><span data-stu-id="3ed62-392">Allowing this can have the unfortunate effect that, if materials or capacity are not available for one of the operations for a very long time, the production could be idle for quite a while, meaning a possible increase of work in progress.</span></span> <span data-ttu-id="3ed62-393">Seda ei juhtu püsiseoste puhul, kuna lõpp ja algus peavad sobima kokku täpselt.</span><span class="sxs-lookup"><span data-stu-id="3ed62-393">This will not happen with hard links because the finish and start must align perfectly.</span></span> <span data-ttu-id="3ed62-394">Kuid püsiseoste seadistamine muudab ajastamisprobleemi keerulisemaks, kuna tööaja ja võimsuse kattumised tuleb arvutada toimingute kahe ressursi jaoks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-394">But setting hard links makes the scheduling problem more difficult because working time and capacity intersections must be calculated for the two resources of the operations.</span></span> <span data-ttu-id="3ed62-395">Kui sellega on seotud ka paralleelsed toimingud, muutub arvutusaeg oluliselt pikemaks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-395">If there are also parallel operations involved, this adds significant computational time.</span></span> <span data-ttu-id="3ed62-396">Kui kahe toimingu ressurssidel on erinevad kalendrid, mis ei kattu üldse, on probleem lahendamatu.</span><span class="sxs-lookup"><span data-stu-id="3ed62-396">If the resources of the two operations have different calendars that don't overlap at all, the problem is unsolvable.</span></span>

<span data-ttu-id="3ed62-397">Soovitame kasutada püsiseoseid ainult äärmise vajaduse korral ning kaaluda hoolikalt, kas see on vajalik protsessi iga toimingu jaoks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-397">We recommend using hard links only when strictly necessary, and carefully consider if it is necessary for each operation of the route.</span></span>

<span data-ttu-id="3ed62-398">Et vähendada pooleliolevaid töid püsiseoseid rakendamata, on üks võimalus ajastada tellimus kaks korda, muutes teisel korral suund vastupidiseks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-398">To reduce the work in progress without applying hard links, a trick is to schedule the order twice with changing to the opposite direction for the second pass.</span></span> <span data-ttu-id="3ed62-399">Kui esimene graafik tehti tarnekuupäevast tagasiulatuvalt, tuleks teine graafik teha ajastatud alguskuupäevast edasiulatuvalt.</span><span class="sxs-lookup"><span data-stu-id="3ed62-399">If the first schedule was done backwards from delivery date, then the second should be done forward from the scheduled start date.</span></span> <span data-ttu-id="3ed62-400">Selle tulemusena surutakse töid kokku nii palju kui võimalik, et pooleliolevaid töid oleks võimalikult vähe.</span><span class="sxs-lookup"><span data-stu-id="3ed62-400">This will result in the jobs being compressed as much as possible so that the work in progress is minimized.</span></span>

### <a name="separate-calendar-for-each-resource"></a><span data-ttu-id="3ed62-401">Eraldi kalender iga ressursi jaoks</span><span class="sxs-lookup"><span data-stu-id="3ed62-401">Separate calendar for each resource</span></span>

<span data-ttu-id="3ed62-402">Ajastamismootori puhul on üks andmete põhiallikaid kalendriteave, mille laadimine võib andmebaasist olla kulukas.</span><span class="sxs-lookup"><span data-stu-id="3ed62-402">One of the main sources of data for the scheduling engine is calendar information, which can be expensive to load from the database.</span></span> <span data-ttu-id="3ed62-403">Kuna kalendreid luuakse mallide põhjal, võib tekkida kiusatus luua iga ressursi jaoks kalender ja seejärel korrigeerida selles kalendris olevat teavet, kui ressursil on seisakuid ja muid probleeme.</span><span class="sxs-lookup"><span data-stu-id="3ed62-403">Because calendars are generated based on templates, it would be tempting to generate a calendar for each resource and then adjust the information in this calendar when the resource has downtime and other issues.</span></span> <span data-ttu-id="3ed62-404">Kuid see piirab oluliselt mootori võimet kalendriandmeid vahemälusse salvestada, kuna see peaks iga ressursi puhul uusi andmeid pärima ning see võib olla suur jõudlusprobleemide allikas.</span><span class="sxs-lookup"><span data-stu-id="3ed62-404">However, doing this will severely limit the engines ability to cache the calendar data as it would need to request new data for each resource and can be a large source of performance problems.</span></span> <span data-ttu-id="3ed62-405">Selle asemel soovitame teil taaskasutada ressursside jaoks kalendreid nii palju kui võimalik ja seejärel kontrollida seisakute muudatusi, määrates perioodi jaoks teistsuguse kalendri ID.</span><span class="sxs-lookup"><span data-stu-id="3ed62-405">Instead, we recommend that you reuse the calendars as much as possible between the resources, and then control downtime changes by assigning a different calendar ID for a period.</span></span>

### <a name="high-number-of-working-time-slots-per-calendar-day"></a><span data-ttu-id="3ed62-406">Tööajavahemike suur arv ühe kalendripäeva kohta</span><span class="sxs-lookup"><span data-stu-id="3ed62-406">High number of working time slots per calendar day</span></span>

<span data-ttu-id="3ed62-407">Kuna mootor töötab nii, et uurib ajavahemikke võimsust silmas pidades ükshaaval, on kasulik vähendada ajavahemike arvu kalendripäeva kohta.</span><span class="sxs-lookup"><span data-stu-id="3ed62-407">Because the engine works by examining time slots one-by-one for capacity, it is beneficial to minimize the number of time slots per calendar day.</span></span> <span data-ttu-id="3ed62-408">Seda saab teha näiteks kaaludes, kas lõplikus kalendris on oluline ära märkida, et töötajatel on igas tunnis viieminutiline paus.</span><span class="sxs-lookup"><span data-stu-id="3ed62-408">This could be done, for example, by considering whether it's important for the resulting schedule to reflect that workers have a 5-minute break every hour.</span></span>

### <a name="large-or-none-scheduling-timeouts"></a><span data-ttu-id="3ed62-409">Suured (või puuduvad) ajastamise ajalõpud</span><span class="sxs-lookup"><span data-stu-id="3ed62-409">Large (or none) scheduling timeouts</span></span>

<span data-ttu-id="3ed62-410">Ajastamismootori jõudlust saab optimeerida, kasutades lehel **Ajastamise parameetrid** leitavaid parameetreid.</span><span class="sxs-lookup"><span data-stu-id="3ed62-410">Scheduling engine performance can be optimized using parameters found on the **Scheduling parameters** page.</span></span> <span data-ttu-id="3ed62-411">Suvandite **Ajastamise ajalõpp on lubatud** ja **Ajastamise optimeerimise ajalõpp on lubatud** väärtus peaks alati olema **Jah**.</span><span class="sxs-lookup"><span data-stu-id="3ed62-411">The **Scheduling timeout enabled** and **Scheduling optimization timeout enabled** settings should always be set to **Yes**.</span></span> <span data-ttu-id="3ed62-412">Kui väärtus on **Ei**, võib ajastamine potentsiaalselt töötada lõpmatult, kui loodud on paljude valikutega teostamatu protsess.</span><span class="sxs-lookup"><span data-stu-id="3ed62-412">If set to **No**, the scheduling can potentially run infinitely if an unfeasible route with many options has been created.</span></span>

<span data-ttu-id="3ed62-413">Suvandi **Maksimaalne ajastamisaeg järjestuse kohta** väärtus määrab, mitu sekundit saab kõige rohkem kulutada ühe järjestuse lahenduse leidmisele (enamikul juhtudel vastab järjestus ühele tellimusele).</span><span class="sxs-lookup"><span data-stu-id="3ed62-413">The value for **Maximum scheduling time per sequence** controls how many seconds can, at most, be spent trying to find a solution for a single sequence (in most cases a sequence corresponds to a single order).</span></span> <span data-ttu-id="3ed62-414">Siin kasutatav väärtus sõltub suuresti protsessi keerukusest ja sätetest, nagu piiratud võimsus, kuigi maksimaalne arv 30 sekundit on hea koht, kust alustada.</span><span class="sxs-lookup"><span data-stu-id="3ed62-414">The value to use here highly depends on the complexity of the route and settings like finite capacity, ut a maximum of about 30 seconds is a good starting point.</span></span>

<span data-ttu-id="3ed62-415">Suvandi **Optimeerimiskatsete ajalõpp** väärtus määrab, mitu sekundit saab kõige rohkem kasutada algsest parema lahenduse leidmiseks.</span><span class="sxs-lookup"><span data-stu-id="3ed62-415">The value for **Optimization attempts timeout** controls how many seconds can at most be used to find a better solution than the one originally found.</span></span> <span data-ttu-id="3ed62-416">See mõjutab ainult paralleelseid toiminguid kasutavaid protsesse, kuna nende puhul on vajalik kontrollida eri kombinatsioone.</span><span class="sxs-lookup"><span data-stu-id="3ed62-416">This will only influence routes that are using parallel operations as these make it necessary to test different combinations.</span></span>

> [!NOTE]
> <span data-ttu-id="3ed62-417">Ajalõppudele määratud väärtusi rakendatakse MRP osana nii väljastatud tootmistellimuste kui ka plaanitud tellimuste ajastamisel.</span><span class="sxs-lookup"><span data-stu-id="3ed62-417">The values set for the timeouts will be applied both for scheduling of released production orders and of planned orders as part of MRP.</span></span> <span data-ttu-id="3ed62-418">Selle tulemusena võivad väga kõrged väärtused MRP käitusaega oluliselt pikendada, kui käitatakse paljude plaanitud tootmistellimustega plaani.</span><span class="sxs-lookup"><span data-stu-id="3ed62-418">As a result, setting very high values could significantly add to the run time of MRP when running for a plan with many planned production orders.</span></span>
