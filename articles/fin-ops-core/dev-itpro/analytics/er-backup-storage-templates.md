---
title: ER-mallide varukoopia salvestamine
description: Selles teemas selgitatakse, kuidas kasutada elektroonilise aruandluse (ER) varundusmälu mallide taastamiseks.
author: NickSelin
manager: AnnBe
ms.date: 08/19/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERWorkspace, ERSolutionTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Operations
ms.custom: 27621
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-08-13
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: 5dad101ffe56c9266c0d81ede8be1f72b684a8fb
ms.sourcegitcommit: fbc106af09bdadb860677f590464fb93223cbf65
ms.translationtype: HT
ms.contentlocale: et-EE
ms.lasthandoff: 11/06/2019
ms.locfileid: "2771417"
---
# <a name="backup-storage-of-er-templates"></a><span data-ttu-id="abe87-103">ER-mallide varukoopia salvestamine</span><span class="sxs-lookup"><span data-stu-id="abe87-103">Backup storage of ER templates</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="abe87-104">[Elektroonilise aruandluse (ER) ülevaade](general-electronic-reporting.md) võimaldab ärikasutajatel konfigureerida väljuvate dokumentide vorminguid erinevate riikide ja regioonide õigusnõuete järgi.</span><span class="sxs-lookup"><span data-stu-id="abe87-104">The [Electronic reporting (ER) overview](general-electronic-reporting.md) lets business users configure formats for outbound documents according to the legal requirements of various countries and regions.</span></span> <span data-ttu-id="abe87-105">Konfigureeritud ER-vormingud saavad kasutada eelmääratletud malle, et luua väljaminevaid dokumente erinevates vormingutes, näiteks Microsoft Exceli töövihikud, Microsoft Wordi dokumendid või PDF-dokumendid.</span><span class="sxs-lookup"><span data-stu-id="abe87-105">Configured ER formats can use predefined templates to generate outbound documents in various formats, such as Microsoft Excel workbooks, Microsoft Word documents, or PDF documents.</span></span> <span data-ttu-id="abe87-106">Mallid on täidetud andmetega, mida genereeritud dokumentide konfigureeritud andmevoog nõuab.</span><span class="sxs-lookup"><span data-stu-id="abe87-106">The templates are filled with data that the configured dataflow for generated documents requires.</span></span>

<span data-ttu-id="abe87-107">Kõiki vorminguid saab avaldada ER-lahenduse osana.</span><span class="sxs-lookup"><span data-stu-id="abe87-107">Each configured format can be published as part of an ER solution.</span></span> <span data-ttu-id="abe87-108">Iga ER lahendust saab eksportida ühest Finance and Operations eksemplarist ning importida teise eksemplari.</span><span class="sxs-lookup"><span data-stu-id="abe87-108">Each ER solution can be exported from one instance of Finance and Operations and imported into another instance.</span></span>

<span data-ttu-id="abe87-109">ER raamistik kasutab [Dokumendihalduse konfigureerimist](../../fin-ops/organization-administration/configure-document-management.md), et säilitada praeguse Finance and Operations eksemplari jaoks nõutavad mallid.</span><span class="sxs-lookup"><span data-stu-id="abe87-109">The ER framework uses the [Configure document management](../../fin-ops/organization-administration/configure-document-management.md) to keep the required templates for the current Finance and Operations instance.</span></span> <span data-ttu-id="abe87-110">Sõltuvalt ER-raamistiku sätetest saab valida Microsoft Azure Bloobi salvestamise või Microsoft SharePoint kausta, mis on mallide füüsilise esmase salvestamise vaikeasukoht.</span><span class="sxs-lookup"><span data-stu-id="abe87-110">Depending on the settings of the ER framework, Microsoft Azure Blob storage or a Microsoft SharePoint folder can be selected as the physical primary storage location for templates.</span></span> <span data-ttu-id="abe87-111">(Lisateabe saamiseks vt teemat [Elektroonilise aruandluse (ER) raamistiku konfigureerimine](electronic-reporting-er-configure-parameters.md).) DocuValue tabel sisaldab iga malli kohta eraldi kirjet.</span><span class="sxs-lookup"><span data-stu-id="abe87-111">(For more information, see [Configure the Electronic reporting (ER) framework](electronic-reporting-er-configure-parameters.md).) The DocuValue table holds an individual record for each template.</span></span> <span data-ttu-id="abe87-112">Igas kirjes talletab väli **AccessInformation** konfigureeritud salvestuskohas asuva mallifaili tee.</span><span class="sxs-lookup"><span data-stu-id="abe87-112">In each record, the **AccessInformation** field stores the path of a template file that is located in the configured storage location.</span></span>

<span data-ttu-id="abe87-113">Kui haldate oma Finance and Operations eksemplare, võite valida praeguse eksemplari siirdamise teise asukohta.</span><span class="sxs-lookup"><span data-stu-id="abe87-113">When you manage your Finance and Operations instances, you might decide to migrate the current instance to another location.</span></span> <span data-ttu-id="abe87-114">Näiteks võite oma tootmiseksemplari migreerida uude liivakastikeskkonda.</span><span class="sxs-lookup"><span data-stu-id="abe87-114">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="abe87-115">Kui konfigureerisite ER-raamistiku talletama malle Bloobi salvestamises, viitab DocuValue tabel uues liivakastikeskkonnas Bloobi salvestamise eksemplarile tootmiskeskkonnas.</span><span class="sxs-lookup"><span data-stu-id="abe87-115">If you configured the ER framework to store templates in Blob storage, the DocuValue table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="abe87-116">Sellele eksemplarile ei pääse aga juurde liivakastikeskkonnast, sest migreerimisprotsess ei toeta artefaktide migreerimist Bloobi salvestamises.</span><span class="sxs-lookup"><span data-stu-id="abe87-116">However, this instance can't be accessed from the sandbox environment, because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="abe87-117">Seetõttu, kui proovite käitada ER-vormingut, mis kasutab malli äridokumentide loomiseks, ilmneb erand ja teid teavitatakse puuduvast mallist.</span><span class="sxs-lookup"><span data-stu-id="abe87-117">Therefore, if you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="abe87-118">Juhendate ka ER-puhastustööriista kasutamist malli sisaldava ER-vormingu konfiguratsiooni kustutamiseks ja uuesti importimiseks.</span><span class="sxs-lookup"><span data-stu-id="abe87-118">You're also guided to use the ER cleanup tool to delete and then re-import the ER format configuration that contains the template.</span></span> <span data-ttu-id="abe87-119">Kuna teil võib olla mitu ER-vormingu konfiguratsiooni, võib see protsess olla aeganõudev.</span><span class="sxs-lookup"><span data-stu-id="abe87-119">Because you might have several ER format configurations, this process can be time consuming.</span></span>

<span data-ttu-id="abe87-120">ER-mallide varundusfunktsioon aitab teil malle luua nii, et need oleksid alati äridokumentide loomiseks saadaval.</span><span class="sxs-lookup"><span data-stu-id="abe87-120">The Backup storage of ER templates feature can help you make your templates so that they are always available to generate business documents.</span></span>

> [!NOTE]
> <span data-ttu-id="abe87-121">Seda funktsiooni saab kasutada ainult siis, kui on märgitud, et ER-mallide füüsiline talletuskoht on valitud.</span><span class="sxs-lookup"><span data-stu-id="abe87-121">This feature can be used only when Blob storage has been selected as the physical storage location for ER templates.</span></span>

<span data-ttu-id="abe87-122">Selle funktsiooni puhul salvestatakse kõik praeguse keskkonna uue ER-vormingu konfiguratsiooni mallid automaatselt mallide varukoopia salvestuskohta (ERDocuDatabaseStorage andmebaasitabel), kui ilmnevad järgmised sündmused:</span><span class="sxs-lookup"><span data-stu-id="abe87-122">For this feature, every template of a new ER format configuration in the current environment is automatically saved to the backup storage location for templates (the ERDocuDatabaseStorage database table) when the following events occur:</span></span>

- <span data-ttu-id="abe87-123">Impordite uue ER-vormingu konfiguratsiooni, mis sisaldab malli.</span><span class="sxs-lookup"><span data-stu-id="abe87-123">You import a new ER format configuration that contains a template.</span></span>
- <span data-ttu-id="abe87-124">Saate lõpule viia malli sisaldava ER-vormingu konfiguratsiooni mustandversiooni.</span><span class="sxs-lookup"><span data-stu-id="abe87-124">You complete the draft version of an ER format configuration that contains a template.</span></span>

<span data-ttu-id="abe87-125">Mallide varukoopiad migreeritakse uude Finance and Operations süsteemi osana rakenduse andmebaasist.</span><span class="sxs-lookup"><span data-stu-id="abe87-125">Backup copies of templates are migrated to a new instance of Finance and Operations as part of the application database.</span></span>

<span data-ttu-id="abe87-126">Kui väljaminevate dokumentide genereerimiseks on nõutav ER-vormingu mall, mis töötleb näiteks hankijamakseid, sealhulgas maksenõustamis- ja kontrolliaruannete genereerimist, kuid vajalikku malli ei leita primaarses talletuskohas, ilmnevad järgmised sündmused.</span><span class="sxs-lookup"><span data-stu-id="abe87-126">If a template of an ER format is required for generation of outbound documents, to process vendor payments including generation of payment advice and control reports, for example, but the required template isn't found in the primary storage location, the following events occur:</span></span>

- <span data-ttu-id="abe87-127">Kui mall on saadaval varunduse talletamise asukohas, võetakse see automaatselt varunduse asukohast, taastatakse esmasesse salvestamise asukohta ja kasutatakse praeguse käivitamise puhul.</span><span class="sxs-lookup"><span data-stu-id="abe87-127">If the template is available in the backup storage location, it is automatically taken from the backup storage location, restored to the primary storage location, and used for the current execution.</span></span>
- <span data-ttu-id="abe87-128">Iga kasutaja, kellele on määratud **Elektroonilise aruandluse arendaja** või **Süsteemiadministraatori** roll, teavitatakse puuduva malli probleemist tegevuskeskuse kaudu.</span><span class="sxs-lookup"><span data-stu-id="abe87-128">Every user who is assigned to the **Electronic reporting developer** or **System administrator** role is notified about the missing template issue through the Action center.</span></span> <span data-ttu-id="abe87-129">Kuvatav teade sõltub parameetri **Katkestatud mallide automaatse taastamise protseduur partiis** väärtusest.</span><span class="sxs-lookup"><span data-stu-id="abe87-129">The message that appears depends on the value of the **Automatically run the procedure of restoring the broken templates in batch** parameter:</span></span>

    - <span data-ttu-id="abe87-130">Kui see teade on **Välja lüitatud**, soovitab teade käivitada pakktöötlusprotsessi, et lahendada sarnased probleemid automaatselt teiste ER-vormingus</span><span class="sxs-lookup"><span data-stu-id="abe87-130">If this parameter is set to **Off**, the message recommends that you start the batch process to automatically fix similar issues for other ER format configuration templates.</span></span> <span data-ttu-id="abe87-131">Teade sisaldab linki, mida saate kasutada pakktöötluse käivitamiseks.</span><span class="sxs-lookup"><span data-stu-id="abe87-131">The message includes a link that you can use to start the batch process.</span></span>
    - <span data-ttu-id="abe87-132">Kui selle parameetri väärtuseks on **Sees**, teavitab teade teid puuduvast mallist ja sellest, et uus masstöötlusprotsess  **Taasta katkenud mallid sisemise andmebaasi varukoopiast** on automaatselt ajastatud.</span><span class="sxs-lookup"><span data-stu-id="abe87-132">If this parameter is set to **On**, the message notifies you that a missing templates issue has been discovered, and that a new batch process, **Restore broken templates from internal database backup**, has been automatically scheduled.</span></span> <span data-ttu-id="abe87-133">See pakktöötlus parandab automaatselt teiste mallide sarnaseid probleeme.</span><span class="sxs-lookup"><span data-stu-id="abe87-133">This batch process will automatically fix similar issues for other templates.</span></span>

<span data-ttu-id="abe87-134">Parameetri **Katkestatud mallide automaatse taastamise protseduur partiis** seadmiseks toimige järgmiselt. </span><span class="sxs-lookup"><span data-stu-id="abe87-134">To set up the he **Automatically run the procedure of restoring the broken templates in batch** parameter, complete the following steps:</span></span>

1. <span data-ttu-id="abe87-135">Avage rakenduses Finance and Operations **Organisatsiooni haldus \> Elektrooniline aruandlus \> Konfiguratsiooni leht**.</span><span class="sxs-lookup"><span data-stu-id="abe87-135">In Finance and Operations, open the **Organization administration \> Electronic reporting \> Configurations page**.</span></span>
2. <span data-ttu-id="abe87-136">Valige lehe **Konfiguratsioonid** toimingupaani vahekaardi **Konfiguratsioonid** grupist **Täpsemad sätted** valik **Kasutaja parameetrid**.</span><span class="sxs-lookup"><span data-stu-id="abe87-136">On the **Configurations** page, on the Action Pane, on the **Configurations** tab, in the **Advanced settings** group, select **User parameters**.</span></span>
3. <span data-ttu-id="abe87-137">Määrake dialoogiboksis **Kasutaja parameetrid** vajalik väärtus parameetrile **Katkestatud mallide automaatse taastamise protseduur partiis**.</span><span class="sxs-lookup"><span data-stu-id="abe87-137">In the **User parameters** dialog box, set the required value for the **Automatically run the procedure of restoring the broken templates in batch** parameter.</span></span>

> [!NOTE]
> <span data-ttu-id="abe87-138">See parameeter on määratletud rakenduse kasutaja ja logitud ettevõtte spetsiifilise parameetrina.</span><span class="sxs-lookup"><span data-stu-id="abe87-138">This parameter is defined as application user and logged company specific.</span></span>

![ER-seadete leht](./media/GER-BackupTemplates-1.png)

<span data-ttu-id="abe87-140">Järgmisel joonisel on kujutatud teate näidet, mis kuvatakse siis, kui parameeter **Katkestatud mallide automaatse taastamise protseduur partiis** on **Sees**.</span><span class="sxs-lookup"><span data-stu-id="abe87-140">The following illustration shows an example of the message that appears when the **Automatically run the procedure of restoring the broken templates in batch** parameter is set to **On**.</span></span>

![Hankija maksetööleht](./media/GER-BackupTemplates-2.png)

<span data-ttu-id="abe87-142">Järgmisel joonisel on näha pakktöötlust **Katkenud mallide taastamine andmebaasi sisemise varunduse abil** lehel **Pakett-töö**.</span><span class="sxs-lookup"><span data-stu-id="abe87-142">The following illustration shows the **Restore broken templates from internal database backup** batch process on the **Batch job** page.</span></span>

![Pakett-töö leht](./media/GER-BackupTemplates-3.png)

<span data-ttu-id="abe87-144">Lõpetatud **Taasta katkenud mallid sisemisest andmebaasi varundusest** pakktöötlusprotsess sisaldab teavet mallide kohta, mis on taastatud varukoopia talletuskohast esmase talletuskohani.</span><span class="sxs-lookup"><span data-stu-id="abe87-144">The execution log of the completed **Restore broken templates from internal database backup** batch process includes information about the templates that have been restored from the backup storage location to the primary storage location.</span></span>

![Pakett-töö ajaloo leht](./media/GER-BackupTemplates-4.png)

<span data-ttu-id="abe87-146">Vaikimisi on sisse lud ER-vorminguga konfiguratsioonides sisalduvatest mallidest automaatselt varukoopiate loomise protsess.</span><span class="sxs-lookup"><span data-stu-id="abe87-146">By default, the process of automatically creating backup copies of templates that reside in ER format configurations is turned on.</span></span> <span data-ttu-id="abe87-147">Mallidest varukoopiate tegemise lõpetamiseks seadke **Peata mallidest varukoopiate tegemine** valikuks **Jah** vahekaardil **Manused** lehel **Elektroonilise aruandluse parameetrid**.</span><span class="sxs-lookup"><span data-stu-id="abe87-147">To stop making backup copies of templates, set the **Stop making backup copies of template** option to **Yes** on the **Attachments** tab of the **Electronic reporting parameters** page.</span></span> <span data-ttu-id="abe87-148">Selle lehe saate avada tööruumist **Elektrooniline aruandlus**.</span><span class="sxs-lookup"><span data-stu-id="abe87-148">You can open this page from the **Electronic reporting** workspace.</span></span>

<span data-ttu-id="abe87-149">Kui määrate suvandi **Peata mallidest varukoopiate tegemine** väärtuseks **Jah** ja te ei soovi säilitada varem mallidest tehtud varukoopiaid, valige **Puhasta varunduse salvestusruum** lehel **Elektroonilise aruandluse parameetrid**.</span><span class="sxs-lookup"><span data-stu-id="abe87-149">If you set the **Stop making backup copies of templates** option to **Yes** and don't want to keep the backup copies that were previously made of templates, select **Clean up backup storage** on the **Electronic reporting parameters** page.</span></span>

<span data-ttu-id="abe87-150">Kui täiendasite oma keskkonna versiooni Finance and Operations 10.0.5 (oktoober 2019) ja soovite siirduda uude keskkonda, mis sisaldab käitatavaid ER-vormingu konfiguratsioone, valige enne migreerimist **Täida varundusmälu** lehel **Elektroonilise aruandluse parameetrid**.</span><span class="sxs-lookup"><span data-stu-id="abe87-150">If you upgraded your environment to Finance and Operations version 10.0.5 (October 2019) and want to migrate to a new environment that includes ER format configurations that can be run, select **Fill in backup storage** on the **Electronic reporting parameters** page before the migration occurs.</span></span> <span data-ttu-id="abe87-151">See nupp käivitab kõigi saadaolevate mallide varukoopiate tegemise, nii et neid saab talletada mallide ER-varunduse talletuskohas.</span><span class="sxs-lookup"><span data-stu-id="abe87-151">This button starts the process of making backup copies of all available templates, so that they can be stored in the ER backup storage location for templates.</span></span>

![Elektroonilise aruandluse parameetrite leht](./media/GER-BackupTemplates-5.png)

## <a name="supported-deployments"></a><span data-ttu-id="abe87-153">Toetatud juurutused</span><span class="sxs-lookup"><span data-stu-id="abe87-153">Supported deployments</span></span>

<span data-ttu-id="abe87-154">Finance and Operations versioonis 10.0.5 on ER-mallide varundusmälu funktsioon saadaval ainult pilvejuurutustes.</span><span class="sxs-lookup"><span data-stu-id="abe87-154">In Finance and Operations version 10.0.5, the Backup storage of ER templates feature is available only in cloud deployments.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="abe87-155">Lisaressursid</span><span class="sxs-lookup"><span data-stu-id="abe87-155">Additional resources</span></span>

[<span data-ttu-id="abe87-156">Elektroonilise aruandluse (ER) ülevaade</span><span class="sxs-lookup"><span data-stu-id="abe87-156">Electronic reporting (ER) overview</span></span>](general-electronic-reporting.md)

[<span data-ttu-id="abe87-157">Elektroonilise aruandluse (ER) raamistiku konfigureerimine</span><span class="sxs-lookup"><span data-stu-id="abe87-157">Configure the Electronic reporting (ER) framework</span></span>](electronic-reporting-er-configure-parameters.md)
