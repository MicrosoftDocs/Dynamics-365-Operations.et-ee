---
title: Valemikoostaja elektroonilises aruandluses (ER)
description: See teema sisaldab teavet selle kohta, kuidas kasutada elektroonilises aruandluses (ER) valemikoostajat.
author: NickSelin
ms.date: 12/05/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERDataModelDesigner, ERExpressionDesignerFormula, ERMappedFormatDesigner, ERModelMappingDesigner
audience: Application User, IT Pro
ms.reviewer: kfend
ms.custom: 58771
ms.assetid: 24223e13-727a-4be6-a22d-4d427f504ac9
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 2dcede0818630329a5608c2d294c9c9f4f749f13
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: et-EE
ms.lasthandoff: 03/31/2021
ms.locfileid: "5750128"
---
# <a name="formula-designer-in-electronic-reporting-er"></a><span data-ttu-id="b93d9-103">Valemikoostaja elektroonilises aruandluses (ER)</span><span class="sxs-lookup"><span data-stu-id="b93d9-103">Formula designer in Electronic reporting (ER)</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="b93d9-104">Selles teemas selgitatakse, kuidas kasutada elektroonilises aruandluses (ER) valemikoostajat.</span><span class="sxs-lookup"><span data-stu-id="b93d9-104">This topic explains how to use the formula designer in Electronic reporting (ER).</span></span> <span data-ttu-id="b93d9-105">ER-is kindla elektroonilise dokumendi vormingu koostamisel saate kasutada valemeid andmete teisendamiseks, et vastata selle dokumendi täitmise ja vormindamise nõuetele.</span><span class="sxs-lookup"><span data-stu-id="b93d9-105">When you design a format for a specific electronic document in ER, you can use formulas to transform data so that it meets the requirements for the document's fulfillment and formatting.</span></span> <span data-ttu-id="b93d9-106">Need valemid sarnanevad Microsoft Exceli valemitega.</span><span class="sxs-lookup"><span data-stu-id="b93d9-106">These formulas resemble formulas in Microsoft Excel.</span></span> <span data-ttu-id="b93d9-107">Valemites toetatakse erinevat tüüpi funktsioone: tekst, kuupäev ja kellaaeg, matemaatiline, loogika, teave ja andmetüübi teisendamise funktsioonid ning samuti teised ettevõtte domeenipõhised funktsioonid.</span><span class="sxs-lookup"><span data-stu-id="b93d9-107">Various types of functions are supported in the formulas: text, date and time, mathematical, logical, information, and data type conversion functions, and also other, business domain–specific functions.</span></span>

## <a name="formula-designer-overview"></a><span data-ttu-id="b93d9-108">Valemikoostaja ülevaade</span><span class="sxs-lookup"><span data-stu-id="b93d9-108">Formula designer overview</span></span>

<span data-ttu-id="b93d9-109">ER toetab valemikoostajat.</span><span class="sxs-lookup"><span data-stu-id="b93d9-109">ER supports the formula designer.</span></span> <span data-ttu-id="b93d9-110">Seega saate koostamise ajal konfigureerida avaldisi, misa saab kasutada käitamisel järgmisteks ülesanneteks.</span><span class="sxs-lookup"><span data-stu-id="b93d9-110">Therefore, at design time, you can configure expressions that can be used for the following tasks at runtime:</span></span>

- <span data-ttu-id="b93d9-111">Muutke rakenduse andmebaasist saadud andmeid. Need peavad olema sisestud ER-i andmemudelisse, mis on kavandatud ER-vormingute andmeallikaks.</span><span class="sxs-lookup"><span data-stu-id="b93d9-111">Transform data that is received from an application database and that should be entered in an ER data model that is designed to be a data source for ER formats.</span></span> <span data-ttu-id="b93d9-112">(Näiteks võivad need teisendused hõlmata filtreerimist, grupeerimist ja andmetüübi konversiooni.)</span><span class="sxs-lookup"><span data-stu-id="b93d9-112">(For example, these transformations might include filtering, grouping, and data type conversion.)</span></span>
- <span data-ttu-id="b93d9-113">Andmete vormindamine, mis tuleb saata loodavale elektroonilisele dokumendile kindla ER-vormingu paigutuse ja tingimuste järgi.</span><span class="sxs-lookup"><span data-stu-id="b93d9-113">Format data that must be sent to a generating electronic document in accordance with the layout and conditions of a specific ER format.</span></span> <span data-ttu-id="b93d9-114">(Näiteks võidakse vormindada kooskõlas nõutava keele, kultuuri või kodeeringuga).</span><span class="sxs-lookup"><span data-stu-id="b93d9-114">(For example, the formatting might be done in accordance with the requested language or culture, or the encoding).</span></span>
- <span data-ttu-id="b93d9-115">Elektrooniliste dokumentide loomise protsessi juhtimine.</span><span class="sxs-lookup"><span data-stu-id="b93d9-115">Control the process of creating electronic documents.</span></span> <span data-ttu-id="b93d9-116">(Näiteks saavad avaldised olenevalt andmete töötlemisest vormingu teatud elementide arvestamist lubada või keelata.</span><span class="sxs-lookup"><span data-stu-id="b93d9-116">(For example, the expressions can enable or disable the output of specific elements of the format, depending on processing data.</span></span> <span data-ttu-id="b93d9-117">Nad saavad ka katkestada dokumentide loomisprotsessi või saata lõppkasutajatele sõnumeid.)</span><span class="sxs-lookup"><span data-stu-id="b93d9-117">They can also interrupt the document creation process or throw messages to users.)</span></span>

<span data-ttu-id="b93d9-118">**Valemikoostaja** lehe saate avada järgmiste tegevuste käigus.</span><span class="sxs-lookup"><span data-stu-id="b93d9-118">You can open the **Formula designer** page when you perform any of the following actions:</span></span>

- <span data-ttu-id="b93d9-119">Andmeallika kaupade sidumine andmemudeli komponentidega.</span><span class="sxs-lookup"><span data-stu-id="b93d9-119">Bind data source items to data model components.</span></span>
- <span data-ttu-id="b93d9-120">Andmeallika kaupade sidumine vormingu komponentidega.</span><span class="sxs-lookup"><span data-stu-id="b93d9-120">Bind data source items to format components.</span></span>
- <span data-ttu-id="b93d9-121">Andmeallikate osana esinevate arvutatud väljade täielik haldamine.</span><span class="sxs-lookup"><span data-stu-id="b93d9-121">Complete maintenance of calculated fields that are part of data sources.</span></span>
- <span data-ttu-id="b93d9-122">Kasutaja sisendparameetrite nähtavustingimuste määratlemine.</span><span class="sxs-lookup"><span data-stu-id="b93d9-122">Define the visibility conditions for user input parameters.</span></span>
- <span data-ttu-id="b93d9-123">Vormingu teisenduste kujundamine.</span><span class="sxs-lookup"><span data-stu-id="b93d9-123">Design a format's transformations.</span></span>
- <span data-ttu-id="b93d9-124">Vormingu komponentide lubamistingimuste määratlemine.</span><span class="sxs-lookup"><span data-stu-id="b93d9-124">Define the enabling conditions for the format's components.</span></span>
- <span data-ttu-id="b93d9-125">Vormingu failikomponentide failinimede määratlemine.</span><span class="sxs-lookup"><span data-stu-id="b93d9-125">Define the file names for the format's FILE components.</span></span>
- <span data-ttu-id="b93d9-126">Protsessi juhtimise kinnituste tingimuste määratlemine.</span><span class="sxs-lookup"><span data-stu-id="b93d9-126">Define the conditions for process control validations.</span></span>
- <span data-ttu-id="b93d9-127">Protsessi juhtimise kinnituste teate tekstide määratlemine.</span><span class="sxs-lookup"><span data-stu-id="b93d9-127">Define the message text for process control validations.</span></span>

## <a name="data-binding"></a><a name="Binding"></a><span data-ttu-id="b93d9-128">Andmete sidumine</span><span class="sxs-lookup"><span data-stu-id="b93d9-128">Data binding</span></span>

<span data-ttu-id="b93d9-129">ER-i valemikoostajat saab kasutada määratlemaks avaldist, mis teisendab andmeid, mis saadakse andmeallikatest, nii et käitamisel saab sisestada andmeid andmete tarbijas järgmiselt.</span><span class="sxs-lookup"><span data-stu-id="b93d9-129">The ER formula designer can be used to define an expression that transforms data that is received from data sources, so that the data can be entered in the data consumer in the following ways at runtime:</span></span>

- <span data-ttu-id="b93d9-130">Rakenduse andmeallikatest ja käitamisaja parameetritest ER-i andmemudelisse</span><span class="sxs-lookup"><span data-stu-id="b93d9-130">From application data sources and runtime parameters to an ER data model</span></span>
- <span data-ttu-id="b93d9-131">ER-i andmemudelist ER-i vormingusse;</span><span class="sxs-lookup"><span data-stu-id="b93d9-131">From an ER data model to an ER format</span></span>
- <span data-ttu-id="b93d9-132">Rakenduse andmeallikatest ja käitamisaja parameetritest ER-i vormingusse</span><span class="sxs-lookup"><span data-stu-id="b93d9-132">From application data sources and runtime parameters to an ER format</span></span>

<span data-ttu-id="b93d9-133">Järgmisel joonisel on seda tüüpi avaldise kujundus.</span><span class="sxs-lookup"><span data-stu-id="b93d9-133">The following illustration shows the design of an expression of this type.</span></span> <span data-ttu-id="b93d9-134">Selles näites ümardab avaldis tabelis Intrastat välja **Intrastat.AmountMST** väärtuse kahe kümnendkohani ja annab siis ümardatud väärtuse.</span><span class="sxs-lookup"><span data-stu-id="b93d9-134">In this example, the expression rounds the value of the **Intrastat.AmountMST** field in the Intrastat table to two decimal places and then returns the rounded value.</span></span>

<span data-ttu-id="b93d9-135">[![Andmete sidumise avaldis](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span><span class="sxs-lookup"><span data-stu-id="b93d9-135">[![Data binding expression](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span></span>

<span data-ttu-id="b93d9-136">Järgmine joonis näitab, kuidas seda tüüpi avaldist saab kasutada.</span><span class="sxs-lookup"><span data-stu-id="b93d9-136">The following illustration shows how an expression of this type can be used.</span></span> <span data-ttu-id="b93d9-137">Selles näites on koostatud avaldise tulem sisestatud andmemudeli **Maksu aruandluse mudel** komponendile **Transaction.InvoicedAmount**.</span><span class="sxs-lookup"><span data-stu-id="b93d9-137">In this example, the result of the designed expression is entered in the **Transaction.InvoicedAmount** component of the **Tax reporting model** data model.</span></span>

<span data-ttu-id="b93d9-138">[![Kasutatav andmete sidumise avaldis](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span><span class="sxs-lookup"><span data-stu-id="b93d9-138">[![Data binding expression being used](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span></span>

<span data-ttu-id="b93d9-139">Käitusajal ümardab koostatud valem `ROUND (Intrastat.AmountMST, 2)` välja **AmountMST** väärtuse tabeli Intrastat iga kirje puhul kahe kümnendkohani.</span><span class="sxs-lookup"><span data-stu-id="b93d9-139">At runtime, the designed formula, `ROUND (Intrastat.AmountMST, 2)`, rounds the value of the **AmountMST** field for each record in the Intrastat table to two decimal places.</span></span> <span data-ttu-id="b93d9-140">Seejärel sisestab see ümardatud väärtuse andmemudeli **Maksu aruandlus** komponenti **Transaction.InvoicedAmount**.</span><span class="sxs-lookup"><span data-stu-id="b93d9-140">It then enters the rounded value in the **Transaction.InvoicedAmount** component of the **Tax reporting** data model.</span></span>

## <a name="data-formatting"></a><a name="Transformation"></a><span data-ttu-id="b93d9-141">Andmete vormindamine</span><span class="sxs-lookup"><span data-stu-id="b93d9-141">Data formatting</span></span>

<span data-ttu-id="b93d9-142">ER-i valemikoostajat saab kasutada määratlemaks avaldist, mis vormindab andmeid, mis saadakse andmeallikatest, nii et andmeid saab saata elektroonilise dokumendi loomise osana.</span><span class="sxs-lookup"><span data-stu-id="b93d9-142">The ER formula designer can be used to define an expression that formats data that is received from data sources, so that the data can be sent as part of the generating electronic document.</span></span> <span data-ttu-id="b93d9-143">Teil võib olla vorming, mida tuleb rakendada tüüpilise reeglina, mida tuleb vormingu puhul taaskasutada.</span><span class="sxs-lookup"><span data-stu-id="b93d9-143">You might have formatting that must be applied as a typical rule that should be reused for a format.</span></span> <span data-ttu-id="b93d9-144">Sel juhul saate seda vormingut kasutada ühe korra vormingu konfiguratsioonis nimega teisendusena, millel on vormindamisavaldis.</span><span class="sxs-lookup"><span data-stu-id="b93d9-144">In this case, you can introduce that formatting one time in the format configuration, as a named transformation that has a formatting expression.</span></span> <span data-ttu-id="b93d9-145">Selle nimelise teisenduse saab siduda paljude vormingu komponentidega, mille väljund peab olema vormindatud loodud vormindamisavaldise järgi.</span><span class="sxs-lookup"><span data-stu-id="b93d9-145">This named transformation can then be linked to many format components where the output must be formatted according to the formatting expression that you created.</span></span>

<span data-ttu-id="b93d9-146">Järgmisel joonisel on seda tüüpi teisenduse kujundus.</span><span class="sxs-lookup"><span data-stu-id="b93d9-146">The following illustration shows the design of a transformation of this type.</span></span> <span data-ttu-id="b93d9-147">Selles näites kärbib teisendus **TrimmedString** andmetüübi *String* sissetulevad andmed, eemaldades algus- ja lõputühikud.</span><span class="sxs-lookup"><span data-stu-id="b93d9-147">In this example, the **TrimmedString** transformation truncates incoming data of the *String* data type by removing leading and trailing spaces.</span></span> <span data-ttu-id="b93d9-148">Seejärel tagastab see kärbitud stringiväärtuse.</span><span class="sxs-lookup"><span data-stu-id="b93d9-148">It then returns the truncated string value.</span></span>

<span data-ttu-id="b93d9-149">[![Teisendus](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span><span class="sxs-lookup"><span data-stu-id="b93d9-149">[![Transformation](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span></span>

<span data-ttu-id="b93d9-150">Järgmine joonis näitab, kuidas seda tüüpi teisendust saab kasutada.</span><span class="sxs-lookup"><span data-stu-id="b93d9-150">The following illustration shows how a transformation of this type can be used.</span></span> <span data-ttu-id="b93d9-151">Selles näites saadavad mitu vormingu komponenti teksti käitusajal väljundina loodavale elektroonilisele dokumendile.</span><span class="sxs-lookup"><span data-stu-id="b93d9-151">In this example, several format components send text as output to the generating electronic document at runtime.</span></span> <span data-ttu-id="b93d9-152">Kõik need vormingukomponendid viitavad teisendusele **TrimmedString** nime järgi.</span><span class="sxs-lookup"><span data-stu-id="b93d9-152">All these format components refer to the **TrimmedString** transformation by name.</span></span>

<span data-ttu-id="b93d9-153">[![Kasutatav teisendamine](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span><span class="sxs-lookup"><span data-stu-id="b93d9-153">[![Transformation being used](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span></span>

<span data-ttu-id="b93d9-154">Kui vormingu komponendid (näiteks komponendi **partyName** puhul eelmises näites) viitavad teisendusele **TrimmedString**, saadab teisendus teksti väljundina loodavasse elektroonilisse dokumenti.</span><span class="sxs-lookup"><span data-stu-id="b93d9-154">When format components, such as the **partyName** component in the preceding illustration, refer to the **TrimmedString** transformation, the transformation sends text as output to the generating electronic document.</span></span> <span data-ttu-id="b93d9-155">See tekst ei sisalda algus- ega lõputühikuid.</span><span class="sxs-lookup"><span data-stu-id="b93d9-155">This text doesn't include leading and trailing spaces.</span></span>

<span data-ttu-id="b93d9-156">Kui teil on vorming, mida tuleb rakendada eraldi, saab selle kasutusele võtta kindla vormingu komponendi sidumise üksiku avaldisena.</span><span class="sxs-lookup"><span data-stu-id="b93d9-156">If you have formatting that must be applied individually, you can introduce that formatting as an individual expression of a binding of a specific format component.</span></span> <span data-ttu-id="b93d9-157">Järgmisel joonisel on seda tüüpi avaldis.</span><span class="sxs-lookup"><span data-stu-id="b93d9-157">The following illustration shows an expression of this type.</span></span> <span data-ttu-id="b93d9-158">Selles näites on vormingu komponent **partyType** seotud andmeallikaga avaldise kaudu, mis teisendab sissetulevad andmeallika andmed väljalt **Model.Company.RegistrationType** suurtäheliseks tekstiks.</span><span class="sxs-lookup"><span data-stu-id="b93d9-158">In this example, the **partyType** format component is bound to the data source via an expression that converts incoming data from the **Model.Company.RegistrationType** field in the data source to uppercase text.</span></span> <span data-ttu-id="b93d9-159">Seejärel saadab avaldis selle teksti väljundina elektroonilisse dokumenti.</span><span class="sxs-lookup"><span data-stu-id="b93d9-159">The expression then sends that text as output to the electronic document.</span></span>

<span data-ttu-id="b93d9-160">[![Vorminduse rakendamine üksikule komponendile](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span><span class="sxs-lookup"><span data-stu-id="b93d9-160">[![Applying formatting to an individual component](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span></span>

## <a name="process-flow-control"></a><a name="Validation"></a><span data-ttu-id="b93d9-161">Protsessi voo juhtimine</span><span class="sxs-lookup"><span data-stu-id="b93d9-161">Process flow control</span></span>

<span data-ttu-id="b93d9-162">ER-i valemikoostajat saab kasutada elektrooniliste dokumentide loomise protsessivoo juhtimiseks kasutatavate avaldiste määratlemiseks.</span><span class="sxs-lookup"><span data-stu-id="b93d9-162">The ER formula designer can be used to define expressions that control the process flow of generating electronic documents.</span></span> <span data-ttu-id="b93d9-163">Saate teha järgmisi toiminguid.</span><span class="sxs-lookup"><span data-stu-id="b93d9-163">You can perform the following tasks:</span></span>

- <span data-ttu-id="b93d9-164">Määratlege tingimused, mis määravad, millal tuleb dokumendi loomise protsess peatada.</span><span class="sxs-lookup"><span data-stu-id="b93d9-164">Define conditions that determine when a document creation process must be stopped.</span></span>
- <span data-ttu-id="b93d9-165">Määrake avaldised, mis loovad kasutajale sõnumeid peatatud protsesside kohta või heidavad käivitamislogi sõnumeid aruande loomise protsessi jätkamise kohta.</span><span class="sxs-lookup"><span data-stu-id="b93d9-165">Specify expressions that either create messages for the user about stopped processes or throw execution log messages about the continuing process of report generation.</span></span>
- <span data-ttu-id="b93d9-166">Määrake loodavate elektrooniliste dokumentide failinimed ja juhtige nende loomise tingimusi.</span><span class="sxs-lookup"><span data-stu-id="b93d9-166">Specify the file names of generating electronic documents, and control the conditions of their creation.</span></span>

<span data-ttu-id="b93d9-167">Iga protsessi voo juhtimise reegel on koostatud üksiku kinnitusena.</span><span class="sxs-lookup"><span data-stu-id="b93d9-167">Each rule of the process flow control is designed as an individual validation.</span></span> <span data-ttu-id="b93d9-168">Järgmisel joonisel on seda tüüpi kinnitus.</span><span class="sxs-lookup"><span data-stu-id="b93d9-168">The following illustration shows a validation of this type.</span></span> <span data-ttu-id="b93d9-169">Siin on selles näites oleva konfiguratsiooni selgitus.</span><span class="sxs-lookup"><span data-stu-id="b93d9-169">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="b93d9-170">Kinnitamist hinnatakse, kui XML-faili loomisel luuakse **INSTAT**-sõlm.</span><span class="sxs-lookup"><span data-stu-id="b93d9-170">The validation is evaluated when the **INSTAT** node is created during generation of the XML file.</span></span>
- <span data-ttu-id="b93d9-171">Kui kannete loend on tühi, lõpetab kinnitamine käivitamisprotsessi ja tagastab väärtuse **FALSE**.</span><span class="sxs-lookup"><span data-stu-id="b93d9-171">If the list of transactions is empty, the validation stops the execution process and returns **FALSE**.</span></span>
- <span data-ttu-id="b93d9-172">Kinnitamine annab tõrketeate, mis sisaldab SYS70894 teksti kasutaja eelistatud keeles.</span><span class="sxs-lookup"><span data-stu-id="b93d9-172">The validation returns an error message that includes the text of label SYS70894 in the user's preferred language.</span></span>

<span data-ttu-id="b93d9-173">[![Kinnitamine](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span><span class="sxs-lookup"><span data-stu-id="b93d9-173">[![Validation](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span></span>

<span data-ttu-id="b93d9-174">ER-i valemikoostajat saab kasutada ka faili nime loomiseks loodavale elektroonilisele dokumendile ja faili loomise protsessi juhtimiseks.</span><span class="sxs-lookup"><span data-stu-id="b93d9-174">The ER formula designer can also be used to generate a file name for a generating electronic document and to control the file creation process.</span></span> <span data-ttu-id="b93d9-175">Järgmisel joonisel on seda tüüpi protsessi voo juhtimise kujundus.</span><span class="sxs-lookup"><span data-stu-id="b93d9-175">The following illustration shows the design of a process flow control of this type.</span></span> <span data-ttu-id="b93d9-176">Siin on selles näites oleva konfiguratsiooni selgitus.</span><span class="sxs-lookup"><span data-stu-id="b93d9-176">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="b93d9-177">Andmeallika **model.Intrastat** kirjete loend on jagatud partiideks.</span><span class="sxs-lookup"><span data-stu-id="b93d9-177">The list of records from the **model.Intrastat** data source is divided into batches.</span></span> <span data-ttu-id="b93d9-178">Iga partii sisaldab 1000 kirjet.</span><span class="sxs-lookup"><span data-stu-id="b93d9-178">Each batch contains up to 1,000 records.</span></span>
- <span data-ttu-id="b93d9-179">Väljund loob zip-faili, mis sisaldab ühte XML-vormingus faili iga loodud partii kohta.</span><span class="sxs-lookup"><span data-stu-id="b93d9-179">The output creates a zip file that contains one file in XML format for every batch that was created.</span></span>
- <span data-ttu-id="b93d9-180">Avaldis annab vastuseks failinime loodavatele elektroonilistele dokumentidele, liites faili nime ja failinime laiendi.</span><span class="sxs-lookup"><span data-stu-id="b93d9-180">An expression returns a file name for generating electronic documents by concatenating the file name and the file name extension.</span></span> <span data-ttu-id="b93d9-181">Teise partii ja kõikide järgnevate partiide puhul sisaldab faili nimi järelliitena partii ID-d.</span><span class="sxs-lookup"><span data-stu-id="b93d9-181">For the second batch and all subsequent batches, the file name contains the batch ID as a suffix.</span></span>
- <span data-ttu-id="b93d9-182">Avaldis lubab (andes vatuseks väärtuse **TRUE**) faili loomise protsessi partiidele, mis sisaldavad vähemalt ühte kirjet.</span><span class="sxs-lookup"><span data-stu-id="b93d9-182">An expression enables (by returning **TRUE**) the file creation process for batches that contain at least one record.</span></span>

<span data-ttu-id="b93d9-183">[![Protsessi voo juhtimine](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span><span class="sxs-lookup"><span data-stu-id="b93d9-183">[![Process flow control](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span></span>

## <a name="document-content-control"></a><a name="Enabled"></a><span data-ttu-id="b93d9-184">Dokumendi sisu juhtelement</span><span class="sxs-lookup"><span data-stu-id="b93d9-184">Document content control</span></span>

<span data-ttu-id="b93d9-185">ER-valemi koostajaga saab seadistada väljendeid, millega valitakse, mis andmeid pannakse käitusajal loodud elektroonilistesse dokumentidesse.</span><span class="sxs-lookup"><span data-stu-id="b93d9-185">The ER formula designer can be used to configure expressions that control what data will be put into generated electronic documents at runtime.</span></span> <span data-ttu-id="b93d9-186">Väljendid võivad lubada või keelata vormingu teatud elementide väljundit vastavalt töödeldavatele andmetele ja seadistatud loogikale.</span><span class="sxs-lookup"><span data-stu-id="b93d9-186">The expressions can enable or disable the output of specific elements of the format, depending on processing data and configured logic.</span></span> <span data-ttu-id="b93d9-187">Neid väljendeid saab sisestada ühes vormingus elemendi jaoks lehe **Tegevuste kujundaja** vahekaardi **Vastendamine** väljal **Lubatud**.</span><span class="sxs-lookup"><span data-stu-id="b93d9-187">These expressions can be entered for a single format element in the **Enabled** field on the **Mapping** tab of the **Operations designer** page.</span></span> <span data-ttu-id="b93d9-188">Saate sisestada avaldisi loogika tingimusena, mis tagastab väärtuse *Kahendmuutuja*.</span><span class="sxs-lookup"><span data-stu-id="b93d9-188">You can enter the expressions as a logic condition that returns a *Boolean* value:</span></span>

- <span data-ttu-id="b93d9-189">Kui tingimus annab tulemuse **True**, käitatakse praegust vormingu elementi.</span><span class="sxs-lookup"><span data-stu-id="b93d9-189">If the condition returns **True**, the current format element is run.</span></span>
- <span data-ttu-id="b93d9-190">Kui tingimus annab tulemuse **False**, jäetakse praegune vormingu element vahele.</span><span class="sxs-lookup"><span data-stu-id="b93d9-190">If the condition returns **False**, the current format element is skipped.</span></span>

<span data-ttu-id="b93d9-191">Järgmisel joonisel on näidatud seda tüüpi avaldised.</span><span class="sxs-lookup"><span data-stu-id="b93d9-191">The following illustration shows expressions of this type.</span></span> <span data-ttu-id="b93d9-192">(Näitena on kasutatud Microsofti pakutavat **ISO20022 krediidiedastuse (NO)** versiooni 11.12.11 vormingu seadistust). **XMLHeader** vormingu komponent on konfigureeritud kirjeldama krediidi edastamise sõnumi ülesehitust vastavalt ISO 20022 XML sõnumi standarditele.</span><span class="sxs-lookup"><span data-stu-id="b93d9-192">(Version 11.12.11 of the **ISO20022 Credit transfer (NO)** format configuration that is provided by Microsoft is used as an example.) The **XMLHeader** format component is configured to describe the structure of the credit transfer message according to the ISO 20022 XML message standards.</span></span> <span data-ttu-id="b93d9-193">Vormingu komponent **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** on konfigureeritud lisama XML elemendi **Ustrd** loodud sõnumile ja panema rahaülekande teabe struktureerimata vormingus järgmiste XML elementide tekstina.</span><span class="sxs-lookup"><span data-stu-id="b93d9-193">The **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** format component is configured to add the **Ustrd** XML element to the generated message and to put the remittance information in an unstructured format as text of the following XML elements:</span></span>

- <span data-ttu-id="b93d9-194">Komponenti **PaymentNotes** kasutatakse maksemärkmete teksti loomiseks.</span><span class="sxs-lookup"><span data-stu-id="b93d9-194">The **PaymentNotes** component is used to generate the text of payment notes.</span></span>
- <span data-ttu-id="b93d9-195">Komponent **DelimitedSequence** loob komaga eraldatud arve numbreid, mida kasutatakse praeguse krediidiedastuse tasakaalustamiseks.</span><span class="sxs-lookup"><span data-stu-id="b93d9-195">The **DelimitedSequence** component generates comma-separated invoice numbers that are used to settle the current credit transfer.</span></span>

<span data-ttu-id="b93d9-196">[![Komponendid PaymentNotes ja DelimitedSequence](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span><span class="sxs-lookup"><span data-stu-id="b93d9-196">[![PaymentNotes and DelimitedSequence components](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="b93d9-197">Komponendid **PaymentNotes** ja **DelimitedSequence** sildistatakse küsimärki kasutades.</span><span class="sxs-lookup"><span data-stu-id="b93d9-197">The **PaymentNotes** and **DelimitedSequence** components are labeled by using a question mark.</span></span> <span data-ttu-id="b93d9-198">Küsimärk näitab, et komponendi kasutamine on tingimuslik.</span><span class="sxs-lookup"><span data-stu-id="b93d9-198">A question mark indicates that the use of a component is conditional.</span></span> <span data-ttu-id="b93d9-199">Sellisel juhul põhineb komponentide kasutamine järgmistel kriteeriumitel.</span><span class="sxs-lookup"><span data-stu-id="b93d9-199">In this case, use of the components is based on the following criteria:</span></span>
>
> - <span data-ttu-id="b93d9-200">Väljend `@.PaymentsNotes <> ""`, mis on määratletud komponendi **PaymentNotes** võimaldab (annab tulemuse **TRUE**) XML elemendi **Ustrd** täitmist maksemärkmete tekstiga, kui see tekst pole praeguse krediidiedastuse jaoks tühi.</span><span class="sxs-lookup"><span data-stu-id="b93d9-200">The `@.PaymentsNotes <> ""` expression that is defined for the **PaymentNotes** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with the text of payment notes, if that text isn't blank for the current credit transfer.</span></span>
>
>    <span data-ttu-id="b93d9-201">[![Komponendi PaymentNotes avaldis](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span><span class="sxs-lookup"><span data-stu-id="b93d9-201">[![Expression for the PaymentNotes component](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span></span>
>
> - <span data-ttu-id="b93d9-202">Avaldis `@.PaymentsNotes = ""`, mis määratletakse komponendi **DelimitedSequence** jaoks, võimaldab (annab tulemuse **TRUE**) XML elemendi **Ustrd** täitmist komaga eraldatud arve numbrite loendiga, mida kasutatakse praeguse krediidiedastuse arveldamiseks, kui selle krediidiedastuse maksemärkmete tekst on tühi.</span><span class="sxs-lookup"><span data-stu-id="b93d9-202">The `@.PaymentsNotes = ""` expression that is defined for the **DelimitedSequence** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with a comma-separated list of the invoice numbers that are used to settle the current credit transfer, if the text of payment notes for that credit transfer is blank.</span></span>
>
>    <span data-ttu-id="b93d9-203">[![Komponendi DelimitedSequence avaldis](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span><span class="sxs-lookup"><span data-stu-id="b93d9-203">[![Expression for the DelimitedSequence component](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span></span>
> 
> <span data-ttu-id="b93d9-204">Vastavalt sellele seadistusele sisaldab iga deeboitori makse (XML-elemendi **Ustrd**) jaoks loodud sõnum kas maksemärkmete teksti või sellise teksti puudumisel komaga eraldatud arve numbreid, mida kasutatakse makse arveldamiseks.</span><span class="sxs-lookup"><span data-stu-id="b93d9-204">Based on this setup, the message that is generated for each debtor payment, the **Ustrd** XML element, will contain either the text of payment notes or, when that text is blank, a comma-separated list of the invoice numbers that are used to settle the payment.</span></span>

## <a name="validation-of-configured-formulas"></a><a name="TestFormula"></a><span data-ttu-id="b93d9-205">Konfigureeritud valemite valideerimine</span><span class="sxs-lookup"><span data-stu-id="b93d9-205">Validation of configured formulas</span></span>

<span data-ttu-id="b93d9-206">Lehel **Valemi kujundaja** valige suvand **Katse**, et valideerida konfigureeritud valemi töötamisviis.</span><span class="sxs-lookup"><span data-stu-id="b93d9-206">On the **Formula designer** page, select **Test** to validate how the configured formula works.</span></span>

<span data-ttu-id="b93d9-207">[![Valemi valideerimiseks suvandi Katse valimine](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span><span class="sxs-lookup"><span data-stu-id="b93d9-207">[![Selecting Test to validate a forumula](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span></span>

<span data-ttu-id="b93d9-208">Kui nõutavad on valemi argumentide väärtused, saate avada dialoogiboksi **Testavaldis** lehelt **Valemikoostaja**.</span><span class="sxs-lookup"><span data-stu-id="b93d9-208">When the values of formula arguments are required, you can open the **Test expression** dialog box from the **Formula designer** page.</span></span> <span data-ttu-id="b93d9-209">Enamikul juhtudel tuleb need argumendid käsitsi määratleda, kuna konfigureeritud sidumisi kujundamise ajal ei käitata.</span><span class="sxs-lookup"><span data-stu-id="b93d9-209">In most cases, these arguments must be manually defined, because the configured bindings aren't run at design time.</span></span> <span data-ttu-id="b93d9-210">Vahekaart **Katsetulemus** lehel **Valemi kujundaja** näitab konfigureeritud valemi käivitamise tulemust.</span><span class="sxs-lookup"><span data-stu-id="b93d9-210">The **Test result** tab on the **Formula designer** page shows the result from execution of the configured formula.</span></span>

<span data-ttu-id="b93d9-211">Järgmine näide näitab, kuidas saate testida väliskaubanduse domeeni jaoks konfigureeritud valemit veendumaks, et Intrastati kaubakood sisaldaks ainult numbreid.</span><span class="sxs-lookup"><span data-stu-id="b93d9-211">The following example shows how you can test the formula that is configured for the foreign trade domain to make sure that the Intrastat commodity code contains only digits.</span></span>

<span data-ttu-id="b93d9-212">Selle valemi testimisel saate kasutada dialoogiboksi **Testavaldis**, et määrata testimiseks Intrastati kaubakoodi väärtus.</span><span class="sxs-lookup"><span data-stu-id="b93d9-212">When you test this formula, you can use the **Test expression** dialog box to specify the value of the Intrastat commodity code for testing.</span></span>

<span data-ttu-id="b93d9-213">[![Testimiseks Intrastati kaubakoodi määramine](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span><span class="sxs-lookup"><span data-stu-id="b93d9-213">[![Specifying the Intrastat commodity code for testing](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span></span>

<span data-ttu-id="b93d9-214">Pärast seda, kui määrate Intrastati kaubakoodi ja valite **OK**, kuvatakse vahekaardil **Katsetulemus** lehel **Valemi koostaja** konfigureeritud valemi käivitamise tulemus.</span><span class="sxs-lookup"><span data-stu-id="b93d9-214">After you specify the Intrastat commodity code and select **OK**, the **Test result** tab on the **Formula designer** page shows the result of execution of the configured formula.</span></span> <span data-ttu-id="b93d9-215">Seejärel saate hinnata, kas tulemus on vastuvõetav.</span><span class="sxs-lookup"><span data-stu-id="b93d9-215">You can then evaluate whether the result is acceptable.</span></span> <span data-ttu-id="b93d9-216">Kui tulemus ei ole vastuvõetav, saate valemit värskendada ja seda uuesti katsetada.</span><span class="sxs-lookup"><span data-stu-id="b93d9-216">If the result isn't acceptable, you can update the formula and test it again.</span></span>

<span data-ttu-id="b93d9-217">[![Katsetulemus](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span><span class="sxs-lookup"><span data-stu-id="b93d9-217">[![Test result](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span></span>

<span data-ttu-id="b93d9-218">Osasid valemeid ei saa kujundamise ajal testida.</span><span class="sxs-lookup"><span data-stu-id="b93d9-218">Some formulas can't be tested at design time.</span></span> <span data-ttu-id="b93d9-219">Näiteks võib valem tagastada andmetüübi tulemuse, mida ei saa vahekaardil **Katsetulemus** kuvada. Sellisel juhul kuvatakse tõrketeade, mis teatab, et valemit ei saa katsetada.</span><span class="sxs-lookup"><span data-stu-id="b93d9-219">For example, a formula might return a result of a data type that can't be shown on the **Test result** tab. In this case, you receive an error message that states that the formula can't be tested.</span></span>

<span data-ttu-id="b93d9-220">[![Tõrketeade](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span><span class="sxs-lookup"><span data-stu-id="b93d9-220">[![Error message](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="b93d9-221">Lisaressursid</span><span class="sxs-lookup"><span data-stu-id="b93d9-221">Additional resources</span></span>

- [<span data-ttu-id="b93d9-222">Elektroonilise aruandluse ülevaade</span><span class="sxs-lookup"><span data-stu-id="b93d9-222">Electronic Reporting overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="b93d9-223">Elektroonilise aruandluse valemi keel</span><span class="sxs-lookup"><span data-stu-id="b93d9-223">Electronic reporting formula language</span></span>](er-formula-language.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]