---
title: ER-i migratsiooni puhastamine
description: Selles teemas selgitatakse, kuidas saate kasutada ER-mallidega seotud probleemide lahendamiseks ER-i migratsiooni puhastamise funktsiooni.
author: NickSelin
manager: AnnBe
ms.date: 04/29/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERSolutionTable, ERWorkspace, ERParameters, ERMigrationCleanup
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-01-01
ms.dyn365.ops.version: AX 8.0.0
ms.openlocfilehash: 090badd48785dfacf5942426d0fe53629f3c0cda
ms.sourcegitcommit: 5de75c61c33e57c813944f1ab6100aceb020d432
ms.translationtype: HT
ms.contentlocale: et-EE
ms.lasthandoff: 04/29/2020
ms.locfileid: "3321798"
---
# <a name="er-migration-cleanup"></a><span data-ttu-id="a735c-103">ER-i migratsiooni puhastamine</span><span class="sxs-lookup"><span data-stu-id="a735c-103">ER migration cleanup</span></span> 

[!include[banner](../includes/banner.md)]

<span data-ttu-id="a735c-104">Kui haldate oma Finance'i eksemplare, võite valida praeguse eksemplari siirdamise teise asukohta.</span><span class="sxs-lookup"><span data-stu-id="a735c-104">When you manage your Finance instances, you might decide to migrate your current instance to another location.</span></span> <span data-ttu-id="a735c-105">Näiteks võite oma tootmiseksemplari migreerida uude liivakastikeskkonda.</span><span class="sxs-lookup"><span data-stu-id="a735c-105">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="a735c-106">Kui konfigureerisite elektroonilise aruandluse (ER) raamistiku talletama malle Microsoft Azure'i bloobimälus, viitab tabel **DocuValue** uues liivakastikeskkonnas bloobimälu eksemplarile tootmiskeskkonnas.</span><span class="sxs-lookup"><span data-stu-id="a735c-106">If you configured the Electronic reporting (ER) framework to store templates in Microsoft Azure Blob storage, the **DocuValue** table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="a735c-107">Sellele eksemplarile ei pääse aga juurde liivakastikeskkonnast, sest migreerimisprotsess ei toeta artefaktide migreerimist bloobimälus.</span><span class="sxs-lookup"><span data-stu-id="a735c-107">However, this instance can't be accessed from the sandbox environment because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="a735c-108">Selle asemel eeldatakse, et viitate uues liivakastikeskkonnas sellele liivakastikeskkonna bloobimälu eksemplarile, mis ei oma veel ER-malle.</span><span class="sxs-lookup"><span data-stu-id="a735c-108">Rather, it's expected that in the new sandbox environment, you refer to the instance of Blob storage in the sandbox environment that does not yet obtain the ER templates.</span></span>

<span data-ttu-id="a735c-109">Kui proovite käitada ER-vormingut, mis kasutab malli äridokumentide loomiseks, ilmneb erand ja teid teavitatakse puuduvast mallist.</span><span class="sxs-lookup"><span data-stu-id="a735c-109">If you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="a735c-110">Samuti soovitatakse teil kasutada ER-puhastuse suvandit, et kustutada malli sisaldav ER-vormingu konfiguratsioon ja see seejärel uuesti importida.</span><span class="sxs-lookup"><span data-stu-id="a735c-110">You're also guided to use the ER migration cleanup option to delete and then re-import the ER format configuration that contains the template.</span></span>

<span data-ttu-id="a735c-111">[![ER-vormingu käitamine](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span><span class="sxs-lookup"><span data-stu-id="a735c-111">[![Running an ER format](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span></span>

<span data-ttu-id="a735c-112">Sarnane tõrge tekib siis, kui liigute lehele **Konfiguratsioonid** (**Organisatsiooni haldus** \> **Elektrooniline aruandlus** \> **Konfiguratsioonid**) ja proovite konfiguratsioonipuus kustutada malli kasutava ER-vormingu konfiguratsiooni.</span><span class="sxs-lookup"><span data-stu-id="a735c-112">You will receive a similar error if you navigate to the **Configurations** page (**Organization administration** \> **Electronic reporting** \> **Configurations**) and in the configurations tree, try to delete an ER format configuration that uses a template.</span></span>

<span data-ttu-id="a735c-113">[![ER-vormingu kustutamine](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span><span class="sxs-lookup"><span data-stu-id="a735c-113">[![Deletion an ER format](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span></span>

<span data-ttu-id="a735c-114">Ligipääsmatute ER-mallidega seotud probleemide lahendamiseks järgige järgmisi etappe.</span><span class="sxs-lookup"><span data-stu-id="a735c-114">Complete the following steps to resolve issues with ER templates that you are unable to access.</span></span>

1.  <span data-ttu-id="a735c-115">Avage leht **Organisatsiooni haldus** \> **Perioodiline** \> **Migratsiooni puhastus**.</span><span class="sxs-lookup"><span data-stu-id="a735c-115">Go to **Organization administration** \> **Periodic** \> **Migration cleanup** page.</span></span>
2.  <span data-ttu-id="a735c-116">Valige ER-vormingu konfiguratsioon, mida ei saa käitada ega kustutada.</span><span class="sxs-lookup"><span data-stu-id="a735c-116">Select an ER format configuration that can’t be executed or deleted.</span></span>
3.  <span data-ttu-id="a735c-117">Valige **Kustuta**.</span><span class="sxs-lookup"><span data-stu-id="a735c-117">Select **Delete**.</span></span>
4.  <span data-ttu-id="a735c-118">Kinnitage valitud ER-vormingu konfiguratsiooni kustutamine.</span><span class="sxs-lookup"><span data-stu-id="a735c-118">Confirm the deletion of the selected ER format configuration.</span></span>
5.  <span data-ttu-id="a735c-119">[Importige](download-electronic-reporting-configuration-lcs.md) kustutatud ER-vormingu konfiguratsioon praegusesse Finance'i eksemplari.</span><span class="sxs-lookup"><span data-stu-id="a735c-119">[Import](download-electronic-reporting-configuration-lcs.md) the deleted ER format configuration to the current Finance instance.</span></span>

## <a name="applicability"></a><span data-ttu-id="a735c-120">Kohaldatavus</span><span class="sxs-lookup"><span data-stu-id="a735c-120">Applicability</span></span>

> <span data-ttu-id="a735c-121">[Oluline] Suvand **Migratsiooni puhastamine** on suunatud vaid sellistele ER-vormingu konfiguratsioonidele, mis sisaldavad ligipääsmatuid ER-vorminguid.</span><span class="sxs-lookup"><span data-stu-id="a735c-121">[Important] The **Migration cleanup** option is targeted only for ER format configurations that contain non-accessible ER templates.</span></span> <span data-ttu-id="a735c-122">Kui kustutate suvandi **Migratsiooni puhastus** abil ER-vormingu konfiguratsiooni, siis kustutab elektrooniline aruandlus konfiguratsiooni artefaktidega seotud mallid ainult rakenduse andmebaasis.</span><span class="sxs-lookup"><span data-stu-id="a735c-122">When you delete an ER format configuration by using the **Migration cleanup** option, ER deletes the templates that are related to the configuration artifacts in the only application database.</span></span> <span data-ttu-id="a735c-123">Vastavate füüsiliste failide olemasolu bloobimälus ei kontrollita.</span><span class="sxs-lookup"><span data-stu-id="a735c-123">The existence of the appropriate physical files in Blob storage are not validated.</span></span> <span data-ttu-id="a735c-124">Eeldatakse, et ühtki sellist faili ei eksisteeri.</span><span class="sxs-lookup"><span data-stu-id="a735c-124">Instead, it is assumed that there are none.</span></span> <span data-ttu-id="a735c-125">Seega ei tohiks kasutada suvandit **Migratsiooni puhastus** lehe **Konfiguratsioonid** toodud ER-i konfiguratsiooni kustutamise suvandi alternatiivina.</span><span class="sxs-lookup"><span data-stu-id="a735c-125">Therefore, do not use the **Migration cleanup** option as an alternative to the ER configuration deletion option on the **Configurations** page.</span></span> <span data-ttu-id="a735c-126">Kasutage suvandit **Migratsiooni puhastus** vaid siis, kui lehel **Konfiguratsioonid** toodud ER-i konfiguratsiooni kustutamise suvandi kasutamine nurjus.</span><span class="sxs-lookup"><span data-stu-id="a735c-126">Use the **Migration cleanup** option only when the ER configuration deletion option on the **Configurations** page failed.</span></span>
>
> <span data-ttu-id="a735c-127">Kui kustutate suvandi **Migratsiooni puhastus** abil ER-vormingu konfiguratsiooni olukorras, kus viidatud mall on bloobimälus saadaval, siis kustutate ainult seotud konfiguratsiooni artefaktid rakenduse andmebaasis.</span><span class="sxs-lookup"><span data-stu-id="a735c-127">If you use the **Migration cleanup** option to delete an ER format configuration when the referred template is available in the Blob storage, you only delete related configuration artifacts in the application database.</span></span> <span data-ttu-id="a735c-128">Malli füüsiline fail bloobimälus jääb alles.</span><span class="sxs-lookup"><span data-stu-id="a735c-128">The physical file of the template in the Blob storage remains.</span></span> <span data-ttu-id="a735c-129">Faili ülekirjutamine bloobimälus ei ole enam lubatud.</span><span class="sxs-lookup"><span data-stu-id="a735c-129">File overwriting in Blob storage is no longer allowed.</span></span> <span data-ttu-id="a735c-130">Lisateavet vt [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span><span class="sxs-lookup"><span data-stu-id="a735c-130">For more information, see [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span></span> <span data-ttu-id="a735c-131">Lisaks ei saa te selles keskkonnas migratsiooni puhastust kasutades kustutatud konfiguratsioone enam uuesti importida.</span><span class="sxs-lookup"><span data-stu-id="a735c-131">Additionally, you will no longer be able to re-import the configurations deleted by using the Migration cleanup in this environment.</span></span> <span data-ttu-id="a735c-132">Probleemi lahendamiseks peate vastava faili bloobimälus käsitsi tuvastama ja kustutama.</span><span class="sxs-lookup"><span data-stu-id="a735c-132">To resolve this issue, you need to find the corresponding file in Blob storage and manually delete it.</span></span>

<span data-ttu-id="a735c-133">[![ER-vormingu importimine](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span><span class="sxs-lookup"><span data-stu-id="a735c-133">[![Importing an ER format](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span></span>

<span data-ttu-id="a735c-134">Sarnane probleem võib tekkida juhul, kui migreerite oma rakenduse eksemplari muude asukohta, mida on kasutatud migratsiooni sihtkohana enam kui üks kord ning mille kohta on bloobimälus juba ER-malli failid olemas.</span><span class="sxs-lookup"><span data-stu-id="a735c-134">A similar issue may occur if you migrate your application instance to another location that has been used as a migration target more than once and for which the Blob storage already contains ER template files.</span></span>

<span data-ttu-id="a735c-135">Kuna teil võib olla mitu ER-vormingu konfiguratsiooni, võib see protsess olla aeganõudev.</span><span class="sxs-lookup"><span data-stu-id="a735c-135">Because you can have several ER format configurations, this process can be time consuming.</span></span> <span data-ttu-id="a735c-136">Seega tuleks katkiste viidetega mallide automaatseks taastamiseks eelistada [ER-mallide varundusfunktsiooni](er-backup-storage-templates.md).</span><span class="sxs-lookup"><span data-stu-id="a735c-136">Therefore, using the [Backup storage of ER templates](er-backup-storage-templates.md) feature to automatically recover templates with broken references is preferred.</span></span>
