---
title: Jaemüügikanalite fiskaalüksuse integratsiooni ülevaade
description: Selles teemas antakse ülevaade rakenduses Dynamics 365 Retail saadaolevatest fiskaalüksuse integratsioonivõimalustest.
author: josaw
manager: annbe
ms.date: 02/01/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailFunctionalityProfile, RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: Retail
ms.author: v-kikozl
ms.search.validFrom: 2019-1-16
ms.dyn365.ops.version: 10
ms.openlocfilehash: 03853e1f80bd32c1dfe5cfcbcd77e79168f26249
ms.sourcegitcommit: 57bc7e17682e2edb5e1766496b7a22f4621819dd
ms.translationtype: HT
ms.contentlocale: et-EE
ms.lasthandoff: 11/18/2019
ms.locfileid: "2812303"
---
# <a name="overview-of-fiscal-integration-for-retail-channels"></a><span data-ttu-id="dc2ce-103">Jaemüügikanalite fiskaalüksuse integratsiooni ülevaade</span><span class="sxs-lookup"><span data-stu-id="dc2ce-103">Overview of fiscal integration for Retail channels</span></span>

[!include [banner](../includes/banner.md)]

## <a name="introduction"></a><span data-ttu-id="dc2ce-104">Sissejuhatus</span><span class="sxs-lookup"><span data-stu-id="dc2ce-104">Introduction</span></span>

<span data-ttu-id="dc2ce-105">Selles teemas antakse ülevaade rakenduses Dynamics 365 Retail saadaolevatest fiskaalüksuse integratsioonivõimalustest.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-105">This topic is an overview of the fiscal integration capabilities that are available in Dynamics 365 Retail.</span></span> <span data-ttu-id="dc2ce-106">Fiskaalüksuse integratsioon hõlmab integratsiooni erinevate fiskaalseadmete ja -teenustega, mis võimaldavad jaemüügi fiskaalüksuse registreerimist kooskõlas kohalike rahandusseadustega, mille eesmärk on ennetada maksupettust jaemüügivaldkonnas.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-106">Fiscal integration includes integration with various fiscal devices and services that enable fiscal registration of retail sales in accordance with local fiscal laws that are aimed at preventing tax fraud in the retail industry.</span></span> <span data-ttu-id="dc2ce-107">Tavalised stsenaariumid, mida fiskaalüksuse integratsioon hõlmab, on järgmised.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-107">Here are some typical scenarios that can be covered by using fiscal integration:</span></span>

- <span data-ttu-id="dc2ce-108">Jaemüügi registreerimine fiskaalseadmes, mis on ühendatud Reatil POS-iga, nagu fiskaalprinter, ja kliendi jaoks fiskaalsissetuleku printimine.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-108">Register a retail sale on a fiscal device that is connected to Retail point of sale (POS), such as a fiscal printer, and print a fiscal receipt for the customer.</span></span>
- <span data-ttu-id="dc2ce-109">Retail POS-is lõpule viidud müükide ja tagastustega seotud teabe turvaline edastamine välisesse veebiteenusesse, mida käitab maksuamet.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-109">Securely submit information that is related to sales and returns that are completed in Retail POS to an external web-service that is operated by the tax authority.</span></span>
- <span data-ttu-id="dc2ce-110">Müügi kandeandmete muutmatuse tagamine digitaalallkirjade abil.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-110">Help guarantee inalterability of sales transaction data through digital signatures.</span></span>

<span data-ttu-id="dc2ce-111">Fiskaalüksuse integratsiooni funktsioon on raamistik, mis pakub ühtset lahendust integratsiooni edasiarenduseks ja kohandamiseks Retail POS-i ning fiskaalseadmete ja -teenuste vahel.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-111">The fiscal integration functionality is a framework that provides a common solution for further development and customization of the integration between Retail POS and fiscal devices and services.</span></span> <span data-ttu-id="dc2ce-112">Funktsioon hõlmab ka fiskaalüksuse integratsiooni näidiseid, mis toetavad jaemüügi põhistsenaariume kindlate riikide või regioonide kohta ja töötavad kindlate fiskaalseadmete või -teenustega.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-112">The functionality also includes fiscal integration samples that support basic retail scenarios for specific countries or regions, and that work with specific fiscal devices or services.</span></span> <span data-ttu-id="dc2ce-113">Fiskaalüksuse integratsiooni näidis koosneb mitmest Retaili komponendi laiendusest ja sisaldub tarkvara arenduskomplektis (SDK).</span><span class="sxs-lookup"><span data-stu-id="dc2ce-113">A fiscal integration sample consists of several extensions of Retail components and is included in the software development kit (SDK).</span></span> <span data-ttu-id="dc2ce-114">Lisateavet fiskaalüksuse integratsiooni näidiste kohta vt teemast [Fiskaalüksuse integreerimise näidised Retail SDK-s](#fiscal-integration-samples-in-the-retail-sdk).</span><span class="sxs-lookup"><span data-stu-id="dc2ce-114">For more information about the fiscal integration samples, see [Fiscal integration samples in the Retail SDK](#fiscal-integration-samples-in-the-retail-sdk).</span></span> <span data-ttu-id="dc2ce-115">Teavet Retail SDK installimise ja kasutamise kohta vt teemast [Retaili tarkvara arenduskomplekti (SDK) arhitektuur](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span><span class="sxs-lookup"><span data-stu-id="dc2ce-115">For information about how to install and use the Retail SDK, see [Retail software development kit (SDK) architecture](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span></span>

<span data-ttu-id="dc2ce-116">Selleks et toetada muid stsenaariume, mida fiskaalüksuse integratsiooni näidis ei toeta, integreerida Retail POS muude fiskaalseadmete või -teenustega või täita muude riikide või regioonide nõudeid, peate kas laiendama olemasolevat fiskaalüksuse integratsiooni näidist või looma uue näidise, kasutades näitena olemasolevat näidist.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-116">To support other scenarios that aren't supported by a fiscal integration sample, to integrate Retail POS with other fiscal devices or services, or to cover requirements of other countries or regions, you must either extend an existing fiscal integration sample or create a new sample by using an existing sample as an example.</span></span>

## <a name="fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices"></a><span data-ttu-id="dc2ce-117">Fiskaalüksuse registreerimisprotsess ja fiskaalüksuse integratsiooni näidised fiskaalseadmete puhul</span><span class="sxs-lookup"><span data-stu-id="dc2ce-117">Fiscal registration process and fiscal integration samples for fiscal devices</span></span>

<span data-ttu-id="dc2ce-118">Fiskaalüksuse registreerimisprotsess Retail POS-is võib hõlmata üht või mitut etappi.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-118">A fiscal registration process in Retail POS can consist of one or more steps.</span></span> <span data-ttu-id="dc2ce-119">Iga etapp hõlmab kindlate jaemüügikannete või -sündmuste fiskaalüksuse registreerimist ühes fiskaalseadmes või -teenuses.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-119">Each step involves fiscal registration of specific retail transactions or events in one fiscal device or service.</span></span> <span data-ttu-id="dc2ce-120">Riistvarajaamaga ühendatud fiskaalseadmes toimuvas fiskaalüksuse registreerimises osalevad järgmised lahenduse komponendid.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-120">The following solution components participate in the fiscal registration in a fiscal device that is connected to a Hardware station:</span></span>

- <span data-ttu-id="dc2ce-121">**Commerce runtime'i (CRT) laiendus** – see komponent serialiseerib jaemüügikannete/-sündmuste andmed vormingus, mida kasutatakse ka fiskaalseadmega suhtlemiseks, sõelub vastused fiskaalseadmest ja talletab need kanali andmebaasi.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-121">**Commerce runtime (CRT) extension** – This component serializes retail transaction/event data in the format that is also used for interaction with the fiscal device, parses responses from the fiscal device, and stores the responses in the channel database.</span></span> <span data-ttu-id="dc2ce-122">Laiendus määratleb ka kindlad kanded ja sündmused, mis tuleb registreerida.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-122">The extension also defines the specific transactions and events that must be registered.</span></span> <span data-ttu-id="dc2ce-123">Seda komponenti nimetatakse sageli *fiskaaldokumendi pakkujaks*.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-123">This component is often referred to as a *fiscal document provider*.</span></span>
- <span data-ttu-id="dc2ce-124">**Riistavarajaama laiendus** – see komponent lähtestab suhtluse fiskaalseadmega, saadab fiskaalseadmele taotlused ja otsekäsud fiskaaldokumendist eraldatud jaemüügikande/-sündmuse andmete põhjal ning võtab vastused fiskaalseadmest vastu.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-124">**Hardware station extension** – This component initializes the communication with the fiscal device, sends requests and direct commands to the fiscal device based on the retail transaction/event data that is extracted from the fiscal document, and receives responses from the fiscal device.</span></span> <span data-ttu-id="dc2ce-125">Seda komponenti nimetatakse sageli *fiskaalkonnektoriks*.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-125">This component is often referred to as a *fiscal connector*.</span></span>

<span data-ttu-id="dc2ce-126">Fiskaalüksuse integratsiooni näidis fiskaalseadme puhul sisaldab CRT ja riistvarajaama laiendusi vastavalt fiskaaldokumendi pakkuja ja fiskaalkonnektori kohta.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-126">A fiscal integration sample for a fiscal device contains the CRT and Hardware station extensions for a fiscal document provider and a fiscal connector, respectively.</span></span> <span data-ttu-id="dc2ce-127">Samuti sisaldab see järgmisi komponendi konfiguratsioone.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-127">It also contains the following component configurations:</span></span>

- <span data-ttu-id="dc2ce-128">**Fiskaaldokumendi pakkuja konfiguratsiooni** – see konfiguratsioon määratleb fiskaaldokumentide väljundmeetodi vormingu.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-128">**Fiscal document provider configuration** – This configuration defines an output method and a format for fiscal documents.</span></span> <span data-ttu-id="dc2ce-129">See sisaldab ka andmetüüpide vastendust maksude ja makseviiside kohta, et panna Retail POS-ist pärit andmed ühilduma fiskaalseadme püsivaras eelmääratletud väärtustega.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-129">It also contains a data mapping for taxes and payment methods, to make data from Retail POS compatible with the values that are predefined in the fiscal device firmware.</span></span>
- <span data-ttu-id="dc2ce-130">**Fiskaalkonnektori konfiguratsioon** – see konfiguratsioon määratleb füüsilise suhtluse konkreetse fiskaalseadmega.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-130">**Fiscal connector configuration** – This configuration defines the physical communication with the specific fiscal device.</span></span>

<span data-ttu-id="dc2ce-131">Fiskaalüksuse registreerimise protsess kindla kassaregistri puhul määratletakse vastavate sätetega kassa funktsiooniprofiilis.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-131">A fiscal registration process for a specific POS register is defined by a corresponding setting in the POS functionality profile.</span></span> <span data-ttu-id="dc2ce-132">Lisateavet fiskaalüksuse registreerimisprotsessi, fiskaaldokumendi pakkuja ja fiskaalkonnektori konfiguratsioonide üleslaadimise ning nende parameetrite muutmise kohta vt teemast [Fiskaalüksuse registreerimisprotsessi seadistamine](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span><span class="sxs-lookup"><span data-stu-id="dc2ce-132">For more details about how to configure a fiscal registration process, upload fiscal document provider and fiscal connector configurations, and change their parameters, see [Set up a fiscal registration process](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span></span>

<span data-ttu-id="dc2ce-133">Järgmises näites on toodud tüüpiline fiskaalüksuse registreerimise käivitamise voog fiskaalseadme puhul.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-133">The following example shows a typical fiscal registration execution flow for a fiscal device.</span></span> <span data-ttu-id="dc2ce-134">Voog algab sündmusega kassas (nt müügikande lõpetamine) ja rakendab järgmised etapid.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-134">The flow starts with an event in the POS (for example, finalization of a sales transaction) and implements the following sequence of steps:</span></span>

1. <span data-ttu-id="dc2ce-135">Kassa taotleb CRT-st fiskaaldokumenti.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-135">The POS requests a fiscal document from CRT.</span></span>
2. <span data-ttu-id="dc2ce-136">CRT teeb kindlaks, kas praeguse sündmuse tuleb fiskaalüksus registreerida.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-136">CRT determines whether the current event requires fiscal registration.</span></span>
3. <span data-ttu-id="dc2ce-137">Fiskaalüksuse registreerimisprotsessi põhjal tuvastab CRT fiskaalkonnektori ja vastava fiskaaldokumendi pakkuja, mida fiskaalüksuse registreerimiseks kasutada.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-137">Based on the fiscal registration process settings, CRT identifies a fiscal connector and corresponding fiscal document provider to use for the fiscal registration.</span></span>
4. <span data-ttu-id="dc2ce-138">CRT käitab fiskaaldokumendi pakkujat, mis loob fiskaaldokumendi (nt XML-dokumendi), mis kujutab jaemüügikannet või -sündmust.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-138">CRT runs the fiscal document provider that generates a fiscal document (for example, an XML document) that represents the retail transaction or event.</span></span>
5. <span data-ttu-id="dc2ce-139">Kassa saadab CRT ettevalmistatud dokumendi riistvarajaama.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-139">The POS sends the fiscal document that CRT prepares to a Hardware station.</span></span>
6. <span data-ttu-id="dc2ce-140">Riistvarajaam käitab fiskaalkonnektorit, mis töötleb fiskaaldokumenti ja edastab selle fiskaalseadmesse või -teenusesse.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-140">The Hardware station runs the fiscal connector that processes the fiscal document and communicates it to the fiscal device or service.</span></span>
7. <span data-ttu-id="dc2ce-141">Kassa analüüsib fiskaalseadmest või -teenusest saadud vastust, et teha kindlaks, kas fiskaalüksuse registreerimine õnnestus.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-141">The POS analyzes the response from the fiscal device or service to determine whether the fiscal registration was successful.</span></span>
8. <span data-ttu-id="dc2ce-142">CRT salvestab vastuse kanali andmebaasi.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-142">CRT saves the response to the channel database.</span></span>

<span data-ttu-id="dc2ce-143">![Lahenduse skeem](media/emea-fiscal-integration-solution.png "Lahenduse skeem")</span><span class="sxs-lookup"><span data-stu-id="dc2ce-143">![Solution schema](media/emea-fiscal-integration-solution.png "Solution schema")</span></span>

## <a name="error-handling"></a><span data-ttu-id="dc2ce-144">Tõrketöötlus</span><span class="sxs-lookup"><span data-stu-id="dc2ce-144">Error handling</span></span>

<span data-ttu-id="dc2ce-145">Fiskaalüksuse integratsiooni raamistik pakub fiskaalüksuse registreerimise ajal ilmnevate tõrgete lahendamiseks järgmisi võimalusi.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-145">The fiscal integration framework provides the following options to handle failures during fiscal registration:</span></span>

- <span data-ttu-id="dc2ce-146">**Proovi uuesti** – operaatorid saavad seda valikut kasutada, kui tõrke saab kiiresti lahendada, ja fiskaalüksuse registreerimise võib uuesti käivitada.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-146">**Retry** – Operators can use this option when the failure can be resolved quickly, and the fiscal registration can be rerun.</span></span> <span data-ttu-id="dc2ce-147">Näiteks võib seda valikut kasutada siis, kui fiskaalseade pole ühendatud, fiskaalprinteris pole paberit või fiskaalprinteris on paberiummistus.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-147">For example, this option can be used when the fiscal device isn't connected, the fiscal printer is out of paper, or there is a paper jam in the fiscal printer.</span></span>
- <span data-ttu-id="dc2ce-148">**Tühista** – see valik võimaldab operaatoril praeguse kande või sündmuse fiskaalüksuse registreerimise edasi lükata, kui see nurjub.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-148">**Cancel** – This option lets operators postpone the fiscal registration of the current transaction or event if it fails.</span></span> <span data-ttu-id="dc2ce-149">Kui registreerimine on edasi lükatud, saab operaator tööd kassas jätkata ja teha mis tahes toiminguid, mille jaoks pole fiskaalüksuse registreerimine vajalik.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-149">After the registration is postponed, the operator can continue to work on the POS and can complete any operation that the fiscal registration isn't required for.</span></span> <span data-ttu-id="dc2ce-150">Kui kassas toimub sündmus, mis nõuab fiskaalüksuse registreerimist (nt uue kande avamine), kuvatakse automaatselt tõrketöötluse dialoogiboks, mis teavitab operaatorit, et eelmist kannet ei registreeritud õigesti, ja pakub tõrketöötluse valikud.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-150">When any event that requires the fiscal registration occurs in the POS (for example, a new transaction is opened), the error handling dialog box automatically appears to notify the operator that the previous transaction wasn't correctly registered and to provide the error handling options.</span></span>
- <span data-ttu-id="dc2ce-151">**Jäta vahele** – operaatorid saavad seda valikut kasutada, kui fiskaalüksuse registreerimise saab teatud tingimustes vahele jätta ja kassas tavatoiminguid jätkata.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-151">**Skip** – Operators can use this option when the fiscal registration can be omitted under specific conditions and regular operations can be continued on the POS.</span></span> <span data-ttu-id="dc2ce-152">Näiteks saab seda valikut kasutada, kui müügikannet, mille puhul fiskaalüksuse registreerimine nurjus, saab registreerida spetsiaalsel pabertöölehel.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-152">For example, this option can be used when a sales transaction that the fiscal registration failed for can be registered in a special paper journal.</span></span>
- <span data-ttu-id="dc2ce-153">**Märgi registreerituks** – operaatorid saavad seda valikut kasutada, kui kanne on tegelikult fiskaalseadmes registreeritud (nt on prinditud fiskaalsissetulek), kuid fiskaalvastuse salvestamisel kanali andmebaasi tekkis tõrge.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-153">**Mark as registered** – Operators can use this option when the transaction was actually registered in the fiscal device (for example, a fiscal receipt was printed), but a failure occurred when the fiscal response was being saved to the channel database.</span></span>

> [!NOTE]
> <span data-ttu-id="dc2ce-154">Valikud **Jäta vahele** ja **Märgi registreerituks** tuleb aktiveerida fiskaalüksuse registreerimisprotsessis, enne kui neid saab kasutada.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-154">The **Skip** and **Mark as registered** options must be activated in the fiscal registration process before they are used.</span></span> <span data-ttu-id="dc2ce-155">Peale selle tuleb anda operaatoritele asjakohased õigused.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-155">In addition, corresponding permissions must be granted to operators.</span></span>

<span data-ttu-id="dc2ce-156">Valikud **Jäta vahele** ja **Märgi registreerituks** võimaldavad teabekoodidel talletada tõrke kohta teatud teavet, nagu tõrke põhjus või fiskaalüksuse registreerimise vahelejätmise või kande registreerituks märkimise põhjendus.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-156">The **Skip** and **Mark as registered** options enable info codes to capture some specific information about the failure, such as the reason for the failure or a justification for skipping the fiscal registration or marking the transaction as registered.</span></span> <span data-ttu-id="dc2ce-157">Lisateavet tõrketöötluse parameetrite seadistamise kohta vt teemast [Tõrketöötluse sätete määramine](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="dc2ce-157">For more details about how to set up error handling parameters, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

### <a name="optional-fiscal-registration"></a><span data-ttu-id="dc2ce-158">Valikuline fiskaalüksuse registreerimine</span><span class="sxs-lookup"><span data-stu-id="dc2ce-158">Optional fiscal registration</span></span>

<span data-ttu-id="dc2ce-159">Fiskaalüksuse registreerimine võib olla kohustuslik mõne toimingu jaoks, aga valikuline teiste jaoks.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-159">Fiscal registration might be mandatory for some operations but optional for others.</span></span> <span data-ttu-id="dc2ce-160">Näiteks võib kohustuslik olla regulaarsete müükide ja tagastuste fiskaalüksuse registreerimine, aga kliendi deposiitidega seotud toimingute fiskaalüksuse registreerimine võib olla valikuline.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-160">For example, the fiscal registration of regular sales and returns might be mandatory, but the fiscal registration of operations that are related to customer deposits might be optional.</span></span> <span data-ttu-id="dc2ce-161">Sellisel juhul peaks müügi fiskaalüksuse registreerimise tegemata jätmine keelama edaspidised müügid, kuid kliendi deposiidi fiskaalüksuse registreerimise tegemata jätmine ei tohiks edaspidiseid müüke keelata.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-161">In this case, failure to complete the fiscal registration of a sale should block further sales, but failure to complete the fiscal registration of a customer deposit should not block further sales.</span></span> <span data-ttu-id="dc2ce-162">Kohustuslike ja valikuliste toimingute eristamiseks soovitame nendega tegeleda läbi eri dokumendipakkujate ning seadistada nende pakkujate jaoks fiskaalüksuse registreerimise protsessis eraldi etapid.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-162">To distinguish mandatory and optional operations, we recommend that you handle them through different document providers, and that you set up separate steps in the fiscal registration process for those providers.</span></span> <span data-ttu-id="dc2ce-163">Parameeter **Jätka tõrke korral** peab olema lubatud mis tahes etapi jaoks, mis on seotud valikulise fiskaalüksuse registreerimisega.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-163">The **Continue on error** parameter should be enabled for any step that is related to optional fiscal registration.</span></span> <span data-ttu-id="dc2ce-164">Lisateavet tõrketöötluse parameetrite seadistamise kohta vt teemast [Tõrketöötluse sätete määramine](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="dc2ce-164">For more details about how to set up error handling parameters, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

### <a name="manually-running-fiscal-registration"></a><span data-ttu-id="dc2ce-165">Fiskaalüksuse registreerimise käsitsi käivitamine</span><span class="sxs-lookup"><span data-stu-id="dc2ce-165">Manually running fiscal registration</span></span>

<span data-ttu-id="dc2ce-166">Kui kande või sündmuse fiskaalüksuse registreerimine on pärast tõrget edasi lükatud (nt kui operaator valis tõrketöötluse dialoogiboksis suvandi **Tühista**), saate fiskaalüksuse registreerimist käsitsi uuesti alustada, käivitades vastava toimingu.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-166">If the fiscal registration of a transaction or event has been postponed after a failure (for example, if the operator selected **Cancel** in the error handling dialog box), you can manually rerun the fiscal registration by invoking a corresponding operation.</span></span> <span data-ttu-id="dc2ce-167">Lisateavet leiate teemast [Edasi lükatud fiskaalüksuse registreerimise käsitsi käivitamise lubamine](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration).</span><span class="sxs-lookup"><span data-stu-id="dc2ce-167">For more details, see [Enable manual execution of postponed fiscal registration](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration).</span></span>

### <a name="fiscal-registration-health-check"></a><span data-ttu-id="dc2ce-168">Fiskaalüksuse registreerimise seisundikontroll</span><span class="sxs-lookup"><span data-stu-id="dc2ce-168">Fiscal registration health check</span></span>

<span data-ttu-id="dc2ce-169">Fiskaalüksuse registreerimise seisundikontrolli protseduur kontrollib fiskaalse seadme või teenuse saadavust konkreetsete sündmuste tekkimisel.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-169">The health check procedure for fiscal registrations verifies the availability of the fiscal device or service when specific events occur.</span></span> <span data-ttu-id="dc2ce-170">Kui fiskaalüksuse registreerimist ei saa lõpule viia, teavitatakse sellest operaatorit ette.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-170">If the fiscal registration can't currently be completed, the operator is notified in advance.</span></span>

<span data-ttu-id="dc2ce-171">Kassa käivitab seisundikontrolli järgmiste sündmuste tekkimisel.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-171">The POS runs the health check when the following events occur:</span></span>

- <span data-ttu-id="dc2ce-172">Avatakse uus kanne.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-172">A new transaction is opened.</span></span>
- <span data-ttu-id="dc2ce-173">Peatatud kanne kutsutakse tagasi.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-173">A suspended transaction is recalled.</span></span>
- <span data-ttu-id="dc2ce-174">Müügi- või tagastuskanne viiakse lõpule.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-174">A sales or return transaction is finalized.</span></span>

<span data-ttu-id="dc2ce-175">Kui seisundikontroll nurjub, kuvab kassa seisundikontrolli dialoogiboksi.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-175">If the health check fails, the POS shows the health check dialog box.</span></span> <span data-ttu-id="dc2ce-176">Selles dialoogiboksis on järgmised nupud.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-176">This dialog box provides the following buttons:</span></span>

- <span data-ttu-id="dc2ce-177">**OK** – selle nupuga saab operaator eirata seisundikontrolli tõrget ja jätkata toimingu töötlemist.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-177">**OK** – This button lets the operator ignore a health check error and continue to process the operation.</span></span> <span data-ttu-id="dc2ce-178">Operaatorid saavad seda nuppu valida ainult siis, kui luba **Luba seisundikontrolli tõrge vahele jätta** on nende jaoks lubatud.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-178">Operators can select this button only if the **Allow skip health check error** permission is enabled for them.</span></span>
- <span data-ttu-id="dc2ce-179">**Tühista** – kui operaator valib selle nupu, tühistab kassa viimase toimingu (nt ei lisata kaupa uude kandesse).</span><span class="sxs-lookup"><span data-stu-id="dc2ce-179">**Cancel** – If the operator selects this button, the POS cancels the last action (for example, an item isn't added to a new transaction).</span></span>

> [!NOTE]
> <span data-ttu-id="dc2ce-180">Seisundikontroll käivitatakse ainult siis, kui praegune toiming nõuab fiskaalüksuse registreerimist ja parameeter **Jätka tõrke korral** on fiskaalüksuse registreerimise protsessi selles etapis keelatud.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-180">The health check is run only if the current operation requires fiscal registration, and if  the **Continue on error** parameter is disabled for the current step of the fiscal registration process.</span></span> <span data-ttu-id="dc2ce-181">Lisateavet leiate teemast [Tõrketöötluse sätete määramine](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="dc2ce-181">For more details, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

## <a name="storing-fiscal-response-in-fiscal-transaction"></a><span data-ttu-id="dc2ce-182">Fiskaalvastuse talletamine fiskaalkandesse</span><span class="sxs-lookup"><span data-stu-id="dc2ce-182">Storing fiscal response in fiscal transaction</span></span>

<span data-ttu-id="dc2ce-183">Kui kande või sündmuse fiskaalüksuse registreerimine õnnestus, luuakse kanali andmebaasi fiskaalkanne ja lingitakse algse kande või sündmusega.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-183">When fiscal registration of a transaction or event is successful, a fiscal transaction is created in the channel database and linked to the original transaction or event.</span></span> <span data-ttu-id="dc2ce-184">Samamoodi, kui nurjunud fiskaalüksuse registreerimisel valitakse suvand **Jäta vahele** või **Märgi registreerituks**, talletatakse see teave fiskaalkandesse.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-184">Similarly, if the **Skip** or **Mark as registered** option is selected for a failed fiscal registration, this information is stored in a fiscal transaction.</span></span> <span data-ttu-id="dc2ce-185">Fiskaalkandel on fiskaalseadme või -teenuse fiskaalvastutus.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-185">A fiscal transaction holds the fiscal response of the fiscal device or service.</span></span> <span data-ttu-id="dc2ce-186">Kui fiskaalüksuse registreerimisprotsess koosneb mitmest etapist, luuakse fiskaalkanne protsessi iga etapi kohta, mille tulemuseks on õnnestunud või nurjunud registreerimine.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-186">If the fiscal registration process consists of several steps, a fiscal transaction is created for each step of the process that resulted in a successful or failed registration.</span></span>

<span data-ttu-id="dc2ce-187">Fiskaalkanded edastatakse Retail Headquartersisse *P-tööga* koos jaemüügikannetega.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-187">Fiscal transactions are transferred to Retail Headquarters by the *P-job*, together with retail transactions.</span></span> <span data-ttu-id="dc2ce-188">Lehe **Kaupluse kanded** kiirkaardil **Fiskaalkanded** saate vaadata jaemüügikannetega lingitud fiskaalkandeid.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-188">On the **Fiscal transactions** FastTab of the **Retail store transactions** page, you can view the fiscal transactions that are linked to retail transactions.</span></span>

<span data-ttu-id="dc2ce-189">Fiskaalkanne talletab järgmised üksikasjad.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-189">A fiscal transaction stores the following details:</span></span>

- <span data-ttu-id="dc2ce-190">Fiskaalüksuse registreerimisprotsessi üksikasjad (protsess, konnektorigrupp, konnektor jne).</span><span class="sxs-lookup"><span data-stu-id="dc2ce-190">Fiscal registration process details (process, connector group, connector, and so on).</span></span> <span data-ttu-id="dc2ce-191">Samuti talletab see fiskaalseadme seerianumbri väljale **Registrinumber**, kui see teave sisaldub fiskaalvastuses.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-191">It also stores the serial number of the fiscal device in the **Register number** field, if this information is included in the fiscal response.</span></span>
- <span data-ttu-id="dc2ce-192">Fiskaalüksuse registreerimise olek: **Lõpule viidud** eduka registreerimise puhul, **Vahele jäetud**, kui operaator valis nurjunud registreerimise puhul suvandi **Jäta vahele**, või **Registreerituks märgitud**, kui operaator valis suvandi **Märgi registreerituks**.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-192">The status of the fiscal registration: **Completed** for successful registration, **Skipped** if the operator selected the **Skip** option for a failed registration, or **Marked as registered** if the operator selected the **Mark as registered** option.</span></span>
- <span data-ttu-id="dc2ce-193">Teabekoodi kanded, mis on seotud valitud fiskaalkandega.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-193">Info code transactions that are related to a selected fiscal transaction.</span></span> <span data-ttu-id="dc2ce-194">Teabekoodi kannete kuvamiseks valige kiirkaardil **Fiskaalkanded** fiskaalkanne olekuga **Vahele jäetud** või **Registreerituks märgitud** ja seejärel valige suvand **Teabekoodi kanded**.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-194">To view the info code transactions, on the **Fiscal transactions** FastTab, select a fiscal transaction that has a status of **Skipped** or **Marked as registered**, and then select **Info code transactions**.</span></span>

## <a name="fiscal-texts-for-discounts"></a><span data-ttu-id="dc2ce-195">Fiskaaltekstid allahindluste jaoks</span><span class="sxs-lookup"><span data-stu-id="dc2ce-195">Fiscal texts for discounts</span></span>

<span data-ttu-id="dc2ce-196">Teatud riikides või regioonides kehtivad erinõuded lisatekstide kohta, mis tuleb eri tüüpi allahindluste kohaldamisel fiskaalsissetulekutele printida.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-196">Some countries or regions have special requirements about additional texts that must be printed on fiscal receipts when different kinds of discounts are applied.</span></span> <span data-ttu-id="dc2ce-197">Fiskaalüksuse integratsiooni funktsioon võimaldab seadistada allahindluse jaoks teksti, mis prinditakse fiskaalsissetulekul allahindlusrea järele.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-197">The fiscal integration functionality lets you set up a special text for a discount that is printed after a discount line on a fiscal receipt.</span></span> <span data-ttu-id="dc2ce-198">Käsitsi allahindluste puhul saate määrata fiskaalteksti teabekoodile, mis on määratud kassa funktsiooniprofiilis teabekoodina **Toote allahindlus**.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-198">For manual discounts, you can configure a fiscal text for the info code that is specified as the **Product discount** info code in the POS functionality profile.</span></span> <span data-ttu-id="dc2ce-199">Lisateavet allahindluste jaoks fiskaaltekstide seadistamise kohta vt teemast [Fiskaaltekstide seadistamine allahindluste jaoks](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-texts-for-discounts).</span><span class="sxs-lookup"><span data-stu-id="dc2ce-199">For more details about how to set up fiscal texts for discounts, see [Set up fiscal texts for discounts](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-texts-for-discounts).</span></span>

## <a name="printing-fiscal-x-and-fiscal-z-reports"></a><span data-ttu-id="dc2ce-200">Fiskaalüksuse x- ja z-aruannete printimine</span><span class="sxs-lookup"><span data-stu-id="dc2ce-200">Printing fiscal X and fiscal Z reports</span></span>

<span data-ttu-id="dc2ce-201">Fiskaalüksuse integratsiooni funktsioon toetab integreeritud fiskaalseadme või -teenuse kohaste päeva lõpetamise väljavõtete loomist.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-201">Fiscal integration functionality supports generation of end-of-day statements that are specific to the integrated fiscal device or service:</span></span>

- <span data-ttu-id="dc2ce-202">Kassa ekraanipaigutusse tuleb lisada uued nupud, mis käivitavad vastavad toimingud.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-202">New buttons that run corresponding operations should be added to the POS screen layout.</span></span> <span data-ttu-id="dc2ce-203">Lisateavet vt teemast [Kassa fiskaalüksuste x-/z-aruannete seadistamine](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos).</span><span class="sxs-lookup"><span data-stu-id="dc2ce-203">For more details, see [Set up fiscal X/Z reports from the POS](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos).</span></span>
- <span data-ttu-id="dc2ce-204">Fiskaalüksuse integratsiooni näidises peavad need toimingud vastama fiskaalseadme vastavatele toimingutele.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-204">In the fiscal integration sample, these operations should be matched to the corresponding operations of the fiscal device.</span></span>

## <a name="fiscal-integration-samples-in-the-retail-sdk"></a><span data-ttu-id="dc2ce-205">Fiskaalüksuse integratsiooni näidised Retail SDK-s</span><span class="sxs-lookup"><span data-stu-id="dc2ce-205">Fiscal integration samples in the Retail SDK</span></span>

<span data-ttu-id="dc2ce-206">Retail SDK-s on praegu saadaval järgmised fiskaalüksuse integratsiooni näidised.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-206">The following fiscal integration samples are currently available in the Retail SDK:</span></span>

- [<span data-ttu-id="dc2ce-207">Fiskaalprinteri integratsiooni näide Itaalia jaoks</span><span class="sxs-lookup"><span data-stu-id="dc2ce-207">Fiscal printer integration sample for Italy</span></span>](emea-ita-fpi-sample.md)
- [<span data-ttu-id="dc2ce-208">Fiskaalprinteri integratsiooni näide Poola jaoks</span><span class="sxs-lookup"><span data-stu-id="dc2ce-208">Fiscal printer integration sample for Poland</span></span>](emea-pol-fpi-sample.md)
- [<span data-ttu-id="dc2ce-209">Fiskaalüksuse registreerimisteenuse integratsiooni näide Austria jaoks</span><span class="sxs-lookup"><span data-stu-id="dc2ce-209">Fiscal registration service integration sample for Austria</span></span>](emea-aut-fi-sample.md)
- [<span data-ttu-id="dc2ce-210">Fiskaalüksuse registreerimisteenuse integratsiooni näide Tšehhi Vabariigi jaoks</span><span class="sxs-lookup"><span data-stu-id="dc2ce-210">Fiscal registration service integration sample for Czech Republic</span></span>](emea-cze-fi-sample.md)

<span data-ttu-id="dc2ce-211">Retail SDK-s on saadaval ka järgmised fiskaalüksuse integratsiooni funktsioonid, mis aga praegu ei kasuta fiskaalüksuse integratsiooni raamistikku.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-211">The following fiscal integration functionality is also available in the Retail SDK but doesn't currently take advantage of the fiscal integration framework.</span></span> <span data-ttu-id="dc2ce-212">Nende funktsioonide migreerimine fiskaalüksuse integratsiooni raamistikku on kavandatud tulevastesse värskendustesse.</span><span class="sxs-lookup"><span data-stu-id="dc2ce-212">Migration of this functionality to the fiscal integration framework is planned for later updates.</span></span>

- [<span data-ttu-id="dc2ce-213">Kassaaparaadi funktsioonid Prantsusmaa jaoks</span><span class="sxs-lookup"><span data-stu-id="dc2ce-213">Cash register functionality for France</span></span>](emea-fra-cash-registers.md)
- [<span data-ttu-id="dc2ce-214">Kassaaparaadi funktsioonid Norra jaoks</span><span class="sxs-lookup"><span data-stu-id="dc2ce-214">Cash register functionality for Norway</span></span>](emea-nor-cash-registers.md)
- [<span data-ttu-id="dc2ce-215">Retail POS-i juhtseadmetega integreerimise näide Rootsi jaoks</span><span class="sxs-lookup"><span data-stu-id="dc2ce-215">Sample for Retail POS integration with control units for Sweden</span></span>](./retail-sdk-control-unit-sample.md)
