---
title: Jaemüügikande süsteemsuskontroll
description: Selles teemas kirjeldatakse jaemüügikande süsteemsuskontrolli funktsiooni teenuses Microsoft Dynamics 365 for Retail.
author: josaw1
manager: AnnBe
ms.date: 05/30/2019
ms.topic: index-page
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: josaw
ms.search.validFrom: 2019-01-15
ms.dyn365.ops.version: 10
ms.openlocfilehash: 1fc894206f9d90fce1e2eab292ac241e9d943e23
ms.sourcegitcommit: aec1dcd44274e9b8d0770836598fde5533b7b569
ms.translationtype: HT
ms.contentlocale: et-EE
ms.lasthandoff: 06/03/2019
ms.locfileid: "1617316"
---
# <a name="retail-transaction-consistency-checker"></a><span data-ttu-id="af0f5-103">Jaemüügikande süsteemsuskontroll</span><span class="sxs-lookup"><span data-stu-id="af0f5-103">Retail transaction consistency checker</span></span>


[!include [banner](includes/banner.md)]
[!include [preview banner](includes/preview-banner.md)]

<span data-ttu-id="af0f5-104">Selles teemas kirjeldatakse jaemüügikande süsteemsuskontrolli funktsiooni, mis lasti välja teenuse Microsoft Dynamics 365 for Finance and Operations versioonis 8.1.3.</span><span class="sxs-lookup"><span data-stu-id="af0f5-104">This topic describes the retail transaction consistency checker functionality introduced in Microsoft Dynamics 365 for Finance and Operations version 8.1.3.</span></span> <span data-ttu-id="af0f5-105">Süsteemsuskontroll tuvastab ja isoleerib vastuolulised kanded enne, kui väljavõtte sisestuse protsess need peale võtab.</span><span class="sxs-lookup"><span data-stu-id="af0f5-105">The consistency checker identifies and isolates inconsistent transactions before they are picked up by the statement posting process.</span></span>

<span data-ttu-id="af0f5-106">Microsoft Dynamics 365 for Retailis võib väljavõtte sisestamine nurjuda, kuna jaemüügikannete tabelites on vastuolulised andmed.</span><span class="sxs-lookup"><span data-stu-id="af0f5-106">When a statement is posted in Microsoft Dynamics 365 for Retail, posting can fail due to inconsistent data in the retail transaction tables.</span></span> <span data-ttu-id="af0f5-107">Andmete probleemi võivad põhjustada ettenägematud probleemid kassarakenduses (POS) või kolmanda osapoole kassasüsteemidest valesti imporditud kanded.</span><span class="sxs-lookup"><span data-stu-id="af0f5-107">The data issue may be caused by unforeseen issues in the point of sale (POS) application, or if transactions were incorrectly imported from third-party POS systems.</span></span> <span data-ttu-id="af0f5-108">Need vastuolud võivad ilmuda näiteks järgmistel juhtudel.</span><span class="sxs-lookup"><span data-stu-id="af0f5-108">Examples of how these inconsistencies may appear include:</span></span> 

- <span data-ttu-id="af0f5-109">Päisetabelis olev kande kogusumma ei kattu kande ridade kogusummaga.</span><span class="sxs-lookup"><span data-stu-id="af0f5-109">The transaction total on the header table does not match the transaction total on the lines.</span></span>
- <span data-ttu-id="af0f5-110">Päisetabeli ridade arv ei kattu kandetabeli ridade arvuga.</span><span class="sxs-lookup"><span data-stu-id="af0f5-110">The line count on the header table does not match with the number of lines in the transaction table.</span></span>
- <span data-ttu-id="af0f5-111">Päisetabeli maksud ei kattu ridade maksusummaga.</span><span class="sxs-lookup"><span data-stu-id="af0f5-111">Taxes on the header table do not match the tax amount on the lines.</span></span> 

<span data-ttu-id="af0f5-112">Kui väljavõtte sisestamise protsess laadib vastuolulised kanded, luuakse vastuolulised müügiarved ja maksetöölehed ning kogu väljavõtte sisestamise protsess nurjub.</span><span class="sxs-lookup"><span data-stu-id="af0f5-112">When inconsistent transactions are picked up by the statement posting process, inconsistent sales invoices and payment journals are created, and the entire statement posting process fails as a result.</span></span> <span data-ttu-id="af0f5-113">Sellises olekus väljavõtete taastamine hõlmab keerukaid andmeparandusi mitmes kandetabelis.</span><span class="sxs-lookup"><span data-stu-id="af0f5-113">Recovering the statements from such a state involves complex data fixes across multiple transaction tables.</span></span> <span data-ttu-id="af0f5-114">Jaemüügikande süsteemsuskontroll takistab selliseid probleeme.</span><span class="sxs-lookup"><span data-stu-id="af0f5-114">The retail transaction consistency checker prevents such issues.</span></span>

<span data-ttu-id="af0f5-115">Järgmine diagramm illustreerib kande süsteemsuskontrolliga sisestusprotsessi.</span><span class="sxs-lookup"><span data-stu-id="af0f5-115">The following chart illustrates the posting process with the transaction consistency checker.</span></span>

<span data-ttu-id="af0f5-116">![Väljavõtte sisestamise protsess jaemüügikande süsteemsuskontrolliga](./media/validchecker.png "Väljavõtte sisestamise protsess jaemüügikande süsteemsuskontrolliga")</span><span class="sxs-lookup"><span data-stu-id="af0f5-116">![Statement posting process with retail transaction consistency checker](./media/validchecker.png "Statement posting process with retail transaction consistency checker")</span></span>

<span data-ttu-id="af0f5-117">Pakktöötluse funktsioon **Kinnita kaupluse kanded** kontrollib jaemüügi kandetabelite järjepidevust järgmiste stsenaariumide suhtes.</span><span class="sxs-lookup"><span data-stu-id="af0f5-117">The **Validate store transactions** batch process checks the consistency of the retail transaction tables for the following scenarios.</span></span>

- <span data-ttu-id="af0f5-118">**Kliendi konto** – kontrollib, kas jaemüügi kandetabelites märgitud kliendikonto on peakontori kliendi koondandmetes olemas.</span><span class="sxs-lookup"><span data-stu-id="af0f5-118">**Customer account** – Validates that the customer account in the retail transaction tables exists in the HQ customer master.</span></span>
- <span data-ttu-id="af0f5-119">**Ridade arv** – kontrollib, kas kande päisetabelis märgitud ridade arv kattub müügikande tabeli ridade arvuga.</span><span class="sxs-lookup"><span data-stu-id="af0f5-119">**Line count** – Validates that the number of lines, as captured on the transaction header table, matches the number of lines in the sales transaction tables.</span></span>
- <span data-ttu-id="af0f5-120">**Hind sisaldab maksu** – kontrollib kas parameeter **Hind sisaldab maksu** on kõigil kanderidadel ühtne.</span><span class="sxs-lookup"><span data-stu-id="af0f5-120">**Price includes tax** – Validates that the **Price includes tax** parameter is consistent across transaction lines.</span></span>
- <span data-ttu-id="af0f5-121">**Brutosumma** – kontrollib, kas päises olev brutosumma vastab ridadel olevate netosummade kogusummale pluss maksusummale.</span><span class="sxs-lookup"><span data-stu-id="af0f5-121">**Gross amount** – Validates that the gross amount on the header is the sum of the net amounts on the lines plus the tax amount.</span></span>
- <span data-ttu-id="af0f5-122">**Netosumma** – kontrollib, kas päises olev netosumma vastab ridadel olevate netosummade kogusummale.</span><span class="sxs-lookup"><span data-stu-id="af0f5-122">**Net amount** – Validates that the net amount on the header is the sum of the net amounts on the lines.</span></span>
- <span data-ttu-id="af0f5-123">**Üle-/alamakse** – kontrollib, ega päises oleva brutosumma ja maksesumma vahe ei ületa üle-/alamakse konfiguratsiooni maksimumi.</span><span class="sxs-lookup"><span data-stu-id="af0f5-123">**Under / Over payment** – Validates that the difference between the gross amount on the header and the payment amount doesn't exceed the maximum underpayment/overpayment configuration.</span></span>
- <span data-ttu-id="af0f5-124">**Allahindluse summa** – kontrollib, kas allahindluse summa allahindlustabelites ja allahindluse summa jaemüügi kanderidade tabelites on ühtne ja kas päises olev allahindluse summa päises on ridadel olevate allahindluse summade kogusumma.</span><span class="sxs-lookup"><span data-stu-id="af0f5-124">**Discount amount** – Validates that the discount amount on the discount tables and the discount amount on the retail transaction line tables are consistent, and that the discount amount on the header is the sum of the discount amounts on the lines.</span></span>
- <span data-ttu-id="af0f5-125">**Rea allahindlus** – kontrollib, kas rea kandereal olev rea allahindlus on kandereale vastavas allahindluse tabelis olevate kõigi ridade summa.</span><span class="sxs-lookup"><span data-stu-id="af0f5-125">**Line discount** – Validates that the line discount on the transaction line is the sum of all the lines in the discount table that corresponds to the transaction line.</span></span>
- <span data-ttu-id="af0f5-126">**Kinkekaardi kaup** – Retail ei toeta kinkekaardikaupade tagastamist.</span><span class="sxs-lookup"><span data-stu-id="af0f5-126">**Gift card item** – Retail doesn't support the return of gift card items.</span></span> <span data-ttu-id="af0f5-127">Kinkekaardil oleva saldo saab aga sularahaks teisendada. Väljavõtte sisestamise protsess nurjub iga kinkekaardikauba puhul, mida töödeldakse sularahaks teisendamise rea asemel tagastusreana.</span><span class="sxs-lookup"><span data-stu-id="af0f5-127">However, the balance on a gift card can be cashed out. Any gift card item that is processed as a return line instead of a cash-out line fails the statement posting process.</span></span> <span data-ttu-id="af0f5-128">Kinkekaardikaupade valideerimisprotsess aitab tagada, et ainsad tagastatavad kinkekaardi reakaubad jaemüügi kandetabelites oleksid kinkekaardi sularahaks teisendamise read.</span><span class="sxs-lookup"><span data-stu-id="af0f5-128">The validation process for gift card items helps guarantee that the only return gift card line items on the retail transaction tables are gift card cash-out lines.</span></span>
- <span data-ttu-id="af0f5-129">**Negatiivne hind** – kontrollib, ega kuskil pole negatiivse hinna kanderidu.</span><span class="sxs-lookup"><span data-stu-id="af0f5-129">**Negative price** – Validates that there are no negative price transaction lines.</span></span>
- <span data-ttu-id="af0f5-130">**Kaup ja variant** – kontrollib, kas kanderidadel olevad kaubad ja variandid on olemas ka kauba ja variandi põhifailis.</span><span class="sxs-lookup"><span data-stu-id="af0f5-130">**Item & Variant** – Validates that items and variants on the transaction lines exist in the item and variant master file.</span></span>

## <a name="set-up-the-consistency-checker"></a><span data-ttu-id="af0f5-131">Süsteemsuskontrolli seadistamine</span><span class="sxs-lookup"><span data-stu-id="af0f5-131">Set up the consistency checker</span></span>

<span data-ttu-id="af0f5-132">Seadistage pakktöötluse funktsiooni „Kontrolli kaupluse kandeid” regulaarne käitamine jaotises **Jaemüük \> Jaemüügi IT \> Kassa sisestamine**.</span><span class="sxs-lookup"><span data-stu-id="af0f5-132">Configure the "Validate store transactions" batch process, at **Retail \> Retail IT \> POS posting**, for periodic runs.</span></span> <span data-ttu-id="af0f5-133">Pakett-tööd saab ajastada kaupluse organisatsiooni hierarhia alusel, sarnaselt protsesside „Väljavõtte arvutamine partiina” ja „Väljavõtte sisestamine partiina” seadistamisega.</span><span class="sxs-lookup"><span data-stu-id="af0f5-133">The batch job can be scheduled based on store organization hierarchy, similar to how the "Calculate statement in batch" and "Post statement in batch" processes are set up.</span></span> <span data-ttu-id="af0f5-134">Soovitame konfigureerida pakktöötluse nii, et seda käitataks mitu korda päevas, ja ajastada käitamise iga P-töö lõpus.</span><span class="sxs-lookup"><span data-stu-id="af0f5-134">We recommend that you configure this batch process to run multiple times in a day and schedule it so that it runs at the end of every P-job execution.</span></span>

## <a name="results-of-validation-process"></a><span data-ttu-id="af0f5-135">Kontrollimisprotsessi tulemused</span><span class="sxs-lookup"><span data-stu-id="af0f5-135">Results of validation process</span></span>

<span data-ttu-id="af0f5-136">Pakktöötluse kontrolli tulemused märgistatakse sobivas jaemüügikandes.</span><span class="sxs-lookup"><span data-stu-id="af0f5-136">The results of the validation check by the batch process are tagged on the appropriate retail transaction.</span></span> <span data-ttu-id="af0f5-137">Jaemüügikande kirje väljal **Kinnitamise olek** on märge **Õnnestus** või **Tõrge** ning viimase kontrollimise kuupäev kuvatakse väljal **Viimase kinnitamise aeg**.</span><span class="sxs-lookup"><span data-stu-id="af0f5-137">The **Validation status** field on the retail transaction record is either set to **Successful** or **Error**, and the date of the last validation run appears on the **Last validation time** field.</span></span>

<span data-ttu-id="af0f5-138">Kontrollimistõrkega seotud täpsema tõrketeksti vaatamiseks valige asjakohane jaemüügikande kirje ja seejärel klõpsake nuppu **Valideerimistõrked**.</span><span class="sxs-lookup"><span data-stu-id="af0f5-138">To view more descriptive error text relating to a validation failure, select the relevant retail store transaction record and click the **Validation errors** button.</span></span>

<span data-ttu-id="af0f5-139">Kandeid, mille kontroll nurjub või mis ei ole veel kontrollitud, ei lisata väljavõtetesse.</span><span class="sxs-lookup"><span data-stu-id="af0f5-139">Transactions that fail the validation check and transactions that have not yet been validated will not be pulled into statements.</span></span> <span data-ttu-id="af0f5-140">Protsessi „Väljavõtte arvutamine” ajal teavitatakse kasutajaid, kui teatud kandeid ei saanud väljavõttesse kaasata.</span><span class="sxs-lookup"><span data-stu-id="af0f5-140">During the "Calculate statement" process, users will be notified if there are transactions that could have been included in the statement but weren't.</span></span>

<span data-ttu-id="af0f5-141">Ainus viis valideerimistõrke lahendamiseks on võtta ühendust Microsofti toega.</span><span class="sxs-lookup"><span data-stu-id="af0f5-141">If a validation error is found, the only way to fix the error is to contact Microsoft Support.</span></span> <span data-ttu-id="af0f5-142">Tulevases versioonis lisatakse funktsioonid, mis võimaldavad kasutajatel nurjunud kirjeid kasutajaliidese kaudu parandada.</span><span class="sxs-lookup"><span data-stu-id="af0f5-142">In a future release, capability will be added so that users can fix the records that failed through the user interface.</span></span> <span data-ttu-id="af0f5-143">Samuti tulevad saadavale logimise ja auditeerimise funktsioonid, mis võimaldavad muudatuste ajalugu jälgida.</span><span class="sxs-lookup"><span data-stu-id="af0f5-143">Logging and auditing capabilities will also be made available to trace the history of the modifications.</span></span>

> [!NOTE]
> <span data-ttu-id="af0f5-144">Tulevases versioonis lisatakse täiendavad kinnitusreeglid, mis toetavad rohkem stsenaariume.</span><span class="sxs-lookup"><span data-stu-id="af0f5-144">Additional validation rules to support more scenarios will be added in a future release.</span></span>
